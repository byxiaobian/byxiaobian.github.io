<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>CentOS7基础套餐搭建 | By_Xb</title><meta name="keywords" content="CentOS7"><meta name="author" content="By_Xb"><meta name="copyright" content="By_Xb"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="ssh端口修改，nginx，mysql8，jdk12，redis，winscp免密传输"><meta property="og:type" content="article"><meta property="og:title" content="CentOS7基础套餐搭建"><meta property="og:url" content="https://wtnl.xyz/2023/06/23/centos7%E5%9F%BA%E7%A1%80%E7%8E%AF%E5%A2%83%E5%A5%97%E9%A4%90/index.html"><meta property="og:site_name" content="By_Xb"><meta property="og:description" content="ssh端口修改，nginx，mysql8，jdk12，redis，winscp免密传输"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/byxiaobian/CDN/images/images1202212022008612.png"><meta property="article:published_time" content="2023-06-23T06:47:58.802Z"><meta property="article:modified_time" content="2023-06-23T04:34:58.469Z"><meta property="article:author" content="By_Xb"><meta property="article:tag" content="CentOS7"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/byxiaobian/CDN/images/images1202212022008612.png"><link rel="shortcut icon" href="/img/siteicon/favicon-32x32.png"><link rel="canonical" href="https://wtnl.xyz/2023/06/23/centos7%E5%9F%BA%E7%A1%80%E7%8E%AF%E5%A2%83%E5%A5%97%E9%A4%90/"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="//busuanzi.ibruce.info"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" media="print" onload='this.media="all"'><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#121212","position":"top-center"},
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: true,
  islazyload: false,
  isanchor: false
};

var saveToLocal = {
  set: function setWithExpiry(key, value, ttl) {
    const now = new Date()
    const expiryDay = ttl * 86400000
    const item = {
      value: value,
      expiry: now.getTime() + expiryDay,
}
    localStorage.setItem(key, JSON.stringify(item))
  },

  get: function getWithExpiry(key) {
    const itemStr = localStorage.getItem(key)

    if (!itemStr) {
      return undefined
    }
    const item = JSON.parse(itemStr)
    const now = new Date()

    if (now.getTime() > item.expiry) {
      localStorage.removeItem(key)
      return undefined
    }
    return item.value
  }
}

// https://stackoverflow.com/questions/16839698/jquery-getscript-alternative-in-native-javascript
const getScript = url => new Promise((resolve, reject) => {
  const script = document.createElement('script')
  script.src = url
  script.async = true
  script.onerror = reject
  script.onload = script.onreadystatechange = function() {
    const loadState = this.readyState
    if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
    script.onload = script.onreadystatechange = null
    resolve()
  }
  document.head.appendChild(script)
})</script><script id="config-diff">var GLOBAL_CONFIG_SITE={title:"CentOS7基础套餐搭建",isPost:!0,isHome:!1,isHighlightShrink:!1,isToc:!0,postUpdate:"2023-06-23 12:34:58"}</script><noscript><style type="text/css">#nav{opacity:1}.justified-gallery img{opacity:1}#post-meta time,#recent-posts time{display:inline!important}</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if (GLOBAL_CONFIG_SITE.isHome && /iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    document.addEventListener('pjax:complete', detectApple)})(window)</script><link defer="defer" rel="stylesheet" href="https://cdn.jsdelivr.net/gh/byxiaobian/CDN/css/extrastyle.css" media="defer" onload='this.media="all"'><link async rel="stylesheet" href="/css/foter.css" media="defer" onload='this.media="all"'><link async rel="stylesheet" href="/css/myblog.css" media="defer" onload='this.media="all"'><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/xingjiahui/modify@2.0.0/pace/themes/pink/pace-theme-flash.css"><meta name="generator" content="Hexo 5.4.2"><link rel="alternate" href="/atom.xml" title="By_Xb" type="application/atom+xml"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://cdn.jsdelivr.net/gh/byxiaobian/CDN/images2/author.webp" onerror='onerror=null,src="/img/friend_404.gif"' alt="avatar"></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">72</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">标签</div><div class="length-num">33</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">分类</div><div class="length-num">8</div></a></div></div></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i> <span>首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i> <span>时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i> <span>标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i> <span>分类</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fa fa-heartbeat"></i> <span>清单</span><i class="fas fa-chevron-down expand hide"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/bangumis/"><i class="fa-fw fa fa-spinner"></i> <span>追番</span></a></li><li><a class="site-page child" href="/gallery/index.htm"><i class="fa-fw fas fa-images"></i> <span>相册</span></a></li><li><a class="site-page child" href="/shuoshuo/"><i class="fa-fw fa fa-cloud"></i> <span>动态</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i> <span>友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i> <span>关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image:url(https://cdn.jsdelivr.net/gh/byxiaobian/CDN/images/images1202212022008612.png)"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">By_Xb</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i> <span>搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i> <span>首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i> <span>时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i> <span>标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i> <span>分类</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fa fa-heartbeat"></i> <span>清单</span><i class="fas fa-chevron-down expand hide"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/bangumis/"><i class="fa-fw fa fa-spinner"></i> <span>追番</span></a></li><li><a class="site-page child" href="/gallery/index.htm"><i class="fa-fw fas fa-images"></i> <span>相册</span></a></li><li><a class="site-page child" href="/shuoshuo/"><i class="fa-fw fa fa-cloud"></i> <span>动态</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i> <span>友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i> <span>关于</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">CentOS7基础套餐搭建</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-06-23T06:47:58.802Z" title="发表于 2023-06-23 14:47:58">2023-06-23</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-06-23T04:34:58.469Z" title="更新于 2023-06-23 12:34:58">2023-06-23</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E8%BF%90%E7%BB%B4-%E7%9B%B8%E5%85%B3/">运维-相关</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">4.8k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>21分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="CentOS7基础套餐搭建"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h2 id="centos7基础套餐搭建"><a href="#centos7基础套餐搭建" class="headerlink" title="centos7基础套餐搭建"></a>centos7基础套餐搭建</h2><h2 id="ssh默认端口修改"><a href="#ssh默认端口修改" class="headerlink" title="ssh默认端口修改"></a>ssh默认端口修改</h2><p>服务器默认为22端口，这样会造成有被暴力破解密码的风险，下面是更换ssh端口过程</p><h3 id="1-添加ssh端口"><a href="#1-添加ssh端口" class="headerlink" title="1.添加ssh端口"></a><strong>1.添加ssh端口</strong></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/ssh/sshd_config</span><br></pre></td></tr></table></figure><p>打开配置文件，添加我们需要更改的端口号，此时不要删除默认22端口，让两个端口同时存在，如果我们直接修改了端口，然后启动防火墙之后，就会出现我们没有使用防火墙开放端口，导致我们连接不上服务器，我们暂且保留默认22，如果更改过后，使用新端口号没问题，再删除默认22端口不迟</p><p><img src="https://cdn.jsdelivr.net/gh/byxiaobian/CDN/images/image11/202306231231956.png" alt="img"></p><p> 我们想把端口改为2020，就如图添加上去，保存退出，然后重启ssh服务</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart sshd.service</span><br></pre></td></tr></table></figure><h3 id="2。配置防火墙规则"><a href="#2。配置防火墙规则" class="headerlink" title="2。配置防火墙规则"></a>2。配置防火墙规则</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">#启动防火墙</span><br><span class="line">systemctl start firewalld.service</span><br><span class="line">#关闭防火墙</span><br><span class="line">systemctl stop firewalld.service</span><br><span class="line">#重启防火墙</span><br><span class="line">systemctl restart firewalld.service</span><br><span class="line">#查看防火墙状态</span><br><span class="line">systemctl status firewalld.service</span><br><span class="line">#设置开机启动防火墙</span><br><span class="line">systemctl enable firewalld.service</span><br><span class="line">#设置开机不启动防火墙</span><br><span class="line">systemctl disable firewalld.service</span><br></pre></td></tr></table></figure><p>首先启动防火墙，然后添加防火墙规则</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --zone=public --add-port=2020/tcp --permanent　　</span><br><span class="line">#说明:#开放2020端口</span><br><span class="line">#–zone 作用域</span><br><span class="line">#–add-port=2020/tcp #添加端口，格式为：端口/通讯协议</span><br><span class="line">#–permanent 永久生效，没有此参数重启后失效</span><br><span class="line">#添加完毕过后重新读取防火墙规则或者重启防火墙，规则才生效</span><br><span class="line">#重新读取防火墙规则</span><br><span class="line">firewall-cmd --reload</span><br><span class="line">#或者重启防火墙：</span><br><span class="line">systemctl restart firewalld.service</span><br></pre></td></tr></table></figure><h3 id="3-连接测试"><a href="#3-连接测试" class="headerlink" title="3.连接测试"></a>3.连接测试</h3><p>断开当前ssh连接，然后把ssh连接端口改为我们示例所修改的2020尝试连接，如果连接正常，我们继续如下步骤：</p><p><img src="https://cdn.jsdelivr.net/gh/byxiaobian/CDN/images/image11/202306231231514.png" alt="img"></p><p> 正常连接过后，我们此时就可以删除默认的22端口了</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/ssh/sshd_config</span><br></pre></td></tr></table></figure><p>删除Port 22 这一行，只留下我们的Port 2020，然后重启ssh服务</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart sshd.service</span><br></pre></td></tr></table></figure><p>至此，centos7默认ssh端口修改完成</p><h2 id="nginx配置篇"><a href="#nginx配置篇" class="headerlink" title="nginx配置篇"></a>nginx配置篇</h2><p><code>yum安装nginx</code></p><h3 id="1、安装依赖"><a href="#1、安装依赖" class="headerlink" title="1、安装依赖"></a>1、安装依赖</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install yum-utils -y</span><br></pre></td></tr></table></figure><h3 id="2、配置nginx镜像源"><a href="#2、配置nginx镜像源" class="headerlink" title="2、配置nginx镜像源"></a>2、配置nginx镜像源</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">#创建nginx.repo</span><br><span class="line">vim /etc/yum.repos.d/nginx.repo</span><br><span class="line"></span><br><span class="line">#写入以下内容</span><br><span class="line">[nginx-stable]</span><br><span class="line">name=nginx stable repo</span><br><span class="line">baseurl=http://nginx.org/packages/centos/7/x86_64/</span><br><span class="line">gpgcheck=1</span><br><span class="line">enabled=1</span><br><span class="line">gpgkey=https://nginx.org/keys/nginx_signing.key</span><br><span class="line">module_hotfixes=true</span><br><span class="line"></span><br><span class="line">[nginx-mainline]</span><br><span class="line">name=nginx mainline repo</span><br><span class="line">baseurl=http://nginx.org/packages/mainline/centos/7/x86_64/</span><br><span class="line">gpgcheck=1</span><br><span class="line">enabled=0</span><br><span class="line">gpgkey=https://nginx.org/keys/nginx_signing.key</span><br><span class="line">module_hotfixes=true</span><br></pre></td></tr></table></figure><p>一定要联网运行以下命令,如果没有联网会报错</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum clean all</span><br><span class="line">yum repolist all</span><br></pre></td></tr></table></figure><h3 id="3、安装nginx"><a href="#3、安装nginx" class="headerlink" title="3、安装nginx"></a>3、安装nginx</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install nginx -y</span><br></pre></td></tr></table></figure><h3 id="4、管理nginx相关命令"><a href="#4、管理nginx相关命令" class="headerlink" title="4、管理nginx相关命令"></a>4、管理nginx相关命令</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#通过以下命令管理nginx</span><br><span class="line">nginx  #启动nginx</span><br><span class="line">nginx -s quit #关闭nginx</span><br><span class="line">./nginx -s reload	#修改了文件之后重新加载该程序文件</span><br><span class="line">ps aux|grep nginx	#查看nginx进程</span><br><span class="line">nginx -s reload #重启nginx    如果重启报错（nginx: [error] open() &quot;/var/run/nginx.pid&quot; failed (2: No such file or directory)） 执行 nginx -c /etc/nginx/nginx.conf</span><br></pre></td></tr></table></figure><h3 id="nginx相关配置文件"><a href="#nginx相关配置文件" class="headerlink" title="nginx相关配置文件"></a>nginx相关配置文件</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">配置文件 /etc/nginx/nginx.conf</span><br><span class="line">自定义配置文件 /etc/nginx/conf.d</span><br><span class="line">项目文件 /usr/share/nginx/html</span><br><span class="line">日志文件 /var/log/nginx</span><br></pre></td></tr></table></figure><h3 id="nginx配置https"><a href="#nginx配置https" class="headerlink" title="nginx配置https"></a>nginx配置https</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><span class="line">#server &#123;</span><br><span class="line">#    listen       <span class="number">80</span>;</span><br><span class="line">#    server_name  localhost;</span><br><span class="line"></span><br><span class="line">    #access_log  /<span class="keyword">var</span>/log/nginx/host.<span class="property">access</span>.<span class="property">log</span>  main;</span><br><span class="line"></span><br><span class="line">#    location / &#123;</span><br><span class="line">#        root   /usr/share/nginx/html;</span><br><span class="line">#        index  index.<span class="property">html</span> index.<span class="property">htm</span>;</span><br><span class="line">#    &#125;</span><br><span class="line"></span><br><span class="line">   </span><br><span class="line"></span><br><span class="line">    #error_page  <span class="number">404</span>              /<span class="number">404.</span>html;</span><br><span class="line"></span><br><span class="line">    # redirect server error pages to the <span class="keyword">static</span> page /50x.<span class="property">html</span></span><br><span class="line">    #</span><br><span class="line">#    error_page   <span class="number">500</span> <span class="number">502</span> <span class="number">503</span> <span class="number">504</span>  /50x.<span class="property">html</span>;</span><br><span class="line">#    location = /50x.<span class="property">html</span> &#123;</span><br><span class="line">#        root   /usr/share/nginx/html;</span><br><span class="line">#    &#125;</span><br><span class="line"></span><br><span class="line">    # proxy the <span class="variable constant_">PHP</span> scripts to <span class="title class_">Apache</span> listening on <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">80</span></span><br><span class="line">    #</span><br><span class="line">    #location ~ \.<span class="property">php$</span> &#123;</span><br><span class="line">    #    proxy_pass   <span class="attr">http</span>:<span class="comment">//127.0.0.1;</span></span><br><span class="line">    #&#125;</span><br><span class="line"></span><br><span class="line">    # pass the <span class="variable constant_">PHP</span> scripts to <span class="title class_">FastCGI</span> server listening on <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">9000</span></span><br><span class="line">    #</span><br><span class="line">    #location ~ \.<span class="property">php$</span> &#123;</span><br><span class="line">    #    root           html;</span><br><span class="line">    #    fastcgi_pass   <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">9000</span>;</span><br><span class="line">    #    fastcgi_index  index.<span class="property">php</span>;</span><br><span class="line">    #    fastcgi_param  <span class="variable constant_">SCRIPT_FILENAME</span>  /scripts$fastcgi_script_name;</span><br><span class="line">    #    include        fastcgi_params;</span><br><span class="line">    #&#125;</span><br><span class="line">    # deny access to .<span class="property">htaccess</span> files, <span class="keyword">if</span> <span class="title class_">Apache</span><span class="string">&#x27;s document root</span></span><br><span class="line"><span class="string">    # concurs with nginx&#x27;</span>s one</span><br><span class="line">    #</span><br><span class="line">    #location ~ /\.<span class="property">ht</span> &#123;</span><br><span class="line">    #    deny  all;</span><br><span class="line">    #&#125;</span><br><span class="line">#&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#https 配置</span><br><span class="line">    server &#123;</span><br><span class="line">       listen       <span class="number">443</span> ssl;</span><br><span class="line">       server_name  www.<span class="property">mk88</span>.<span class="property">ga</span>;</span><br><span class="line"></span><br><span class="line">       root   /usr/share/nginx/html;  #文件地址</span><br><span class="line">       index  index.<span class="property">html</span> index.<span class="property">htm</span>; #默认首页</span><br><span class="line"></span><br><span class="line">       ssl_certificate      /usr/src/dev/httpskp/8670678_www.<span class="property">mk88</span>.<span class="property">ga</span>.<span class="property">pem</span>; #签名路径</span><br><span class="line">       ssl_certificate_key  /usr/src/dev/httpskp/8670678_www.<span class="property">mk88</span>.<span class="property">ga</span>.<span class="property">key</span>; #签名路径</span><br><span class="line"></span><br><span class="line">       ssl_session_cache    <span class="attr">shared</span>:<span class="attr">SSL</span>:1m;</span><br><span class="line">       ssl_session_timeout  5m;</span><br><span class="line">       ssl_ciphers  <span class="attr">HIGH</span>:!<span class="attr">aNULL</span>:!<span class="title class_">MD5</span>;</span><br><span class="line">       ssl_prefer_server_ciphers  on;</span><br><span class="line"></span><br><span class="line">	location ^~/exf &#123;</span><br><span class="line">        alias  /usr/src/dev/control-front/dist/;</span><br><span class="line">        try_files  $uri $uri/ <span class="regexp">/exf/i</span>ndex.<span class="property">html</span>;</span><br><span class="line">        index  index.<span class="property">html</span> index.<span class="property">htm</span>;</span><br><span class="line">       &#125;</span><br><span class="line">	</span><br><span class="line"></span><br><span class="line">	location /ex &#123;</span><br><span class="line">        proxy_pass <span class="attr">http</span>:<span class="comment">//localhost:8008/control;</span></span><br><span class="line">        proxy_set_header   <span class="title class_">Host</span>    $host;</span><br><span class="line">        proxy_set_header   X-<span class="title class_">Real</span>-<span class="variable constant_">IP</span>   $remote_addr;</span><br><span class="line">        proxy_set_header   X-<span class="title class_">Forwarded</span>-<span class="title class_">For</span>   $proxy_add_x_forwarded_for;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	location /stage-api/ &#123;</span><br><span class="line">	proxy_set_header <span class="title class_">Host</span> $http_host;</span><br><span class="line">	proxy_set_header X-<span class="title class_">Real</span>-<span class="variable constant_">IP</span> $remote_addr;</span><br><span class="line">	proxy_set_header <span class="variable constant_">REMOTE</span>-<span class="variable constant_">HOST</span> $remote_addr;</span><br><span class="line">	proxy_set_header X-<span class="title class_">Forwarded</span>-<span class="title class_">For</span> $proxy_add_x_forwarded_for;</span><br><span class="line">	proxy_pass <span class="attr">http</span>:<span class="comment">//localhost:8080/;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">  #http请求自动重订向https</span><br><span class="line">    server&#123;</span><br><span class="line">        listen <span class="number">80</span>;</span><br><span class="line">        server_name www.<span class="property">mk88</span>.<span class="property">ga</span>;</span><br><span class="line">        rewrite ^<span class="regexp">/(.*)$ https:/</span><span class="regexp">/www.mk88.ga:443/</span>$1 permanent;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>5、浏览器访问nginx测试页面<br>1、关闭防火墙或开启80端口</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">systemctl stop firewalld      #关闭防火墙</span><br><span class="line">firewall-cmd --zone=public --add-port=80/tcp --permanent    #开启80端口</span><br><span class="line">firewall-cmd --reload      #重载防火墙</span><br></pre></td></tr></table></figure><p>2、关闭selinux</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">setenforce 0      #临时关闭selinux</span><br><span class="line">sed -i &#x27;s/SELINUX=enforcing/SELINUX=disable/&#x27; /etc/selinux/config   #永久关闭selinux</span><br></pre></td></tr></table></figure><p>在浏览器输入ip地址:80</p><h2 id="jdk12环境配置"><a href="#jdk12环境配置" class="headerlink" title="jdk12环境配置"></a>jdk12环境配置</h2><p>Linux系统安装jdk12</p><h3 id="1-下载jdk"><a href="#1-下载jdk" class="headerlink" title="1.下载jdk"></a>1.下载jdk</h3><p> <a href="E:\BaiduNetdiskDownload\jdk-12.0.2_linux-x64_bin.tar.gz">jdk-12.0.2_linux-x64_bin.tar.gz</a></p><p>下载jdk<br>我这里的jdk是jdk-12.0.2版本的，适合64位操作系统</p><h3 id="2-安装"><a href="#2-安装" class="headerlink" title="2.安装"></a>2.安装</h3><p>先把安装包上传到/home目录</p><p><img src="https://cdn.jsdelivr.net/gh/byxiaobian/CDN/images/image11/202306231231745.jpeg" alt="在这里插入图片描述"></p><h3 id="解压"><a href="#解压" class="headerlink" title="解压"></a>解压</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf jdk-12.0.2_linux-x64_bin.tar.gz</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/byxiaobian/CDN/images/image11/202306231232390.jpeg" alt="在这里插入图片描述"></p><p>然后就解压好了</p><p><img src="https://cdn.jsdelivr.net/gh/byxiaobian/CDN/images/image11/202306231232649.jpeg" alt="在这里插入图片描述"></p><h3 id="配置环境变量"><a href="#配置环境变量" class="headerlink" title="配置环境变量"></a>配置环境变量</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/profile</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/byxiaobian/CDN/images/image11/202306231232223.jpeg" alt="在这里插入图片描述"></p><p>在末尾添加下面内容</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">export JAVA_HOME=/home/jdk-12.0.2</span><br><span class="line">export CLASSPATH=$JAVA_HOME/lib</span><br><span class="line">export PATH=$JAVA_HOME/bin:$PATH</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/byxiaobian/CDN/images/image11/202306231232139.jpeg" alt="在这里插入图片描述"></p><h3 id="让环境变量生效"><a href="#让环境变量生效" class="headerlink" title="让环境变量生效"></a>让环境变量生效</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source /etc/profile</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/byxiaobian/CDN/images/image11/202306231232318.jpeg" alt="在这里插入图片描述"></p><p>检查是否成功，下面三个命令都可以执行代表成功，有一个失败就算失败，需要检查环境变量是否配置错误</p><p><img src="https://cdn.jsdelivr.net/gh/byxiaobian/CDN/images/image11/202306231232492.jpeg" alt="在这里插入图片描述"></p><p><img src="https://cdn.jsdelivr.net/gh/byxiaobian/CDN/images/image11/202306231232278.jpeg" alt="在这里插入图片描述"></p><p><img src="https://cdn.jsdelivr.net/gh/byxiaobian/CDN/images/image11/202306231233246.jpeg" alt="在这里插入图片描述"></p><h3 id="启动："><a href="#启动：" class="headerlink" title="启动："></a>启动：</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nohup java -jar control-0.0.1-SNAPSHOT.jar  &gt;logs.log 2&gt;&amp;1 &amp;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="jar包启动脚本"><a href="#jar包启动脚本" class="headerlink" title="jar包启动脚本"></a>jar包启动脚本</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment">#这里可替换为你自己的执行程序，其他代码无需更改</span></span><br><span class="line">APP_NAME=/usr/local/dev/yk_admin/ruoyi-admin.jar</span><br><span class="line"></span><br><span class="line"><span class="comment">#日志文件路径及名称（目录按照各自配置）</span></span><br><span class="line">LOG_FILE=/usr/local/dev/yk_admin/admin.log</span><br><span class="line"> </span><br><span class="line"><span class="comment">#使用说明，用来提示输入参数</span></span><br><span class="line"><span class="function"><span class="title">usage</span></span>() &#123;</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;Usage: sh demo.sh [start|stop|restart|status]&quot;</span></span><br><span class="line">    <span class="built_in">exit</span> 1</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">#检查程序是否在运行</span></span><br><span class="line"><span class="function"><span class="title">is_exist</span></span>() &#123; </span><br><span class="line">    pid=`ps -ef | grep <span class="variable">$APP_NAME</span> | grep -v grep | awk <span class="string">&#x27;&#123;print $2&#125;&#x27;</span> `</span><br><span class="line">    <span class="comment">#如果不存在返回1，存在返回0</span></span><br><span class="line">    <span class="keyword">if</span> [ -z <span class="string">&quot;<span class="variable">$&#123;pid&#125;</span>&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">      <span class="built_in">return</span> 1</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">      <span class="built_in">return</span> 0</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">#启动方法</span></span><br><span class="line"><span class="function"><span class="title">start</span></span>() &#123;</span><br><span class="line">   is_exist</span><br><span class="line">   <span class="keyword">if</span> [ $? -eq <span class="string">&quot;0&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">     <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$&#123;APP_NAME&#125;</span> is already running. pid=<span class="variable">$&#123;pid&#125;</span> .&quot;</span></span><br><span class="line">   <span class="keyword">else</span></span><br><span class="line">     <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$&#123;APP_NAME&#125;</span> 启动 .&quot;</span></span><br><span class="line">     <span class="built_in">nohup</span> java -jar <span class="variable">$APP_NAME</span> &gt;&gt; <span class="variable">$LOG_FILE</span> 2&gt;&amp;1 &amp;</span><br><span class="line">     <span class="comment">#指定配置文件</span></span><br><span class="line">     <span class="comment">#nohup java -jar -Dfile.encoding=utf-8 -Dspring.profiles.active=dev $APP_NAME &gt;&gt; $LOG_FILE 2&gt;&amp;1 &amp;</span></span><br><span class="line">   <span class="keyword">fi</span></span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">#停止方法</span></span><br><span class="line"><span class="function"><span class="title">stop</span></span>() &#123;</span><br><span class="line">   is_exist</span><br><span class="line">   <span class="keyword">if</span> [ $? -eq <span class="string">&quot;0&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">     <span class="built_in">kill</span> -9 <span class="variable">$pid</span></span><br><span class="line">   <span class="keyword">else</span></span><br><span class="line">     <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$&#123;APP_NAME&#125;</span> is not running&quot;</span></span><br><span class="line">   <span class="keyword">fi</span></span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">#输出运行状态</span></span><br><span class="line"><span class="function"><span class="title">status</span></span>() &#123;</span><br><span class="line">   is_exist</span><br><span class="line">   <span class="keyword">if</span> [ $? -eq <span class="string">&quot;0&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">     <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$&#123;APP_NAME&#125;</span> is running. Pid is <span class="variable">$&#123;pid&#125;</span>&quot;</span></span><br><span class="line">   <span class="keyword">else</span></span><br><span class="line">     <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$&#123;APP_NAME&#125;</span> is not running.&quot;</span></span><br><span class="line">   <span class="keyword">fi</span></span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">#重启</span></span><br><span class="line"><span class="function"><span class="title">restart</span></span>() &#123;</span><br><span class="line">   stop</span><br><span class="line">   start</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">#根据输入参数，选择执行对应方法，不输入则执行使用说明</span></span><br><span class="line"><span class="keyword">case</span> <span class="string">&quot;<span class="variable">$1</span>&quot;</span> <span class="keyword">in</span></span><br><span class="line">   <span class="string">&quot;start&quot;</span>)</span><br><span class="line">     start</span><br><span class="line">     ;;</span><br><span class="line">   <span class="string">&quot;stop&quot;</span>)</span><br><span class="line">     stop</span><br><span class="line">     ;;</span><br><span class="line">   <span class="string">&quot;status&quot;</span>)</span><br><span class="line">     status</span><br><span class="line">     ;;</span><br><span class="line">   <span class="string">&quot;restart&quot;</span>)</span><br><span class="line">     restart</span><br><span class="line">     ;;</span><br><span class="line">   *)</span><br><span class="line">     usage</span><br><span class="line">     ;;</span><br><span class="line"><span class="keyword">esac</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="常见报错"><a href="#常见报错" class="headerlink" title="常见报错"></a>常见报错</h3><p><strong>nohup: failed to run command ‘java’: No such file or directory解决方案</strong></p><blockquote><p>问题描述</p><p>Jekins打包后端项目后发送Jar到对应的应用服务器，通过应用服务器Shell脚本启动服务报错</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">nohup</span>: failed to run <span class="built_in">command</span> ‘java’: No such file or directory</span><br></pre></td></tr></table></figure><p><strong>原因分析：</strong><br><code>通过脚本执行Java命令时确报错找不到java。这是由于脚本执行命令的时候会默认区/usr/bin里面去找java</code></p><p><strong>解决方案：</strong><br><code>java的bin配置软链接映射到/usr/bin目录下</code></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#查看jdk安装目录</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$JAVA_HOME</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#cd到usr/bin目录下</span></span><br><span class="line"><span class="built_in">cd</span> /usr/bin</span><br><span class="line"></span><br><span class="line"><span class="comment">#配置软链接映射</span></span><br><span class="line"><span class="built_in">ln</span> -s -f JDK所在路径/bin/java</span><br></pre></td></tr></table></figure><h2 id="安装mysql8"><a href="#安装mysql8" class="headerlink" title="安装mysql8"></a>安装mysql8</h2><p>安装版本：MySQL-community-8.0.29</p><h3 id="0-删除MariaDB"><a href="#0-删除MariaDB" class="headerlink" title="0. 删除MariaDB"></a>0. 删除MariaDB</h3><blockquote><p>在CentOS 7中默认有安装MariaDB，这个是MySQL的分支，通过其他方式安装MySQL需要删除MariaDB或补全依赖关系,但通过yum安装则会自动覆盖MariaDB并补全依赖（也就是说yum安装的话删不删都行）</p></blockquote><h4 id="0-1-检查MariaDB"><a href="#0-1-检查MariaDB" class="headerlink" title="0.1 检查MariaDB"></a>0.1 检查MariaDB</h4><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm -qa|<span class="keyword">grep</span> mariadb</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/byxiaobian/CDN/images/image11/202306231233616.png" alt="image-20220712200207165"></p><h4 id="0-2-删除MariaDB"><a href="#0-2-删除MariaDB" class="headerlink" title="0.2 删除MariaDB"></a>0.2 删除MariaDB</h4><p>（如果上条命令返回为空则略过）</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">rpm -e <span class="attr">--nodeps</span> mariadb-server</span><br><span class="line">rpm -e <span class="attr">--nodeps</span> mariadb</span><br><span class="line">rpm -e <span class="attr">--nodeps</span> mariadb-libs</span><br></pre></td></tr></table></figure><h4 id="0-3-检查MariaDB"><a href="#0-3-检查MariaDB" class="headerlink" title="0.3 检查MariaDB"></a>0.3 检查MariaDB</h4><p>重复步骤0.1若无返回即表示删除成功</p><h3 id="1-添加MySQL-Yum-Repository"><a href="#1-添加MySQL-Yum-Repository" class="headerlink" title="1. 添加MySQL Yum Repository"></a>1. 添加MySQL Yum Repository</h3><blockquote><p>从CentOS 7开始，MariaDB成为Yum源中默认的数据库安装包。也就是说在CentOS 7及以上的系统中使用yum安装MySQL默认安装的会是MariaDB（MySQL的一个分支）。如果想安装官方MySQL版本，需要使用MySQL提供的Yum源。</p></blockquote><h4 id="1-1-下载MySQL源"><a href="#1-1-下载MySQL源" class="headerlink" title="1.1 下载MySQL源"></a>1.1 下载MySQL源</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https:<span class="operator">/</span><span class="operator">/</span>dev.mysql.com<span class="operator">/</span><span class="keyword">get</span><span class="operator">/</span>mysql80<span class="operator">-</span>community<span class="operator">-</span><span class="keyword">release</span><span class="operator">-</span>el7<span class="number">-3.</span>noarch.rpm</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/byxiaobian/CDN/images/image11/202306231233507.png" alt="image-20220712201235953"></p><h4 id="1-2-安装MySQL源"><a href="#1-2-安装MySQL源" class="headerlink" title="1.2 安装MySQL源"></a>1.2 安装MySQL源</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install mysql80<span class="operator">-</span>community<span class="operator">-</span><span class="keyword">release</span><span class="operator">-</span>el7<span class="number">-3.</span>noarch.rpm   </span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/byxiaobian/CDN/images/image11/202306231233756.png" alt="image-20220712201820601"></p><h4 id="1-3-检查"><a href="#1-3-检查" class="headerlink" title="1.3 检查"></a>1.3 检查</h4><p>安装完成后会在<code>/etc/yum.repos.d/</code>目录下生成两个repo文件<code>mysql-community.repo</code>及 <code>mysql-community-source.repo</code></p><p><img src="https://cdn.jsdelivr.net/gh/byxiaobian/CDN/images/image11/202306231233108.png" alt="image-20220712202228045"></p><h3 id="2-安装MySQL"><a href="#2-安装MySQL" class="headerlink" title="2. 安装MySQL"></a>2. 安装MySQL</h3><h4 id="2-1-使用yum安装MySQL"><a href="#2-1-使用yum安装MySQL" class="headerlink" title="2.1 使用yum安装MySQL"></a>2.1 使用yum安装MySQL</h4><p>默认情况下自动安装最新版的MySQL，即8.0.29</p><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y <span class="keyword">install </span>mysql-community-server</span><br></pre></td></tr></table></figure><p>该命令会安装MySQL服务器 (mysql-community-server) 及其所需的依赖、相关组件</p><p><code>如果安装过程中报错，You could try using --skip-broken to work around the proble</code></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">--&gt; Finished Dependency Resolution</span><br><span class="line">Error: Package: mysql-community-client-8.0.30-1.el8.x86_64 (mysql80-community)</span><br><span class="line">           Requires: libncurses.so.6()(64bit)</span><br><span class="line">Error: Package: mysql-community-libs-8.0.30-1.el8.x86_64 (mysql80-community)</span><br><span class="line">           Requires: libstdc++.so.6(GLIBCXX_3.4.20)(64bit)</span><br><span class="line">Error: Package: mysql-community-libs-8.0.30-1.el8.x86_64 (mysql80-community)</span><br><span class="line">           Requires: libstdc++.so.6(CXXABI_1.3.8)(64bit)</span><br><span class="line">Error: Package: mysql-community-client-8.0.30-1.el8.x86_64 (mysql80-community)</span><br><span class="line">           Requires: libstdc++.so.6(GLIBCXX_3.4.21)(64bit)</span><br><span class="line">Error: Package: mysql-community-server-8.0.30-1.el8.x86_64 (mysql80-community)</span><br><span class="line">           Requires: libstdc++.so.6(CXXABI_1.3.9)(64bit)</span><br><span class="line">Error: Package: mysql-community-server-8.0.30-1.el8.x86_64 (mysql80-community)</span><br><span class="line">           Requires: libstdc++.so.6(GLIBCXX_3.4.21)(64bit)</span><br><span class="line">Error: Package: mysql-community-client-plugins-8.0.30-1.el8.x86_64 (mysql80-community)</span><br><span class="line">           Requires: libc.so.6(GLIBC_2.25)(64bit)</span><br><span class="line">Error: Package: mysql-community-libs-8.0.30-1.el8.x86_64 (mysql80-community)</span><br><span class="line">           Requires: libstdc++.so.6(GLIBCXX_3.4.21)(64bit)</span><br><span class="line">Error: Package: mysql-community-client-plugins-8.0.30-1.el8.x86_64 (mysql80-community)</span><br><span class="line">           Requires: libstdc++.so.6(CXXABI_1.3.8)(64bit)</span><br><span class="line">Error: Package: mysql-community-server-8.0.30-1.el8.x86_64 (mysql80-community)</span><br><span class="line">           Requires: libtirpc.so.3()(64bit)</span><br><span class="line">Error: Package: mysql-community-client-plugins-8.0.30-1.el8.x86_64 (mysql80-community)</span><br><span class="line">           Requires: libstdc++.so.6(CXXABI_1.3.9)(64bit)</span><br><span class="line">Error: Package: mysql-community-libs-8.0.30-1.el8.x86_64 (mysql80-community)</span><br><span class="line">           Requires: libc.so.6(GLIBC_2.28)(64bit)</span><br><span class="line">Error: Package: mysql-community-server-8.0.30-1.el8.x86_64 (mysql80-community)</span><br><span class="line">           Requires: libstdc++.so.6(GLIBCXX_3.4.20)(64bit)</span><br><span class="line">Error: Package: mysql-community-client-8.0.30-1.el8.x86_64 (mysql80-community)</span><br><span class="line">           Requires: libstdc++.so.6(CXXABI_1.3.9)(64bit)</span><br><span class="line">Error: Package: mysql-community-server-8.0.30-1.el8.x86_64 (mysql80-community)</span><br><span class="line">           Requires: libstdc++.so.6(CXXABI_1.3.11)(64bit)</span><br><span class="line">Error: Package: mysql-community-client-plugins-8.0.30-1.el8.x86_64 (mysql80-community)</span><br><span class="line">           Requires: libstdc++.so.6(GLIBCXX_3.4.20)(64bit)</span><br><span class="line">Error: Package: mysql-community-client-8.0.30-1.el8.x86_64 (mysql80-community)</span><br><span class="line">           Requires: libtinfo.so.6()(64bit)</span><br><span class="line">Error: Package: mysql-community-server-8.0.30-1.el8.x86_64 (mysql80-community)</span><br><span class="line">           Requires: libstdc++.so.6(GLIBCXX_3.4.22)(64bit)</span><br><span class="line">Error: Package: mysql-community-server-8.0.30-1.el8.x86_64 (mysql80-community)</span><br><span class="line">           Requires: libtirpc.so.3(TIRPC_0.3.3)(64bit)</span><br><span class="line">Error: Package: mysql-community-client-8.0.30-1.el8.x86_64 (mysql80-community)</span><br><span class="line">           Requires: libc.so.6(GLIBC_2.28)(64bit)</span><br><span class="line">Error: Package: mysql-community-libs-8.0.30-1.el8.x86_64 (mysql80-community)</span><br><span class="line">           Requires: libstdc++.so.6(CXXABI_1.3.9)(64bit)</span><br><span class="line">Error: Package: mysql-community-client-8.0.30-1.el8.x86_64 (mysql80-community)</span><br><span class="line">           Requires: libstdc++.so.6(GLIBCXX_3.4.20)(64bit)</span><br><span class="line">Error: Package: mysql-community-client-plugins-8.0.30-1.el8.x86_64 (mysql80-community)</span><br><span class="line">           Requires: libstdc++.so.6(GLIBCXX_3.4.21)(64bit)</span><br><span class="line">Error: Package: mysql-community-server-8.0.30-1.el8.x86_64 (mysql80-community)</span><br><span class="line">           Requires: libtirpc.so.3(TIRPC_0.3.0)(64bit)</span><br><span class="line">Error: Package: mysql-community-server-8.0.30-1.el8.x86_64 (mysql80-community)</span><br><span class="line">           Requires: libc.so.6(GLIBC_2.28)(64bit)</span><br><span class="line">Error: Package: mysql-community-client-8.0.30-1.el8.x86_64 (mysql80-community)</span><br><span class="line">           Requires: libstdc++.so.6(CXXABI_1.3.8)(64bit)</span><br><span class="line">Error: Package: mysql-community-server-8.0.30-1.el8.x86_64 (mysql80-community)</span><br><span class="line">           Requires: libstdc++.so.6(CXXABI_1.3.8)(64bit)</span><br><span class="line"> You could try using --skip-broken to work around the problem</span><br><span class="line"> You could try running: rpm -Va --nofiles --nodigest</span><br></pre></td></tr></table></figure><h4 id="原因"><a href="#原因" class="headerlink" title="原因"></a>原因</h4><p>旧版本MySQL卸载不干净，Yum缓存没有清空</p><h4 id="解决办法"><a href="#解决办法" class="headerlink" title="解决办法"></a>解决办法</h4><ul><li><p>移除所有mysql开头的包</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># yum list installed | grep mysql</span><br><span class="line"># yum remove mysql-community-common</span><br><span class="line">...</span><br></pre></td></tr></table></figure></li><li><p>清除yum缓存</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum clean all</span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>删除mysql遗留文件(请做此动作前备份数据)</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rm -R /var/cache/yum/x86_64/7/mysql*</span><br></pre></td></tr></table></figure></li><li><p>从mysql官网上获取community版本最新的yum repository并安装</p></li><li><p>安装mysql-community-server</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install mysql-community-server</span><br></pre></td></tr></table></figure></li></ul><blockquote><p>如果安装过程中出现报错<code>Public key for mysql-community-icu-data-files-8.0.29-1.el7.x86_64.rpm is not installed</code></p><p><img src="https://cdn.jsdelivr.net/gh/byxiaobian/CDN/images/image11/202306231233046.png" alt="image-20220712203138433"></p><p><em><strong>请看步骤2.2</strong></em></p></blockquote><h4 id="2-2-导入新的MySQL存储库的GPG秘钥"><a href="#2-2-导入新的MySQL存储库的GPG秘钥" class="headerlink" title="2.2 导入新的MySQL存储库的GPG秘钥"></a>2.2 导入新的MySQL存储库的GPG秘钥</h4><p>出现步骤2.2原因为官方 MySQL 存储库的 GPG 密钥已过期，无法安装或更新 MySQL 包。</p><p>并且官方也提交了该Bug <a target="_blank" rel="noopener" href="https://bugs.mysql.com/bug.php?id=106188">https://bugs.mysql.com/bug.php?id=106188</a></p><p>我们可以使用以下命令重新导入新的密钥来解决该问题</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm --<span class="keyword">import</span> https:<span class="comment">//repo.mysql.com/RPM-GPG-KEY-mysql-2022</span></span><br></pre></td></tr></table></figure><p>执行完后再使用步骤2.1中命令来安装即可</p><p><img src="https://img2022.cnblogs.com/blog/2632571/202207/2632571-20220713084144469-718033893.png" alt="image-20220712204009052"></p><h4 id="2-3-安装完成"><a href="#2-3-安装完成" class="headerlink" title="2.3 安装完成"></a>2.3 安装完成</h4><p>若出现以下提示则表示安装完成</p><p><img src="https://cdn.jsdelivr.net/gh/byxiaobian/CDN/images/image11/202306231233168.png" alt="image-20220712204114312"></p><h3 id="3-启动MySQL"><a href="#3-启动MySQL" class="headerlink" title="3. 启动MySQL"></a>3. 启动MySQL</h3><h4 id="3-1-启动MySQL服务"><a href="#3-1-启动MySQL服务" class="headerlink" title="3.1 启动MySQL服务"></a>3.1 启动MySQL服务</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl <span class="keyword">start</span>  mysqld.service</span><br></pre></td></tr></table></figure><h4 id="3-2-查看MySQL服务状态"><a href="#3-2-查看MySQL服务状态" class="headerlink" title="3.2 查看MySQL服务状态"></a>3.2 查看MySQL服务状态</h4><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl <span class="built_in">status</span>  mysqld.service</span><br></pre></td></tr></table></figure><blockquote><p><strong>注意上述命令为<code>mysqld.service</code>，不是<code>mysql.service</code></strong></p></blockquote><p>若要检查MySQL是否为开机自启，可执行以下命令查看开机自启列表</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl list-unit-files|<span class="keyword">grep</span> enabled</span><br></pre></td></tr></table></figure><p>若MySQL未在开机自启列表，执行以下代码设置开机自启动</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl <span class="built_in">enable</span> mysqld</span><br></pre></td></tr></table></figure><h4 id="3-3-停止MySQL服务"><a href="#3-3-停止MySQL服务" class="headerlink" title="3.3 停止MySQL服务"></a>3.3 停止MySQL服务</h4><figure class="highlight vbnet"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl <span class="keyword">stop</span> mysqld.service</span><br></pre></td></tr></table></figure><p>3.4 重启MySQL服务</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart mysqld.service</span><br></pre></td></tr></table></figure><h3 id="4-修改密码"><a href="#4-修改密码" class="headerlink" title="4. 修改密码"></a>4. 修改密码</h3><h4 id="4-1-查看默认密码"><a href="#4-1-查看默认密码" class="headerlink" title="4.1 查看默认密码"></a>4.1 查看默认密码</h4><p>在Linux中安装MySQL不会在安装过程中让你设置密码，而是自动生成一个默认密码，并存储在日志文件中</p><p>可以使用以下命令查看默认密码</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep <span class="string">&quot;password&quot;</span> /var/<span class="built_in">log</span>/mysqld.<span class="built_in">log</span></span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/byxiaobian/CDN/images/image11/202306231234247.png" alt="image-20220712205501797"></p><blockquote><p>返回代码中冒号后即为默认密码，建议复制粘贴，因为在输入密码过程中并不显示，容易输错</p></blockquote><h4 id="4-2-修改密码"><a href="#4-2-修改密码" class="headerlink" title="4.2 修改密码"></a>4.2 修改密码</h4><p>进入MySQL中后更改你的密码（MySQL在不更改默认密码的情况下无法操作数据库）</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql <span class="operator">-</span>u root <span class="operator">-</span>p</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">USER</span> <span class="string">&#x27;root&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span> IDENTIFIED <span class="keyword">BY</span> <span class="string">&#x27;AAAbbb123@&#x27;</span>;</span><br></pre></td></tr></table></figure><blockquote><p>MySQL默认密码规范等级为MEDIUM，即需要满足密码长度大于8，包含数字、大写/小写和特殊字符</p></blockquote><h4 id="4-3-修改密码规范等级"><a href="#4-3-修改密码规范等级" class="headerlink" title="4.3 修改密码规范等级"></a>4.3 修改密码规范等级</h4><p><img src="https://cdn.jsdelivr.net/gh/byxiaobian/CDN/images/image11/202306231234378.png" alt="image-20220712211211940"></p><p>如果是仅做学习测试使用，不需要过于复杂的密码，可以通过修改密码规范等级来使用更简单的密码</p><blockquote><p>前提仍是需要先设置一个符合MEDIUM要求的复杂密码，否则不允许操作数据库</p></blockquote><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">set</span> <span class="keyword">global</span> validate_password.policy = <span class="number">0</span>;		<span class="meta">#  设置密码规范等级为0</span></span><br><span class="line"><span class="keyword">set</span> <span class="keyword">global</span> validate_password.length = <span class="number">4</span>;		<span class="meta">#  设置密码最短长度为4</span></span><br></pre></td></tr></table></figure><p>成功后再次使用步骤4.2命令重设密码即可</p><h3 id="5-远程访问"><a href="#5-远程访问" class="headerlink" title="5.远程访问"></a>5.远程访问</h3><h4 id="5-1-创建远程访问root用户"><a href="#5-1-创建远程访问root用户" class="headerlink" title="5.1 创建远程访问root用户"></a>5.1 创建远程访问root用户</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">user</span> <span class="string">&#x27;root&#x27;</span>@<span class="string">&#x27;%&#x27;</span> IDENTIFIED <span class="keyword">WITH</span> mysql_native_password <span class="keyword">BY</span> <span class="string">&#x27;password&#x27;</span>;</span><br></pre></td></tr></table></figure><h4 id="5-2-为该用户授予全部权限"><a href="#5-2-为该用户授予全部权限" class="headerlink" title="5.2 为该用户授予全部权限"></a>5.2 为该用户授予全部权限</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">grant</span> <span class="keyword">all</span> <span class="keyword">on</span> <span class="operator">*</span>.<span class="operator">*</span> <span class="keyword">to</span> <span class="string">&#x27;root&#x27;</span>@<span class="string">&#x27;%&#x27;</span>;</span><br></pre></td></tr></table></figure><blockquote><p>此处root用户名可随意更改</p></blockquote><h4 id="5-3-开放端口3306"><a href="#5-3-开放端口3306" class="headerlink" title="5.3 开放端口3306"></a>5.3 开放端口3306</h4><p>如需修改端口 修改端口如下：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">编辑my.cnf文件</span></span><br><span class="line">[root@centosServer ~]# vi /etc/my.cnf</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">修改默认端口3306</span></span><br><span class="line">[mysqld]</span><br><span class="line">port=3309</span><br></pre></td></tr></table></figure><p>Linux打开/关闭/查询/端口命令如下</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">firewall-<span class="keyword">cmd</span><span class="language-bash"> --permanent --add-port=3306/tcp	    <span class="comment">#打开3306端口</span></span></span><br><span class="line">firewall-<span class="keyword">cmd</span><span class="language-bash"> --permanent --remove-port=3306/tcp     <span class="comment">#关闭3306端口</span></span></span><br><span class="line">firewall-<span class="keyword">cmd</span><span class="language-bash"> --reload				    <span class="comment">#重载使上述命令生效</span></span></span><br><span class="line">firewall-<span class="keyword">cmd</span><span class="language-bash"> --query-port=3306/tcp       	    <span class="comment">#查询3306端口是否开放</span></span></span><br></pre></td></tr></table></figure><p>若嫌麻烦可以直接关闭防火墙，安全性自行评估</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">systemctl stop firewalld.service			   <span class="comment">#关闭防火墙</span></span><br><span class="line">firewall-<span class="keyword">cmd</span><span class="language-bash"> --zone=public --list-ports		           <span class="comment">#查看防火墙所有开放的端口</span></span></span><br><span class="line">firewall-<span class="keyword">cmd</span><span class="language-bash"> --state					   <span class="comment">#查看防火墙状态</span></span></span><br></pre></td></tr></table></figure><h4 id="5-4-云端服务器开启端口参考"><a href="#5-4-云端服务器开启端口参考" class="headerlink" title="5.4 云端服务器开启端口参考"></a>5.4 云端服务器开启端口参考</h4><p>以腾讯云服务器为例</p><p>在控制台中选择防火墙，添加规则中应用类型下拉选择MySQL即可</p><p><img src="https://cdn.jsdelivr.net/gh/byxiaobian/CDN/images/image11/202306231234281.png" alt="image-20220712214410603"></p><h4 id="5-5-通过DataGrip远程访问"><a href="#5-5-通过DataGrip远程访问" class="headerlink" title="5.5 通过DataGrip远程访问"></a>5.5 通过DataGrip远程访问</h4><p>若为本地虚拟机中Linux，则在Linux中使用<code>ifconfig</code>查询内网ip地址，使用此ip在DataGrip上连接</p><p>若为云端服务器，则使用该服务器公网ip进行访问</p><p><img src="https://cdn.jsdelivr.net/gh/byxiaobian/CDN/images/image11/202306231234214.png" alt="image-20220712214940276"></p><p>若测试连接无错误即可成功远程访问该数据库</p><h2 id="redis安装"><a href="#redis安装" class="headerlink" title="redis安装"></a>redis安装</h2><h3 id="安装最新软件源"><a href="#安装最新软件源" class="headerlink" title="安装最新软件源"></a>安装最新软件源</h3><p>直接使用yum install redis命令安装的Redis可能不是最新版本，如果需要安装新版本则需要安装Remi的软件源，命令如下：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">yum install -y http://rpms.famillecollet.com/enterprise/remi-release-7.rpm</span><br><span class="line"></span><br><span class="line">其中数字7大概率是CentOS 7的版本，如果有错误欢迎指出。</span><br></pre></td></tr></table></figure><h3 id="安装软件"><a href="#安装软件" class="headerlink" title="安装软件"></a>安装软件</h3><p>安装软件源之后就可以使用如下命令安装最新版本的Redis</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum --enablerepo=remi install redis</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="启动服务"><a href="#启动服务" class="headerlink" title="启动服务"></a>启动服务</h3><p>安装完成之后即可启动服务，命令如下：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">启动redis</span><br><span class="line">systemctl start redis</span><br><span class="line"></span><br><span class="line">查看Redis服务状态</span><br><span class="line">systemctl status redis</span><br><span class="line"></span><br><span class="line">查看Redis版本</span><br><span class="line">redis-cli --version</span><br><span class="line"></span><br><span class="line">设置开机自启动</span><br><span class="line">systemctl enable redis</span><br></pre></td></tr></table></figure><h3 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h3><p>允许远程连接<br>打开配置文件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/redis.conf</span><br><span class="line">// 修改以下内容</span><br><span class="line">将bind 后 127.0.0.1 改为 内网IP	# 为安全起见，请勿使用 0.0.0.0</span><br><span class="line">protected-mode yes 改为 protected-mode no	# 关闭保护模式</span><br><span class="line">daemonize no 改为 daemonize yes	# 开启守护进程</span><br><span class="line">空白处添加 requirepass 123456	# 自行设置密码，例：123456</span><br><span class="line">启动redis</span><br><span class="line">redis-server /etc/redis.conf </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">开放6379端口：</span><br><span class="line">firewall-cmd --zone=public --add-port=6379/tcp --permanent #开放6379端口</span><br><span class="line">firewall-cmd --reload   # 配置立即生效</span><br></pre></td></tr></table></figure><h2 id="curl安装"><a href="#curl安装" class="headerlink" title="curl安装"></a>curl安装</h2><p><code>yum安装curl</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum -y install curl #下载安装curl</span><br><span class="line">curl www.baidu.com	#测试访问百度</span><br></pre></td></tr></table></figure><h2 id="win与linux免密传输文件"><a href="#win与linux免密传输文件" class="headerlink" title="win与linux免密传输文件"></a>win与linux免密传输文件</h2><h3 id="win配置"><a href="#win配置" class="headerlink" title="win配置"></a>win配置</h3><h4 id="winscp下载安装"><a href="#winscp下载安装" class="headerlink" title="winscp下载安装"></a>winscp下载安装</h4><p>官方下载地址为：<a target="_blank" rel="noopener" href="https://winscp.net/eng/download.php">https://winscp.net/eng/download.php</a></p><h4 id="Putty-免密登录"><a href="#Putty-免密登录" class="headerlink" title="Putty 免密登录"></a>Putty 免密登录</h4><h5 id="第一步-生成公钥-私钥对"><a href="#第一步-生成公钥-私钥对" class="headerlink" title="第一步 生成公钥/私钥对"></a>第一步 生成公钥/私钥对</h5><p>使用 putty 安装目录中的 puttygen.exe 工具</p><p>点击 generate –&gt; 随意移动鼠标来生成秘钥 –&gt;将公钥部分复制备用 –&gt; 点击 Save private key</p><p><img src="https://cdn.jsdelivr.net/gh/byxiaobian/CDN/images/image11/202306231234327.png" alt="img"></p><p><img src="https://cdn.jsdelivr.net/gh/byxiaobian/CDN/images/image11/202306231234493.png" alt="img"></p><p><img src="https://cdn.jsdelivr.net/gh/byxiaobian/CDN/images/image11/202306231234737.png" alt="img"></p><h5 id="第二步-将公钥添加到远程机器"><a href="#第二步-将公钥添加到远程机器" class="headerlink" title="第二步 将公钥添加到远程机器"></a>第二步 将公钥添加到远程机器</h5><p>将公钥添加到远程机器的 ~/.ssh/authorized_keys 文件 (追加到文件末尾即可)</p><p><img src="https://cdn.jsdelivr.net/gh/byxiaobian/CDN/images/image11/202306231234441.png" alt="img"></p><h3 id="linux配置"><a href="#linux配置" class="headerlink" title="linux配置"></a>linux配置</h3><h3 id="生成密钥"><a href="#生成密钥" class="headerlink" title="生成密钥"></a>生成密钥</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa <span class="comment">#生产成密钥 一路回车即可</span></span><br></pre></td></tr></table></figure><h3 id="授权"><a href="#授权" class="headerlink" title="授权"></a>授权</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /root/.ssh  <span class="comment">#ssh存放路径</span></span><br><span class="line">vim authorized_keys <span class="comment">#把远程客户端生成的公钥添加进来 或者追加进来</span></span><br></pre></td></tr></table></figure><h3 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pscp -r -i C:\\Users\\bianshujun\\.ssh\\private-key.ppk -P 22 D:\\code\\control-api\\target\\control-0.0.1-SNAPSHOT.jar  root@8.218.40.205:/usr/dev/control-api</span><br><span class="line"><span class="comment">#-r 覆盖 -i 携带生成的私钥ppk -p指定端口 本地主机目录  远程主机目录 </span></span><br></pre></td></tr></table></figure><h3 id="脚本编写"><a href="#脚本编写" class="headerlink" title="脚本编写"></a>脚本编写</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">int=1</span><br><span class="line">OLD_IFS=&quot;$IFS&quot;</span><br><span class="line">IFS=&quot; &quot; </span><br><span class="line">while(( $int&lt;=5 ))</span><br><span class="line">do</span><br><span class="line">echo &#x27;-----------------------------------------------------------------------&#x27;</span><br><span class="line">echo &#x27;输入 1 到 4 之间的数字:&#x27;</span><br><span class="line">echo &#x27;1. 部署机器人API&#x27;</span><br><span class="line">echo &#x27;2. 部署机器人Admin&#x27;</span><br><span class="line">echo &#x27;3. 部署机器人Front&#x27;</span><br><span class="line">echo &#x27;4. 部署钱包API&#x27;</span><br><span class="line">echo &#x27;5.退出&#x27;</span><br><span class="line">echo &#x27;-----------------------------------------------------------------------&#x27;</span><br><span class="line">echo &#x27;你输入的数字为:&#x27;</span><br><span class="line">read aNum</span><br><span class="line">array=($aNum)</span><br><span class="line">for var in $&#123;array[@]&#125;</span><br><span class="line">do</span><br><span class="line">   echo &quot;-------&quot;$var</span><br><span class="line">   case $var in</span><br><span class="line">     1)  echo &#x27;1.部署机器人API&#x27;</span><br><span class="line">	cd D:\\code\\control-api</span><br><span class="line">	mvn clean package</span><br><span class="line">	pscp -r -i C:\\Users\\bianshujun\\.ssh\\private-key.ppk -P 10582 D:\\code\\control-api\\target\\control-0.0.1-SNAPSHOT.jar  root@47.243.71.213:/usr/src/dev/control-api</span><br><span class="line">	ssh -p 10582 root@47.243.71.213  &quot;/usr/src/dev/control-api/admin.sh restart&quot;</span><br><span class="line">	echo &quot;部署机器人 finishe.&quot;</span><br><span class="line">    ;;</span><br><span class="line">     2)  echo &#x27;2.部署机器人Admin&#x27;</span><br><span class="line">	cd D:\\code\\control-admin\\ruoyi-admin</span><br><span class="line">	mvn clean package</span><br><span class="line">	pscp -r -i C:\\Users\\bianshujun\\.ssh\\private-key.ppk -P 10582 D:\\code\\control-admin\\ruoyi-admin\\target\\ruoyi-admin.jar  root@47.243.71.213:/usr/src/dev/control-admin</span><br><span class="line">	ssh -p 10582 root@47.243.71.213  &quot;/usr/src/dev/control-admin/admin.sh restart&quot;</span><br><span class="line">	echo &quot;部署机器人Admin finishe.&quot;</span><br><span class="line">	;;</span><br><span class="line">	 3)  echo &#x27;3.部署机器人Front&#x27;</span><br><span class="line">	cd D:\\code\\ruoyi-ui</span><br><span class="line">	npm run build:stage</span><br><span class="line">	pscp -r -i C:\\Users\\bianshujun\\.ssh\\private-key.ppk -P 10582 D:\\code\\ruoyi-ui\\dist  root@47.243.71.213:/usr/src/dev/control-front</span><br><span class="line">	echo &quot;部署机器人Front finishe.&quot;</span><br><span class="line">	;;</span><br><span class="line">	 4)  echo &#x27;4.部署钱包API&#x27;</span><br><span class="line">	cd D:\\code\\tronpay</span><br><span class="line">	mvn clean package</span><br><span class="line">	pscp -r -i C:\\Users\\bianshujun\\.ssh\\private-key.ppk -P 10582 D:\\code\\tronpay\\target\\tronpay-0.0.1-SNAPSHOT.jar  root@47.243.71.213:/usr/src/dev/tronpay</span><br><span class="line">	ssh -p 10582 root@47.243.71.213  &quot;/usr/src/dev/tronpay/admin.sh restart&quot;</span><br><span class="line">	echo &quot;钱包API finishe.&quot;</span><br><span class="line">	;;</span><br><span class="line">	 5)  echo &#x27;你选择了 4.退出&#x27;</span><br><span class="line">		exit</span><br><span class="line">    ;;</span><br><span class="line">    *)  echo &#x27;错误：&#x27;$aNum</span><br><span class="line">    ;;</span><br><span class="line">esac</span><br><span class="line">done</span><br><span class="line">done</span><br><span class="line"></span><br><span class="line">exec /bin/bash</span><br></pre></td></tr></table></figure></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者:</span> <span class="post-copyright-info"><a href="mailto:undefined">By_Xb</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接:</span> <span class="post-copyright-info"><a href="https://wtnl.xyz/2023/06/23/centos7%E5%9F%BA%E7%A1%80%E7%8E%AF%E5%A2%83%E5%A5%97%E9%A4%90/">https://wtnl.xyz/2023/06/23/centos7基础环境套餐/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明:</span> <span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://wtnl.xyz" target="_blank">By_Xb</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/CentOS7/">CentOS7</a></div><div class="post_share"><div class="social-share" data-image="https://cdn.jsdelivr.net/gh/byxiaobian/CDN/images/images1202212022008612.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload='this.media="all"'><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer="defer"></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2023/06/23/CentOS8%E5%AE%89%E8%A3%85%E5%B8%B8%E7%94%A8%E6%9C%8D%E5%8A%A1/"><img class="prev-cover" src="https://gimg2.baidu.com/image_search/src=http%3A%2F%2Finews.gtimg.com%2Fnewsapp_bt%2F0%2F13492725477%2F1000.jpg&amp;refer=http%3A%2F%2Finews.gtimg.com&amp;app=2002&amp;size=f9999,10000&amp;q=a80&amp;n=0&amp;g=0n&amp;fmt=auto?sec=1652578254&amp;t=2346d65f7a8ff37d751505d37ed72b12" onerror='onerror=null,src="/img/404.jpg"' alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">CentOS8安装nginx,mysql8,redis6</div></div></a></div><div class="next-post pull-right"><a href="/2023/06/23/Andlua%E6%88%96Aide%E4%B8%8Ec4d%E9%97%B4shell%E4%BC%A0%E5%8F%82/"><img class="next-cover" src="https://cdn.jsdelivr.net/gh/byxiaobian/CDN/images/images1202210141654190.png" onerror='onerror=null,src="/img/404.jpg"' alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Andlua或Aide与c4d间 shell调用二进制传参</div></div></a></div></nav><hr><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i> <span>评论</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://cdn.jsdelivr.net/gh/byxiaobian/CDN/images2/author.webp" onerror='this.onerror=null,this.src="/img/friend_404.gif"' alt="avatar"></div><div class="author-info__name">By_Xb</div><div class="author-info__description"></div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">72</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">标签</div><div class="length-num">33</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">分类</div><div class="length-num">8</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://byxiaobian.github.io/"><i class="fa fa-paper-plane-o"></i><span>前往主页</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>公告</span></div><div class="announcement_content"><p class="div-border blue" style="color:#000;text-align:center"><img src="https://cdn.jsdelivr.net/gh/byxiaobian/CDN/images/images5-140FGZS0.gif" style="float:left" width="25" height="25"><b>记录一些后端知识</b><img src="https://cdn.jsdelivr.net/gh/byxiaobian/CDN/images/images5-140FGZS0.gif" style="float:right" width="25" height="25"></p><p class="div-border yellow" style="color:#000;text-align:center"><img src="https://cdn.jsdelivr.net/gh/byxiaobian/CDN/images/images5-140FGZ249-51.gif" style="float:left" width="25" height="25"><b>分享一些笔记心得</b><img src="https://cdn.jsdelivr.net/gh/byxiaobian/CDN/images/images5-140FGZ249-51.gif" style="float:right" width="25" height="25"></p><p class="div-border green" style="color:#000;text-align:center"><img src="https://cdn.jsdelivr.net/gh/byxiaobian/CDN/images/images5-140FGZ250-51.gif" style="float:left" width="25" height="25"><b>吃喝吃喝吃喝吃喝</b><img src="https://cdn.jsdelivr.net/gh/byxiaobian/CDN/images/images5-140FGZ250-51.gif" style="float:right" width="25" height="25"></p></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#centos7%E5%9F%BA%E7%A1%80%E5%A5%97%E9%A4%90%E6%90%AD%E5%BB%BA"><span class="toc-text">centos7基础套餐搭建</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ssh%E9%BB%98%E8%AE%A4%E7%AB%AF%E5%8F%A3%E4%BF%AE%E6%94%B9"><span class="toc-text">ssh默认端口修改</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E6%B7%BB%E5%8A%A0ssh%E7%AB%AF%E5%8F%A3"><span class="toc-text">1.添加ssh端口</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%82%E9%85%8D%E7%BD%AE%E9%98%B2%E7%81%AB%E5%A2%99%E8%A7%84%E5%88%99"><span class="toc-text">2。配置防火墙规则</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E8%BF%9E%E6%8E%A5%E6%B5%8B%E8%AF%95"><span class="toc-text">3.连接测试</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#nginx%E9%85%8D%E7%BD%AE%E7%AF%87"><span class="toc-text">nginx配置篇</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81%E5%AE%89%E8%A3%85%E4%BE%9D%E8%B5%96"><span class="toc-text">1、安装依赖</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81%E9%85%8D%E7%BD%AEnginx%E9%95%9C%E5%83%8F%E6%BA%90"><span class="toc-text">2、配置nginx镜像源</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%E3%80%81%E5%AE%89%E8%A3%85nginx"><span class="toc-text">3、安装nginx</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4%E3%80%81%E7%AE%A1%E7%90%86nginx%E7%9B%B8%E5%85%B3%E5%91%BD%E4%BB%A4"><span class="toc-text">4、管理nginx相关命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#nginx%E7%9B%B8%E5%85%B3%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-text">nginx相关配置文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#nginx%E9%85%8D%E7%BD%AEhttps"><span class="toc-text">nginx配置https</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#jdk12%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE"><span class="toc-text">jdk12环境配置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E4%B8%8B%E8%BD%BDjdk"><span class="toc-text">1.下载jdk</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%AE%89%E8%A3%85"><span class="toc-text">2.安装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A7%A3%E5%8E%8B"><span class="toc-text">解压</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F"><span class="toc-text">配置环境变量</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%A9%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%E7%94%9F%E6%95%88"><span class="toc-text">让环境变量生效</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%AF%E5%8A%A8%EF%BC%9A"><span class="toc-text">启动：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#jar%E5%8C%85%E5%90%AF%E5%8A%A8%E8%84%9A%E6%9C%AC"><span class="toc-text">jar包启动脚本</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B8%B8%E8%A7%81%E6%8A%A5%E9%94%99"><span class="toc-text">常见报错</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E8%A3%85mysql8"><span class="toc-text">安装mysql8</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#0-%E5%88%A0%E9%99%A4MariaDB"><span class="toc-text">0. 删除MariaDB</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#0-1-%E6%A3%80%E6%9F%A5MariaDB"><span class="toc-text">0.1 检查MariaDB</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#0-2-%E5%88%A0%E9%99%A4MariaDB"><span class="toc-text">0.2 删除MariaDB</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#0-3-%E6%A3%80%E6%9F%A5MariaDB"><span class="toc-text">0.3 检查MariaDB</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E6%B7%BB%E5%8A%A0MySQL-Yum-Repository"><span class="toc-text">1. 添加MySQL Yum Repository</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-1-%E4%B8%8B%E8%BD%BDMySQL%E6%BA%90"><span class="toc-text">1.1 下载MySQL源</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-2-%E5%AE%89%E8%A3%85MySQL%E6%BA%90"><span class="toc-text">1.2 安装MySQL源</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-3-%E6%A3%80%E6%9F%A5"><span class="toc-text">1.3 检查</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%AE%89%E8%A3%85MySQL"><span class="toc-text">2. 安装MySQL</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-%E4%BD%BF%E7%94%A8yum%E5%AE%89%E8%A3%85MySQL"><span class="toc-text">2.1 使用yum安装MySQL</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8E%9F%E5%9B%A0"><span class="toc-text">原因</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95"><span class="toc-text">解决办法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-%E5%AF%BC%E5%85%A5%E6%96%B0%E7%9A%84MySQL%E5%AD%98%E5%82%A8%E5%BA%93%E7%9A%84GPG%E7%A7%98%E9%92%A5"><span class="toc-text">2.2 导入新的MySQL存储库的GPG秘钥</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-%E5%AE%89%E8%A3%85%E5%AE%8C%E6%88%90"><span class="toc-text">2.3 安装完成</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E5%90%AF%E5%8A%A8MySQL"><span class="toc-text">3. 启动MySQL</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-1-%E5%90%AF%E5%8A%A8MySQL%E6%9C%8D%E5%8A%A1"><span class="toc-text">3.1 启动MySQL服务</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-%E6%9F%A5%E7%9C%8BMySQL%E6%9C%8D%E5%8A%A1%E7%8A%B6%E6%80%81"><span class="toc-text">3.2 查看MySQL服务状态</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-3-%E5%81%9C%E6%AD%A2MySQL%E6%9C%8D%E5%8A%A1"><span class="toc-text">3.3 停止MySQL服务</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E4%BF%AE%E6%94%B9%E5%AF%86%E7%A0%81"><span class="toc-text">4. 修改密码</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#4-1-%E6%9F%A5%E7%9C%8B%E9%BB%98%E8%AE%A4%E5%AF%86%E7%A0%81"><span class="toc-text">4.1 查看默认密码</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-2-%E4%BF%AE%E6%94%B9%E5%AF%86%E7%A0%81"><span class="toc-text">4.2 修改密码</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-3-%E4%BF%AE%E6%94%B9%E5%AF%86%E7%A0%81%E8%A7%84%E8%8C%83%E7%AD%89%E7%BA%A7"><span class="toc-text">4.3 修改密码规范等级</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E8%BF%9C%E7%A8%8B%E8%AE%BF%E9%97%AE"><span class="toc-text">5.远程访问</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#5-1-%E5%88%9B%E5%BB%BA%E8%BF%9C%E7%A8%8B%E8%AE%BF%E9%97%AEroot%E7%94%A8%E6%88%B7"><span class="toc-text">5.1 创建远程访问root用户</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-2-%E4%B8%BA%E8%AF%A5%E7%94%A8%E6%88%B7%E6%8E%88%E4%BA%88%E5%85%A8%E9%83%A8%E6%9D%83%E9%99%90"><span class="toc-text">5.2 为该用户授予全部权限</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-3-%E5%BC%80%E6%94%BE%E7%AB%AF%E5%8F%A33306"><span class="toc-text">5.3 开放端口3306</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-4-%E4%BA%91%E7%AB%AF%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%BC%80%E5%90%AF%E7%AB%AF%E5%8F%A3%E5%8F%82%E8%80%83"><span class="toc-text">5.4 云端服务器开启端口参考</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-5-%E9%80%9A%E8%BF%87DataGrip%E8%BF%9C%E7%A8%8B%E8%AE%BF%E9%97%AE"><span class="toc-text">5.5 通过DataGrip远程访问</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#redis%E5%AE%89%E8%A3%85"><span class="toc-text">redis安装</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E6%9C%80%E6%96%B0%E8%BD%AF%E4%BB%B6%E6%BA%90"><span class="toc-text">安装最新软件源</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E8%BD%AF%E4%BB%B6"><span class="toc-text">安装软件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%AF%E5%8A%A8%E6%9C%8D%E5%8A%A1"><span class="toc-text">启动服务</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE"><span class="toc-text">配置</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#curl%E5%AE%89%E8%A3%85"><span class="toc-text">curl安装</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#win%E4%B8%8Elinux%E5%85%8D%E5%AF%86%E4%BC%A0%E8%BE%93%E6%96%87%E4%BB%B6"><span class="toc-text">win与linux免密传输文件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#win%E9%85%8D%E7%BD%AE"><span class="toc-text">win配置</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#winscp%E4%B8%8B%E8%BD%BD%E5%AE%89%E8%A3%85"><span class="toc-text">winscp下载安装</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Putty-%E5%85%8D%E5%AF%86%E7%99%BB%E5%BD%95"><span class="toc-text">Putty 免密登录</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E6%AD%A5-%E7%94%9F%E6%88%90%E5%85%AC%E9%92%A5-%E7%A7%81%E9%92%A5%E5%AF%B9"><span class="toc-text">第一步 生成公钥&#x2F;私钥对</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E6%AD%A5-%E5%B0%86%E5%85%AC%E9%92%A5%E6%B7%BB%E5%8A%A0%E5%88%B0%E8%BF%9C%E7%A8%8B%E6%9C%BA%E5%99%A8"><span class="toc-text">第二步 将公钥添加到远程机器</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#linux%E9%85%8D%E7%BD%AE"><span class="toc-text">linux配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%94%9F%E6%88%90%E5%AF%86%E9%92%A5"><span class="toc-text">生成密钥</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8E%88%E6%9D%83"><span class="toc-text">授权</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B5%8B%E8%AF%95"><span class="toc-text">测试</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%84%9A%E6%9C%AC%E7%BC%96%E5%86%99"><span class="toc-text">脚本编写</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2023/06/23/%E6%96%87%E7%AB%A0%E5%BC%95%E7%94%A8/" title="优秀开源框架及文章"><img src="https://cdn.jsdelivr.net/gh/byxiaobian/CDN/images/image4/hgtrgh4wt56gtw654gy5t6r.jpg" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="优秀开源框架及文章"></a><div class="content"><a class="title" href="/2023/06/23/%E6%96%87%E7%AB%A0%E5%BC%95%E7%94%A8/" title="优秀开源框架及文章">优秀开源框架及文章</a><time datetime="2023-06-23T06:47:58.943Z" title="发表于 2023-06-23 14:47:58">2023-06-23</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/06/23/%E6%91%98%E9%97%AE%E7%AC%94%E8%AE%B0%E4%B8%89/" title="摘文笔记_常用技术三"><img src="https://cdn.jsdelivr.net/gh/byxiaobian/CDN/images/image1/320" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="摘文笔记_常用技术三"></a><div class="content"><a class="title" href="/2023/06/23/%E6%91%98%E9%97%AE%E7%AC%94%E8%AE%B0%E4%B8%89/" title="摘文笔记_常用技术三">摘文笔记_常用技术三</a><time datetime="2023-06-23T06:47:58.941Z" title="发表于 2023-06-23 14:47:58">2023-06-23</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/06/23/%E6%91%98%E6%96%87%E7%AC%94%E8%AE%B0%E4%BA%8C/" title="摘文笔记_常用技术二"><img src="https://cdn.jsdelivr.net/gh/byxiaobian/CDN/images/image1/320" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="摘文笔记_常用技术二"></a><div class="content"><a class="title" href="/2023/06/23/%E6%91%98%E6%96%87%E7%AC%94%E8%AE%B0%E4%BA%8C/" title="摘文笔记_常用技术二">摘文笔记_常用技术二</a><time datetime="2023-06-23T06:47:58.940Z" title="发表于 2023-06-23 14:47:58">2023-06-23</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/06/23/%E6%91%98%E6%96%87%E7%AC%94%E8%AE%B0%E4%B8%80/" title="摘文笔记_常用技术一"><img src="https://cdn.jsdelivr.net/gh/byxiaobian/CDN/images/image1/320" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="摘文笔记_常用技术一"></a><div class="content"><a class="title" href="/2023/06/23/%E6%91%98%E6%96%87%E7%AC%94%E8%AE%B0%E4%B8%80/" title="摘文笔记_常用技术一">摘文笔记_常用技术一</a><time datetime="2023-06-23T06:47:58.937Z" title="发表于 2023-06-23 14:47:58">2023-06-23</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/06/23/%E5%BC%80%E6%BA%90%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8(%E4%B8%80)/" title="开源工具总结使用(一)"><img src="https://cdn.jsdelivr.net/gh/byxiaobian/CDN/images/image1/u=3388573831,1341912953&amp;fm=26&amp;fmt=auto&amp;gp=0.jpg" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="开源工具总结使用(一)"></a><div class="content"><a class="title" href="/2023/06/23/%E5%BC%80%E6%BA%90%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8(%E4%B8%80)/" title="开源工具总结使用(一)">开源工具总结使用(一)</a><time datetime="2023-06-23T06:47:58.935Z" title="发表于 2023-06-23 14:47:58">2023-06-23</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2016 - 2023 By_Xb</div><div class="footer_custom_text"><p><a target="_blank" href="https://hexo.io/"><img src="https://img.shields.io/badge/Frame-Hexo-blue?style=flat&logo=hexo" title="博客框架为Hexo"></a>&nbsp;<a target="_blank" href="https://demo.jerryc.me/"><img src="https://img.shields.io/badge/Theme-Butterfly-6513df?style=flat&logo=bitdefender" title="主题采用butterfly"></a>&nbsp;<a target="_blank" href="https://metroui.org.ua/index.html"><img src="https://img.shields.io/badge/CDN-jsDelivr-orange?style=flat&logo=jsDelivr" title="本站使用JsDelivr为静态资源提供CDN加速"></a> &nbsp;<a target="_blank" href="https://vercel.com/"><img src="https://img.shields.io/badge/Hosted-Vervel-brightgreen?style=flat&logo=Vercel" title="本站采用双线部署，默认线路托管于Vercel"></a>&nbsp;<a target="_blank" href="https://vercel.com/"><img src="https://img.shields.io/badge/Hosted-Coding-0cedbe?style=flat&logo=Codio" title="本站采用双线部署，联通线路托管于Coding"></a>&nbsp;<a target="_blank" href="https://github.com/"><img src="https://img.shields.io/badge/Source-Github-d021d6?style=flat&logo=GitHub" title="本站项目由Gtihub托管"></a>&nbsp;<a target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img src="https://img.shields.io/badge/Copyright-BY--NC--SA%204.0-d42328?style=flat&logo=Claris" title="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可"></a></p></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"></div></div></div><hr><div id="local-search-results"></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>(()=>{
  const $countDom = document.getElementById('twikoo-count')
  const init = () => {
    twikoo.init(Object.assign({
      el: '#twikoo-wrap',
      envId: 'https://twikoo-eosin-one.vercel.app/',
      region: ''
    }, null))
  }

  const getCount = () => {
    twikoo.getCommentsCount({
      envId: 'https://twikoo-eosin-one.vercel.app/',
      region: '',
      urls: [window.location.pathname],
      includeReply: false
    }).then(function (res) {
      $countDom.innerText = res[0].count
    }).catch(function (err) {
      console.error(err);
    });
  }

  const loadTwikoo = (bool = false) => {
    if (typeof twikoo === 'object') {
      init()
      bool && $countDom && setTimeout(getCount,0)
    } else {
      getScript('https://cdn.jsdelivr.net/npm/twikoo/dist/twikoo.all.min.js').then(()=> {
        init()
        bool && $countDom && setTimeout(getCount,0)
      })
    }
  }

  if ('Twikoo' === 'Twikoo' || !true) {
    if (true) btf.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else loadTwikoo(true)
  } else {
    window.loadOtherComment = () => {
      loadTwikoo()
    }
  }
})()</script></div><script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.5.1/jquery.min.js"></script><script defer="defer" src="https://at.alicdn.com/t/font_2100218_rqdhd0ud6wd.js?spm=a313x.7781069.1998910419.88&file=font_2100218_rqdhd0ud6wd.js"></script><script defer="defer" src="/js/icon.js"></script><script defer="defer" src="https://cdn.jsdelivr.net/npm/hexo-theme-volantis@latest/source/js/issues.min.js"></script><script defer="defer" src="https://myhkw.cn/player/js/player.js" id="myhk" key="159939764320" m="1"></script><script type="text/javascript" data-pjax src="https://unpkg.com/artitalk"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful=!0,POWERMODE.shake=!1,POWERMODE.mobile=!1,document.body.addEventListener("input",POWERMODE)</script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>let pjaxSelectors = [
  'title',
  '#config-diff',
  '#body-wrap',
  '#rightside-config-hide',
  '#rightside-config-show',
  '.js-pjax'
]

if (false) {
  pjaxSelectors.unshift('meta[property="og:image"]', 'meta[property="og:title"]', 'meta[property="og:url"]')
}

var pjax = new Pjax({
  elements: 'a:not([target="_blank"]):not([href="/shuoshuo/"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {

  // removeEventListener scroll
  window.removeEventListener('scroll', window.tocScrollFn)
  window.removeEventListener('scroll', scrollCollect)

  typeof preloader === 'object' && preloader.initLoading()

  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax], .pjax-reload script').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof chatBtnFn === 'function' && chatBtnFn()
  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // Analytics
  if (false) {
    MtaH5.pgv()
  }

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()

  typeof preloader === 'object' && preloader.endLoading()
})

document.addEventListener('pjax:error', (e) => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><div class="pjax-reload"><script async="async">for(var arr=document.getElementsByClassName("recent-post-item"),i=0;i<arr.length;i++)arr[i].classList.add("wow"),arr[i].classList.add("animate__zoomIn"),arr[i].setAttribute("data-wow-duration",""),arr[i].setAttribute("data-wow-delay",""),arr[i].setAttribute("data-wow-offset",""),arr[i].setAttribute("data-wow-iteration","")</script><script async="async">for(var arr=document.getElementsByClassName("card-widget"),i=0;i<arr.length;i++)arr[i].classList.add("wow"),arr[i].classList.add("animate__zoomIn"),arr[i].setAttribute("data-wow-duration",""),arr[i].setAttribute("data-wow-delay",""),arr[i].setAttribute("data-wow-offset",""),arr[i].setAttribute("data-wow-iteration","")</script><script async="async">for(var arr=document.getElementsByClassName("footer_custom_text"),i=0;i<arr.length;i++)arr[i].classList.add("wow"),arr[i].classList.add("animate__flipInX"),arr[i].setAttribute("data-wow-duration","3s"),arr[i].setAttribute("data-wow-delay",""),arr[i].setAttribute("data-wow-offset",""),arr[i].setAttribute("data-wow-iteration","")</script><script async="async">for(var arr=document.getElementsByClassName("article-sort-item"),i=0;i<arr.length;i++)arr[i].classList.add("wow"),arr[i].classList.add("animate__zoomIn"),arr[i].setAttribute("data-wow-duration",""),arr[i].setAttribute("data-wow-delay",""),arr[i].setAttribute("data-wow-offset",""),arr[i].setAttribute("data-wow-iteration","")</script><script async="async">for(var arr=document.getElementsByClassName("site-card"),i=0;i<arr.length;i++)arr[i].classList.add("wow"),arr[i].classList.add("animate__flipInY"),arr[i].setAttribute("data-wow-duration","3s"),arr[i].setAttribute("data-wow-delay",""),arr[i].setAttribute("data-wow-offset",""),arr[i].setAttribute("data-wow-iteration","")</script><script async="async">for(var arr=document.getElementsByClassName("category-lists"),i=0;i<arr.length;i++)arr[i].classList.add("wow"),arr[i].classList.add("animate__flipInX"),arr[i].setAttribute("data-wow-duration","3s"),arr[i].setAttribute("data-wow-delay",""),arr[i].setAttribute("data-wow-offset",""),arr[i].setAttribute("data-wow-iteration","")</script><script async="async">for(var arr=document.getElementsByClassName("tag-cloud-list is-center"),i=0;i<arr.length;i++)arr[i].classList.add("wow"),arr[i].classList.add("animate__flipInX"),arr[i].setAttribute("data-wow-duration","3s"),arr[i].setAttribute("data-wow-delay",""),arr[i].setAttribute("data-wow-offset",""),arr[i].setAttribute("data-wow-iteration","")</script><script async="async">for(var arr=document.getElementsByClassName("comment-wrap"),i=0;i<arr.length;i++)arr[i].classList.add("wow"),arr[i].classList.add("animate__slideInUp"),arr[i].setAttribute("data-wow-duration","3s"),arr[i].setAttribute("data-wow-delay",""),arr[i].setAttribute("data-wow-offset",""),arr[i].setAttribute("data-wow-iteration","")</script></div><script defer="defer" src="https://cdn.jsdelivr.net/gh/graingert/wow@1.3.0/dist/wow.min.js"></script><script defer="defer" src="/js/wow_init.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>