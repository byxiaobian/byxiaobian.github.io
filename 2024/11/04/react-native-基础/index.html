<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>react-native-åŸºç¡€ | By_Xb</title><meta name="keywords" content="react-native"><meta name="author" content="By_Xb"><meta name="copyright" content="By_Xb"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="react-native"><meta property="og:type" content="article"><meta property="og:title" content="react-native-åŸºç¡€"><meta property="og:url" content="https://wtnl.xyz/2024/11/04/react-native-%E5%9F%BA%E7%A1%80/index.html"><meta property="og:site_name" content="By_Xb"><meta property="og:description" content="react-native"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://soobsj.oss-cn-hangzhou.aliyuncs.com/images/2024-11-04/images10202205111418999.png"><meta property="article:published_time" content="2024-11-04T12:45:01.377Z"><meta property="article:modified_time" content="2024-11-05T06:12:00.387Z"><meta property="article:author" content="By_Xb"><meta property="article:tag" content="react-native"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://soobsj.oss-cn-hangzhou.aliyuncs.com/images/2024-11-04/images10202205111418999.png"><link rel="shortcut icon" href="/img/siteicon/favicon-32x32.png"><link rel="canonical" href="https://wtnl.xyz/2024/11/04/react-native-%E5%9F%BA%E7%A1%80/"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="//busuanzi.ibruce.info"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" media="print" onload='this.media="all"'><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"æ‰¾ä¸åˆ°æ‚¨æŸ¥è¯¢çš„å†…å®¹ï¼š${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: 'å¤åˆ¶æˆåŠŸ',
    error: 'å¤åˆ¶é”™è¯¯',
    noSupport: 'æµè§ˆå™¨ä¸æ”¯æŒ'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: 'åˆšåˆš',
    min: 'åˆ†é’Ÿå‰',
    hour: 'å°æ—¶å‰',
    day: 'å¤©å‰',
    month: 'ä¸ªæœˆå‰'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"ä½ å·²åˆ‡æ¢ä¸ºç¹ä½“","cht_to_chs":"ä½ å·²åˆ‡æ¢ä¸ºç®€ä½“","day_to_night":"ä½ å·²åˆ‡æ¢ä¸ºæ·±è‰²æ¨¡å¼","night_to_day":"ä½ å·²åˆ‡æ¢ä¸ºæµ…è‰²æ¨¡å¼","bgLight":"#49b1f5","bgDark":"#121212","position":"top-center"},
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: true,
  islazyload: true,
  isanchor: false
};

var saveToLocal = {
  set: function setWithExpiry(key, value, ttl) {
    const now = new Date()
    const expiryDay = ttl * 86400000
    const item = {
      value: value,
      expiry: now.getTime() + expiryDay,
}
    localStorage.setItem(key, JSON.stringify(item))
  },

  get: function getWithExpiry(key) {
    const itemStr = localStorage.getItem(key)

    if (!itemStr) {
      return undefined
    }
    const item = JSON.parse(itemStr)
    const now = new Date()

    if (now.getTime() > item.expiry) {
      localStorage.removeItem(key)
      return undefined
    }
    return item.value
  }
}

// https://stackoverflow.com/questions/16839698/jquery-getscript-alternative-in-native-javascript
const getScript = url => new Promise((resolve, reject) => {
  const script = document.createElement('script')
  script.src = url
  script.async = true
  script.onerror = reject
  script.onload = script.onreadystatechange = function() {
    const loadState = this.readyState
    if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
    script.onload = script.onreadystatechange = null
    resolve()
  }
  document.head.appendChild(script)
})</script><script id="config-diff">var GLOBAL_CONFIG_SITE={title:"react-native-åŸºç¡€",isPost:!0,isHome:!1,isHighlightShrink:!1,isToc:!0,postUpdate:"2024-11-05 14:12:00"}</script><noscript><style type="text/css">#nav{opacity:1}.justified-gallery img{opacity:1}#post-meta time,#recent-posts time{display:inline!important}</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if (GLOBAL_CONFIG_SITE.isHome && /iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    document.addEventListener('pjax:complete', detectApple)})(window)</script><link defer="defer" rel="stylesheet" href="https://cdn.jsdelivr.net/gh/byxiaobian/CDN/css/extrastyle.css" media="defer" onload='this.media="all"'><link async rel="stylesheet" href="/css/foter.css" media="defer" onload='this.media="all"'><link async rel="stylesheet" href="/css/myblog.css" media="defer" onload='this.media="all"'><link rel="stylesheet" href="https://soobsj.oss-cn-hangzhou.aliyuncs.com/css/loading_style_1.css"><link rel="stylesheet" href="https://soobsj.oss-cn-hangzhou.aliyuncs.com/css/loading_style_2.css"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiperstyle.css" media="print" onload='this.media="all"'><meta name="generator" content="Hexo 5.4.2"><link rel="alternate" href="/atom.xml" title="By_Xb" type="application/atom+xml"></head><body><div id="loader"><div class="outer_box"><div class="loader_overlay"></div><div class="loader_cogs"><div class="loader_cogs__top"><div class="top_part"></div><div class="top_part"></div><div class="top_part"></div><div class="top_hole"></div></div><div class="loader_cogs__left"><div class="left_part"></div><div class="left_part"></div><div class="left_part"></div><div class="left_hole"></div></div><div class="loader_cogs__bottom"><div class="bottom_part"></div><div class="bottom_part"></div><div class="bottom_part"></div><div class="bottom_hole"></div></div><p style="text-align:center">&nbsp;&nbsp;&nbsp;loading...</p></div></div></div><script>var endLoading=function(){document.body.style.overflow="auto",document.getElementById("loader").classList.add("loading")};window.addEventListener("load",endLoading)</script><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://soobsj.oss-cn-hangzhou.aliyuncs.com/images/202411050018773.webp" onerror='onerror=null,src="/img/friend_404.gif"' alt="avatar"></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">87</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">35</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">6</div></a></div></div></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i> <span>é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i> <span>æ—¶é—´è½´</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i> <span>æ ‡ç­¾</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i> <span>åˆ†ç±»</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fa fa-heartbeat"></i> <span>æ¸…å•</span><i class="fas fa-chevron-down expand hide"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/bangumis/"><i class="fa-fw fa fa-spinner"></i> <span>è¿½ç•ª</span></a></li><li><a class="site-page child" href="/gallery/index.htm"><i class="fa-fw fas fa-images"></i> <span>ç›¸å†Œ</span></a></li><li><a class="site-page child" href="/shuoshuo/"><i class="fa-fw fa fa-cloud"></i> <span>åŠ¨æ€</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i> <span>å‹é“¾</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i> <span>å…³äº</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image:url(https://soobsj.oss-cn-hangzhou.aliyuncs.com/images/2024-11-04/images10202205111418999.png)"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">By_Xb</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i> <span>æœç´¢</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i> <span>é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i> <span>æ—¶é—´è½´</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i> <span>æ ‡ç­¾</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i> <span>åˆ†ç±»</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fa fa-heartbeat"></i> <span>æ¸…å•</span><i class="fas fa-chevron-down expand hide"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/bangumis/"><i class="fa-fw fa fa-spinner"></i> <span>è¿½ç•ª</span></a></li><li><a class="site-page child" href="/gallery/index.htm"><i class="fa-fw fas fa-images"></i> <span>ç›¸å†Œ</span></a></li><li><a class="site-page child" href="/shuoshuo/"><i class="fa-fw fa fa-cloud"></i> <span>åŠ¨æ€</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i> <span>å‹é“¾</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i> <span>å…³äº</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">react-native-åŸºç¡€</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">å‘è¡¨äº</span><time class="post-meta-date-created" datetime="2024-11-04T12:45:01.377Z" title="å‘è¡¨äº 2024-11-04 20:45:01">2024-11-04</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">æ›´æ–°äº</span><time class="post-meta-date-updated" datetime="2024-11-05T06:12:00.387Z" title="æ›´æ–°äº 2024-11-05 14:12:00">2024-11-05</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%F0%9F%93%99-%E5%89%8D%E7%AB%AF-%E7%9B%B8%E5%85%B3/">ğŸ“™ å‰ç«¯-ç›¸å…³</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">å­—æ•°æ€»è®¡:</span><span class="word-count">11.6k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">é˜…è¯»æ—¶é•¿:</span><span>47åˆ†é’Ÿ</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="react-native-åŸºç¡€"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">é˜…è¯»é‡:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="React-native-åŸºç¡€"><a href="#React-native-åŸºç¡€" class="headerlink" title=" React-native - åŸºç¡€"></a> <a target="_blank" rel="noopener" href="https://reactnative.cn/">React-native - åŸºç¡€</a></h1><p>ä¸»è¦è®²è§£ä»¥ä¸‹Reactçš„åŸºç¡€çŸ¥è¯†,æ–¹ä¾¿åŒå­¦ä»¬æ›´å¥½çš„å­¦ä¹ é¡¹ç›®çš„çŸ¥è¯†ã€‚</p><ul><li>React Native ä»‹ç»</li><li>æ–‡ä»¶ç›®å½•ç»“æ„</li><li>JSX</li><li>RNæ ·å¼</li><li>åŸºæœ¬æ ‡ç­¾</li><li>æ’å€¼è¡¨è¾¾å¼</li><li>è°ƒè¯•</li><li>äº‹ä»¶</li><li>ç”Ÿå‘½å‘¨æœŸ</li><li>mobx</li></ul><h2 id="React-Native-ä»‹ç»"><a href="#React-Native-ä»‹ç»" class="headerlink" title="React Native ä»‹ç»"></a><a target="_blank" rel="noopener" href="https://baike.baidu.com/item/react%20native/20307162?fr=aladdin">React Native ä»‹ç»</a></h2><p><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://soobsj.oss-cn-hangzhou.aliyuncs.com/images/2024-11-04/images10202205111419239.png" alt="image-20200526120559183"></p><h2 id="æ–‡ä»¶ç›®å½•ç»“æ„"><a href="#æ–‡ä»¶ç›®å½•ç»“æ„" class="headerlink" title="æ–‡ä»¶ç›®å½•ç»“æ„"></a>æ–‡ä»¶ç›®å½•ç»“æ„</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">â”‚  <span class="title class_">App</span>.<span class="property">js</span>           ---   é¡¹ç›®çš„æ ¹ç»„ä»¶</span><br><span class="line">â”‚  index.<span class="property">js</span>         ---   é¡¹ç›®çš„å…¥å£æ–‡ä»¶     </span><br><span class="line">â”‚  package.<span class="property">json</span>     ---   é¡¹ç›®çš„æè¿°æ–‡ä»¶         </span><br><span class="line">â”‚  .<span class="property">eslintrc</span>.<span class="property">js</span>     ---   eslintçš„é…ç½®æ–‡ä»¶            </span><br><span class="line">â”‚  .<span class="property">prettierrc</span>.<span class="property">js</span>   ---   æ ¼å¼åŒ–é…ç½®æ–‡ä»¶             </span><br><span class="line">â”‚  android          ---   ç¼–è¯‘å®‰å“ç›¸å…³       </span><br><span class="line">â”‚  ios              ---   ç¼–è¯‘iosç›¸å…³</span><br></pre></td></tr></table></figure><h3 id="è€å¸ˆçš„vs-codeçš„æ’ä»¶"><a href="#è€å¸ˆçš„vs-codeçš„æ’ä»¶" class="headerlink" title="è€å¸ˆçš„vs codeçš„æ’ä»¶"></a>è€å¸ˆçš„vs codeçš„æ’ä»¶</h3><p><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://soobsj.oss-cn-hangzhou.aliyuncs.com/images/2024-11-04/images10202205111419743.png" alt="image-20200526173035552"></p><h2 id="JSX"><a href="#JSX" class="headerlink" title="JSX"></a>JSX</h2><blockquote><p>Reactä¸­å†™ç»„ä»¶çš„ä»£ç æ ¼å¼ å…¨ç§°æ˜¯ <code>JavaScript xml</code></p></blockquote><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">View</span>, <span class="title class_">Text</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;react-native&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">Index</span> = (<span class="params"></span>) =&gt; <span class="language-xml"><span class="tag">&lt;<span class="name">View</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">Text</span>&gt;</span>JSX<span class="tag">&lt;/<span class="name">Text</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">View</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Index</span>;</span><br></pre></td></tr></table></figure><h2 id="RNæ ·å¼"><a href="#RNæ ·å¼" class="headerlink" title="RNæ ·å¼"></a>RNæ ·å¼</h2><blockquote><p>ä¸»è¦è®²è§£å’Œwebå¼€å‘çš„ä¸åŒä¹‹å¤„</p></blockquote><ul><li>flexå¸ƒå±€</li><li>æ ·å¼ç»§æ‰¿</li><li>å•ä½</li><li>å±å¹•å®½åº¦å’Œé«˜åº¦</li><li>å˜æ¢</li></ul><h3 id="flexå¸ƒå±€"><a href="#flexå¸ƒå±€" class="headerlink" title="flexå¸ƒå±€"></a>flexå¸ƒå±€</h3><ul><li>æ‰€æœ‰å®¹å™¨é»˜è®¤éƒ½æ˜¯<code>flexbox</code></li><li>å¹¶ä¸”æ˜¯çºµå‘æ’åˆ— ä¹Ÿå°±æ˜¯ <code>flex-direction:column</code></li></ul><h3 id="æ ·å¼ç»§æ‰¿ä¸ä½¿ç”¨"><a href="#æ ·å¼ç»§æ‰¿ä¸ä½¿ç”¨" class="headerlink" title="æ ·å¼ç»§æ‰¿ä¸ä½¿ç”¨"></a>æ ·å¼ç»§æ‰¿ä¸ä½¿ç”¨</h3><h4 id="æ ·å¼ç»§æ‰¿"><a href="#æ ·å¼ç»§æ‰¿" class="headerlink" title="æ ·å¼ç»§æ‰¿"></a>æ ·å¼ç»§æ‰¿</h4><p>èƒŒæ™¯é¢œè‰²ã€å­—ä½“é¢œè‰²ã€å­—ä½“å¤§å°ç­‰æ²¡æœ‰ç»§æ‰¿</p><h3 id="å•ä½"><a href="#å•ä½" class="headerlink" title="å•ä½"></a>å•ä½</h3><ul><li>ä¸èƒ½åŠ  <code>px</code> å•ä½</li><li>ä¸èƒ½åŠ  <code>vw vh</code> ç­‰å•ä½</li><li>å¯ä»¥åŠ ç™¾åˆ†æ¯”å•ä½</li></ul><h3 id="å±å¹•å®½åº¦å’Œé«˜åº¦"><a href="#å±å¹•å®½åº¦å’Œé«˜åº¦" class="headerlink" title="å±å¹•å®½åº¦å’Œé«˜åº¦"></a><a target="_blank" rel="noopener" href="https://reactnative.cn/docs/dimensions#__docusaurus">å±å¹•å®½åº¦å’Œé«˜åº¦</a></h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;<span class="title class_">Dimensions</span> &#125; <span class="keyword">from</span> <span class="string">&quot;react-native&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> screenWidth = <span class="title class_">Math</span>.<span class="title function_">round</span>(<span class="title class_">Dimensions</span>.<span class="title function_">get</span>(<span class="string">&#x27;window&#x27;</span>).<span class="property">width</span>);</span><br><span class="line"><span class="keyword">const</span> screenHeight = <span class="title class_">Math</span>.<span class="title function_">round</span>(<span class="title class_">Dimensions</span>.<span class="title function_">get</span>(<span class="string">&#x27;window&#x27;</span>).<span class="property">height</span>);</span><br></pre></td></tr></table></figure><h3 id="å˜æ¢"><a href="#å˜æ¢" class="headerlink" title="å˜æ¢"></a>å˜æ¢</h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="title class_">Text</span> style=&#123;&#123;<span class="attr">transform</span>:[&#123;<span class="attr">translateY</span>:<span class="number">300</span>&#125;,&#123;<span class="attr">scale</span>:<span class="number">2</span>&#125;]&#125;&#125;&gt;å˜æ¢&lt;/<span class="title class_">Text</span>&gt;</span><br></pre></td></tr></table></figure><h4 id="ä½¿ç”¨æ ·å¼"><a href="#ä½¿ç”¨æ ·å¼" class="headerlink" title="ä½¿ç”¨æ ·å¼"></a>ä½¿ç”¨æ ·å¼</h4><h5 id="ç¬¬ä¸€ç§ï¼šç›´æ¥ä½¿ç”¨"><a href="#ç¬¬ä¸€ç§ï¼šç›´æ¥ä½¿ç”¨" class="headerlink" title="ç¬¬ä¸€ç§ï¼šç›´æ¥ä½¿ç”¨"></a>ç¬¬ä¸€ç§ï¼šç›´æ¥ä½¿ç”¨</h5><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å¯¹è±¡æ–¹å¼</span></span><br><span class="line">&lt;<span class="title class_">View</span> style=&#123;&#123;<span class="attr">width</span>:<span class="number">20</span>,<span class="attr">height</span>:<span class="number">30</span>&#125;&#125;&gt;&lt;/<span class="title class_">View</span>&gt;</span><br><span class="line"><span class="comment">//æ•°ç»„æ–¹å¼</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">View</span> <span class="attr">style</span>=<span class="string">&#123;[&#123;width:20,height:30&#125;,&#123;height:20&#125;]&#125;</span>&gt;</span><span class="tag">&lt;/<span class="name">View</span>&gt;</span></span></span><br></pre></td></tr></table></figure><h5 id="ç¬¬äºŒç§ï¼šå…¬å…±ä½¿ç”¨"><a href="#ç¬¬äºŒç§ï¼šå…¬å…±ä½¿ç”¨" class="headerlink" title="ç¬¬äºŒç§ï¼šå…¬å…±ä½¿ç”¨"></a>ç¬¬äºŒç§ï¼šå…¬å…±ä½¿ç”¨</h5><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å¯¹è±¡æ–¹å¼</span></span><br><span class="line">&lt;<span class="title class_">View</span> style=&#123;styles.<span class="property">moduleStyle</span>&#125;&gt;&lt;/<span class="title class_">View</span>&gt;</span><br><span class="line"><span class="comment">//æ•°ç»„æ–¹å¼</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">View</span> <span class="attr">style</span>=<span class="string">&#123;[styles.moduleStyle,&#123;height:20&#125;]&#125;</span>&gt;</span><span class="tag">&lt;/<span class="name">View</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//æŠ½å–çš„å…¬å…±éƒ¨åˆ†</span></span><br><span class="line"><span class="keyword">const</span> styles = <span class="title class_">StyleSheet</span>.<span class="title function_">create</span>(&#123;</span><br><span class="line">    <span class="attr">moduleStyle</span>: &#123;</span><br><span class="line">        <span class="attr">width</span>: <span class="title function_">pTd</span>(<span class="number">305</span>),</span><br><span class="line">        <span class="attr">height</span>: <span class="title function_">pTd</span>(<span class="number">201</span>),</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h5 id="å±å¹•æ¯”ä¾‹è½¬æ¢å·¥å…·ç±»"><a href="#å±å¹•æ¯”ä¾‹è½¬æ¢å·¥å…·ç±»" class="headerlink" title="å±å¹•æ¯”ä¾‹è½¬æ¢å·¥å…·ç±»"></a>å±å¹•æ¯”ä¾‹è½¬æ¢å·¥å…·ç±»</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ›å»ºæ–‡ä»¶ size.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Dimensions</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;react-native&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> deviceWidthDp = <span class="title class_">Dimensions</span>.<span class="title function_">get</span>(<span class="string">&#x27;window&#x27;</span>).<span class="property">width</span>;</span><br><span class="line"><span class="keyword">const</span> deviceHeightDp = <span class="title class_">Dimensions</span>.<span class="title function_">get</span>(<span class="string">&#x27;window&#x27;</span>).<span class="property">height</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;deviceWidthDp&#x27;</span>, deviceWidthDp, deviceHeightDp);</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿™é‡Œçš„uiWidthPx   uiHeightPx  æ˜¯ä½ çš„è®¾è®¡ç¨¿çš„å®½é«˜å°ºå¯¸</span></span><br><span class="line"><span class="keyword">let</span> uiWidthPx = <span class="number">1280</span>;</span><br><span class="line"><span class="keyword">let</span> uiHeightPx = <span class="number">800</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;è½¬åŒ–æ¯”ç‡------&#x27;</span>, deviceWidthDp / uiWidthPx);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¦‚æœåº”ç”¨æ˜¯æ¨ªå±çš„ç”¨pTd</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">pTd</span> = uiElePx =&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> (uiElePx * deviceHeightDp) / uiHeightPx;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¦‚æœåº”ç”¨æ˜¯ç«–å±çš„ç”¨pTx</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">pTx</span> = uiElePx =&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> (uiElePx * deviceWidthDp) / uiWidthPx;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h6 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h6><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å¯¼å…¥</span></span><br><span class="line"><span class="keyword">import</span> &#123;pTd&#125; <span class="keyword">from</span> <span class="string">&quot;../../utils/ratio&quot;</span>;</span><br><span class="line"><span class="comment">//è°ƒç”¨ä½¿ç”¨</span></span><br><span class="line"><span class="title function_">pTx</span>(<span class="number">20</span>)</span><br></pre></td></tr></table></figure><h2 id="æ ‡ç­¾"><a href="#æ ‡ç­¾" class="headerlink" title="æ ‡ç­¾"></a><a target="_blank" rel="noopener" href="https://reactnative.cn/docs/activityindicator">æ ‡ç­¾</a></h2><ol><li><p>View</p></li><li><p>Text</p></li><li><p>TouchableOpacity</p></li><li><p>Image</p></li><li><p>ImageBackground</p></li><li><p>TextInput</p></li><li><p>å…¶ä»–</p><ol><li>button</li><li>FlatList</li><li>ScrollView</li><li>StatusBar</li><li>TextInput</li></ol></li></ol><h3 id="View"><a href="#View" class="headerlink" title="View"></a>View</h3><ul><li>ç›¸å½“äºä»¥å‰<code>web</code>ä¸­çš„div</li><li>ä¸æ”¯æŒè®¾ç½®å­—ä½“å¤§å°,å­—ä½“é¢œè‰²ç­‰</li><li>ä¸èƒ½ç›´æ¥æ”¾æ–‡æœ¬å†…å®¹</li><li>ä¸æ”¯æŒç›´æ¥ç»‘å®šç‚¹å‡»äº‹ä»¶ (ä¸€èˆ¬ä½¿ç”¨ <code>TouchableOpacity</code> æ¥ä»£æ›¿)</li></ul><h3 id="Text"><a href="#Text" class="headerlink" title="Text"></a>Text</h3><blockquote><p>æ–‡æœ¬æ ‡ç­¾</p></blockquote><ul><li>æ–‡æœ¬æ ‡ç­¾ å¯ä»¥è®¾ç½®å­—ä½“é¢œè‰²ã€å¤§å°ç­‰</li><li>æ”¯æŒç»‘å®šç‚¹å‡»äº‹ä»¶</li></ul><h3 id="TouchableOpacity"><a href="#TouchableOpacity" class="headerlink" title="TouchableOpacity"></a>TouchableOpacity</h3><blockquote><p>å¯ä»¥ç»‘å®šç‚¹å‡»äº‹ä»¶çš„å—çº§æ ‡ç­¾</p></blockquote><ul><li>ç›¸å½“äºå—çº§çš„å®¹å™¨</li><li>æ”¯æŒç»‘å®šç‚¹å‡»äº‹ä»¶ <code>onPress</code></li><li>å¯ä»¥è®¾ç½®ç‚¹å‡»æ—¶çš„é€æ˜åº¦</li></ul><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="title class_">TouchableOpacity</span>  activeOpacity=&#123;<span class="number">0.5</span>&#125;  onPress=&#123;<span class="variable language_">this</span>.<span class="property">handleOnPress</span>&#125; &gt;&lt;/<span class="title class_">TouchableOpacity</span>&gt;</span><br></pre></td></tr></table></figure><h3 id="Image"><a href="#Image" class="headerlink" title="Image"></a>Image</h3><blockquote><p>å›¾ç‰‡æ ‡ç­¾</p></blockquote><ul><li><p>æ¸²æŸ“æœ¬åœ°å›¾ç‰‡æ—¶</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="title class_">Image</span> source=&#123;<span class="built_in">require</span>(<span class="string">&quot;../girl.png&quot;</span>)&#125;  /&gt;</span><br></pre></td></tr></table></figure></li><li><p>æ¸²æŸ“ç½‘ç»œå›¾ç‰‡æ—¶,å¿…é¡»åŠ å…¥å®½åº¦å’Œé«˜åº¦</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="title class_">Image</span> source=&#123;&#123;<span class="attr">uri</span>:<span class="string">&quot;https://timgsa.baidu.com/timg?image&amp;quality=80&amp;size=b9999_10000&amp;sec=1590514654506&amp;di=38fa919d4c78fb776536b922bb94eec3&amp;imgtype=0&amp;src=http%3A%2F%2Fimages.ali213.net%2Fpicfile%2Fpic%2F2013%2F03%2F28%2F927_xgzwl%2520%25281%2529.jpg&quot;</span>&#125;&#125; style=&#123;&#123;<span class="attr">width</span>:<span class="number">200</span>,<span class="attr">height</span>:<span class="number">300</span>&#125;&#125;  /&gt;</span><br></pre></td></tr></table></figure></li><li><p>åœ¨ Android ä¸Šæ”¯æŒ GIF å’Œ WebP æ ¼å¼å›¾ç‰‡</p><p>é»˜è®¤æƒ…å†µä¸‹ Android æ˜¯ä¸æ”¯æŒ GIF å’Œ WebP æ ¼å¼çš„ã€‚ä½ éœ€è¦åœ¨<code>android/app/build.gradle</code>æ–‡ä»¶ä¸­æ ¹æ®éœ€è¦æ‰‹åŠ¨æ·»åŠ ä»¥ä¸‹æ¨¡å—ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">dependencies &#123;</span><br><span class="line">  <span class="comment">// å¦‚æœä½ éœ€è¦æ”¯æŒAndroid4.0(API level 14)ä¹‹å‰çš„ç‰ˆæœ¬</span></span><br><span class="line">  implementation <span class="string">&#x27;com.facebook.fresco:animated-base-support:1.3.0&#x27;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// å¦‚æœä½ éœ€è¦æ”¯æŒGIFåŠ¨å›¾</span></span><br><span class="line">  implementation <span class="string">&#x27;com.facebook.fresco:animated-gif:2.0.0&#x27;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// å¦‚æœä½ éœ€è¦æ”¯æŒWebPæ ¼å¼ï¼ŒåŒ…æ‹¬WebPåŠ¨å›¾</span></span><br><span class="line">  implementation <span class="string">&#x27;com.facebook.fresco:animated-webp:2.1.0&#x27;</span></span><br><span class="line">  implementation <span class="string">&#x27;com.facebook.fresco:webpsupport:2.0.0&#x27;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// å¦‚æœåªéœ€è¦æ”¯æŒWebPæ ¼å¼è€Œä¸éœ€è¦åŠ¨å›¾</span></span><br><span class="line">  implementation <span class="string">&#x27;com.facebook.fresco:webpsupport:2.0.0&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h3 id="ImageBackground"><a href="#ImageBackground" class="headerlink" title="ImageBackground"></a>ImageBackground</h3><blockquote><p>ä¸€ä¸ªå¯ä»¥ä½¿ç”¨å›¾ç‰‡å½“ä½œèƒŒæ™¯çš„å®¹å™¨,ç›¸å½“äºä»¥å‰çš„ <code>div+èƒŒæ™¯å›¾ç‰‡</code></p></blockquote><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="title class_">ImageBackground</span> source=&#123;...&#125; style=&#123;&#123;<span class="attr">width</span>: <span class="string">&#x27;100%&#x27;</span>, <span class="attr">height</span>: <span class="string">&#x27;100%&#x27;</span>&#125;&#125;&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">Text</span>&gt;</span>Inside<span class="tag">&lt;/<span class="name">Text</span>&gt;</span></span></span><br><span class="line">&lt;/<span class="title class_">ImageBackground</span>&gt;</span><br></pre></td></tr></table></figure><h3 id="TextInput"><a href="#TextInput" class="headerlink" title="TextInput"></a>TextInput</h3><blockquote><p>è¾“å…¥æ¡†ç»„ä»¶</p></blockquote><ul><li>å¯ä»¥é€šè¿‡ <code>onChangeText</code>äº‹ä»¶æ¥è·å–è¾“å…¥æ¡†çš„å€¼</li></ul><h2 id="è¯­æ³•"><a href="#è¯­æ³•" class="headerlink" title="è¯­æ³•"></a>è¯­æ³•</h2><ol><li><p>æ’å€¼è¡¨è¾¾å¼</p></li><li><p>ç»„ä»¶</p></li><li><p>çŠ¶æ€ state</p></li><li><p>å±æ€§ props</p></li><li><p>è°ƒè¯•</p></li><li><p>äº‹ä»¶</p></li><li><p>ç”Ÿå‘½å‘¨æœŸ</p></li></ol><h3 id="æ’å€¼è¡¨è¾¾å¼"><a href="#æ’å€¼è¡¨è¾¾å¼" class="headerlink" title="æ’å€¼è¡¨è¾¾å¼"></a>æ’å€¼è¡¨è¾¾å¼</h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">View</span>, <span class="title class_">Text</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;react-native&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">Index</span> = (<span class="params"></span>) =&gt; <span class="language-xml"><span class="tag">&lt;<span class="name">View</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">Text</span>&gt;</span>&#123;&quot;å¼€å¿ƒ&quot;&#125;<span class="tag">&lt;/<span class="name">Text</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">Text</span>&gt;</span>&#123;123&#125;<span class="tag">&lt;/<span class="name">Text</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">View</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Index</span>;</span><br></pre></td></tr></table></figure><h3 id="ç»„ä»¶"><a href="#ç»„ä»¶" class="headerlink" title="ç»„ä»¶"></a>ç»„ä»¶</h3><ul><li>å‡½æ•°ç»„ä»¶<ul><li>æ²¡æœ‰state (é€šè¿‡hookså¯ä»¥æœ‰)</li><li>æ²¡æœ‰ç”Ÿå‘½å‘¨æœŸ(é€šè¿‡hookså¯ä»¥æœ‰)</li><li>é€‚åˆç®€å•çš„åœºæ™¯</li></ul></li><li>ç±»ç»„ä»¶<ul><li>é€‚åˆå¤æ‚çš„åœºæ™¯</li><li>æœ‰state</li><li>æœ‰ç”Ÿå‘½å‘¨æœŸ</li></ul></li></ul><h4 id="å‡½æ•°ç»„ä»¶"><a href="#å‡½æ•°ç»„ä»¶" class="headerlink" title="å‡½æ•°ç»„ä»¶"></a>å‡½æ•°ç»„ä»¶</h4><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Index</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Component</span> &#123;</span><br><span class="line">  <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      <span class="language-xml"><span class="tag">&lt;<span class="name">View</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Btn</span>&gt;</span><span class="tag">&lt;/<span class="name">Btn</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">View</span>&gt;</span></span></span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å‡½æ•°ç»„ä»¶</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">Btn</span> = (<span class="params"></span>) =&gt; <span class="language-xml"><span class="tag">&lt;<span class="name">Button</span> <span class="attr">title</span>=<span class="string">&quot;ç‚¹æˆ‘&quot;</span> /&gt;</span></span></span><br></pre></td></tr></table></figure><h4 id="ç±»ç»„ä»¶"><a href="#ç±»ç»„ä»¶" class="headerlink" title="ç±»ç»„ä»¶"></a>ç±»ç»„ä»¶</h4><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; <span class="title class_">Component</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">View</span>, <span class="title class_">Text</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;react-native&#x27;</span>;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Index</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Component</span> &#123;</span><br><span class="line">  <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      <span class="language-xml"><span class="tag">&lt;<span class="name">View</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Text</span>&gt;</span>ç±»ç»„ä»¶<span class="tag">&lt;/<span class="name">Text</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">View</span>&gt;</span></span></span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Index</span>;</span><br></pre></td></tr></table></figure><h3 id="çŠ¶æ€-state"><a href="#çŠ¶æ€-state" class="headerlink" title="çŠ¶æ€ state"></a>çŠ¶æ€ state</h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; <span class="title class_">Component</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">View</span>, <span class="title class_">Text</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;react-native&#x27;</span>;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Index</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Component</span> &#123;</span><br><span class="line">  <span class="comment">// 1 å£°æ˜state</span></span><br><span class="line">  state = &#123;</span><br><span class="line">    <span class="attr">num</span>: <span class="number">100</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      <span class="language-xml"><span class="tag">&lt;<span class="name">View</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;/* 2 ä½¿ç”¨state */&#125;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Text</span> <span class="attr">onPress</span>=<span class="string">&#123;this.handlePress&#125;</span> &gt;</span>&#123;this.state.num&#125;<span class="tag">&lt;/<span class="name">Text</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">View</span>&gt;</span></span></span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 3 ä¿®æ”¹state</span></span><br><span class="line">  handlePress = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123; <span class="attr">num</span>: <span class="number">1010</span> &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Index</span>;</span><br></pre></td></tr></table></figure><h3 id="å±æ€§-props"><a href="#å±æ€§-props" class="headerlink" title="å±æ€§ props"></a>å±æ€§ props</h3><blockquote><p>çˆ¶å­ä¼ é€’æ•°æ®çš„å…³é”®</p></blockquote><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; <span class="title class_">Component</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">View</span>, <span class="title class_">Text</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;react-native&#x27;</span>;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Index</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Component</span> &#123;</span><br><span class="line">  <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      <span class="language-xml"><span class="tag">&lt;<span class="name">View</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">BigText</span> <span class="attr">fontColor</span>=<span class="string">&quot;red&quot;</span> &gt;</span>å¤§åšå¦<span class="tag">&lt;/<span class="name">BigText</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">View</span>&gt;</span></span></span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">BigText</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Component</span> &#123;</span><br><span class="line">  <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// é€šè¿‡propsæ¥æ¥æ”¶çˆ¶ç»„ä»¶ä¼ é€’çš„æ•°æ®</span></span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">Text</span> <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">color:</span> <span class="attr">this.props.fontColor</span> &#125;&#125; &gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;/*  children å…¶å®å°±æ˜¯æ’æ§½ ç±»ä¼¼vueä¸­çš„slot  */&#125;</span></span><br><span class="line"><span class="language-xml">      &#123;this.props.children&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">Text</span>&gt;</span></span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Index</span>;</span><br></pre></td></tr></table></figure><h3 id="äº‹ä»¶"><a href="#äº‹ä»¶" class="headerlink" title="äº‹ä»¶"></a>äº‹ä»¶</h3><h4 id="ç»‘å®šæ—¶é—´éœ€è¦ç‰¹åˆ«æ³¨æ„-thisçš„æŒ‡å‘é—®é¢˜-å¯ä»¥æ€»ç»“ä¸ºå¦‚ä¸‹çš„æ–¹å¼"><a href="#ç»‘å®šæ—¶é—´éœ€è¦ç‰¹åˆ«æ³¨æ„-thisçš„æŒ‡å‘é—®é¢˜-å¯ä»¥æ€»ç»“ä¸ºå¦‚ä¸‹çš„æ–¹å¼" class="headerlink" title="ç»‘å®šæ—¶é—´éœ€è¦ç‰¹åˆ«æ³¨æ„ thisçš„æŒ‡å‘é—®é¢˜,å¯ä»¥æ€»ç»“ä¸ºå¦‚ä¸‹çš„æ–¹å¼"></a>ç»‘å®šæ—¶é—´éœ€è¦ç‰¹åˆ«æ³¨æ„ thisçš„æŒ‡å‘é—®é¢˜,å¯ä»¥æ€»ç»“ä¸ºå¦‚ä¸‹çš„æ–¹å¼</h4><ul><li>ä½¿ç”¨ç®­å¤´å‡½æ•°</li><li>é€šè¿‡bindé‡æ–°ç»‘å®šthis</li><li>åŒ¿åå‡½æ•°</li></ul><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; <span class="title class_">Component</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">View</span>, <span class="title class_">Text</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;react-native&#x27;</span>;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Index</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Component</span> &#123;</span><br><span class="line">  state = &#123; <span class="attr">num</span>: <span class="number">100</span> &#125;</span><br><span class="line">  <span class="comment">// ä¸¢å¤± state</span></span><br><span class="line">  <span class="title function_">handlePress1</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">state</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// æ­£å¸¸</span></span><br><span class="line">  handlePress2 = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">state</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// æ­£å¸¸</span></span><br><span class="line">  <span class="title function_">handlePress3</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">state</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// æ­£å¸¸</span></span><br><span class="line">  <span class="title function_">handlePress4</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">state</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// æ­£å¸¸</span></span><br><span class="line">  <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      <span class="language-xml"><span class="tag">&lt;<span class="name">View</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;/* å¯¼è‡´äº‹ä»¶å‡½æ•°ä¸­è·å–ä¸åˆ°state */&#125;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Text</span> <span class="attr">onPress</span>=<span class="string">&#123;this.handlePress1&#125;</span> &gt;</span>äº‹ä»¶1<span class="tag">&lt;/<span class="name">Text</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;/* æ­£å¸¸ */&#125;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Text</span> <span class="attr">onPress</span>=<span class="string">&#123;this.handlePress2&#125;</span> &gt;</span>äº‹ä»¶1<span class="tag">&lt;/<span class="name">Text</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;/* æ­£å¸¸ */&#125;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Text</span> <span class="attr">onPress</span>=<span class="string">&#123;this.handlePress3.bind(this)&#125;</span> &gt;</span>äº‹ä»¶3<span class="tag">&lt;/<span class="name">Text</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;/* æ­£å¸¸ */&#125;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Text</span> <span class="attr">onPress</span>=<span class="string">&#123;()</span> =&gt;</span> this.handlePress4()&#125; &gt;äº‹ä»¶4<span class="tag">&lt;/<span class="name">Text</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">View</span>&gt;</span></span></span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Index</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h4><h5 id="classäº‹ä»¶ä¼ å‚"><a href="#classäº‹ä»¶ä¼ å‚" class="headerlink" title="classäº‹ä»¶ä¼ å‚"></a>classäº‹ä»¶ä¼ å‚</h5><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å®šä¹‰ä¸€ä¸ªæ–¹æ³•</span></span><br><span class="line"><span class="title function_">_gotoSubClass</span>(<span class="params">sectionID, rowID</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;sectionID=&quot;</span>+sectionID + <span class="string">&quot;rowID=&quot;</span> + rowID);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æ–¹æ³•ä¼ å‚1</span></span><br><span class="line"> &lt;<span class="title class_">TouchableOpacity</span> onPress=&#123;<span class="function">() =&gt;</span> <span class="variable language_">this</span>.<span class="title function_">_gotoSubClass</span>(sectionID, rowID)&#125;&gt;</span><br><span class="line">       <span class="language-xml"><span class="tag">&lt;<span class="name">Text</span>&gt;</span>&#123;rowData.title&#125;<span class="tag">&lt;/<span class="name">Text</span>&gt;</span></span></span><br><span class="line">   &lt;/<span class="title class_">TouchableOpacity</span>&gt;</span><br><span class="line"><span class="comment">//æ–¹æ³•ä¼ å‚2</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">TouchableOpacity</span> <span class="attr">onPress</span>=<span class="string">&#123;this._gotoSubClass.bind(this,sectionID,</span> <span class="attr">rowID</span>)&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">       <span class="tag">&lt;<span class="name">Text</span>&gt;</span>&#123;rowData.title&#125;<span class="tag">&lt;/<span class="name">Text</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">   <span class="tag">&lt;/<span class="name">TouchableOpacity</span>&gt;</span></span></span><br><span class="line"> å…¶ä¸­bindä¸­çš„å‚æ•°<span class="number">1</span>ï¼š<span class="variable language_">this</span>ä»£è¡¨çš„æ˜¯ä¸Šä¸‹æ–‡å¯¹è±¡ï¼Œåé¢è·Ÿçš„å‚æ•°ï¼Œå¯¹åº”ç§æœ‰æ–¹æ³•ä¸­çš„å‚æ•°é¡ºåº</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="hooksäº‹ä»¶ä¼ å‚"><a href="#hooksäº‹ä»¶ä¼ å‚" class="headerlink" title="hooksäº‹ä»¶ä¼ å‚"></a>hooksäº‹ä»¶ä¼ å‚</h5><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å®šä¹‰ä¸€ä¸ªæ–¹æ³• æ¥æ”¶å‚æ•°</span></span><br><span class="line"> <span class="keyword">const</span> <span class="title function_">syncInfo</span> = (<span class="params">type</span>) =&gt; &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(type);</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//onPresssäº‹ä»¶æ—¶çš„ä¼ å‚</span></span><br><span class="line">&lt;<span class="title class_">Button</span> buttonStyle=&#123;styles.<span class="property">syncButton</span>&#125; onPress=&#123;<span class="function">() =&gt;</span> <span class="title function_">syncInfo</span>(<span class="string">&#x27;userLoginState&#x27;</span>)&#125; title=<span class="string">&quot;åŒæ­¥&quot;</span> loading=&#123;userSyncState.<span class="property">userLoginState</span>&#125; type=<span class="string">&quot;clear&quot;</span>/&gt;</span><br></pre></td></tr></table></figure><hr><h3 id="ç”Ÿå‘½å‘¨æœŸ"><a href="#ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="ç”Ÿå‘½å‘¨æœŸ"></a><a target="_blank" rel="noopener" href="https://zh-hans.reactjs.org/docs/react-component.html#mounting">ç”Ÿå‘½å‘¨æœŸ</a></h3><blockquote><p>ç”Ÿå‘½å‘¨æœŸæŒ‡çš„<code>reactç»„ä»¶</code>çš„ä»åˆ›å»ºåˆ°é”€æ¯çš„æ•´ä¸ªè¿‡ç¨‹ä¸­ä¼šè‡ªåŠ¨è§¦å‘çš„å‡½æ•°</p></blockquote><p><a target="_blank" rel="noopener" href="https://projects.wojtekmaj.pl/react-lifecycle-methods-diagram/">åœ¨çº¿å›¾ç¤º</a></p><p><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://soobsj.oss-cn-hangzhou.aliyuncs.com/images/2024-11-04/images10202205111419261.png" alt="image-20200528103625667"></p><h4 id="ä¸»è¦çš„ç”Ÿå‘½å‘¨æœŸ"><a href="#ä¸»è¦çš„ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="ä¸»è¦çš„ç”Ÿå‘½å‘¨æœŸ"></a>ä¸»è¦çš„ç”Ÿå‘½å‘¨æœŸ</h4><ul><li><em>constructor</em><ul><li>ç»„ä»¶è¢«å®ä¾‹åŒ–çš„æ—¶å€™å‡ºå‘ ä¸€èˆ¬ç”¨åšå¯¹ç»„ä»¶åšåˆå§‹å·¥ä½œ,å¦‚è®¾ç½®<code>state</code>ç­‰</li></ul></li><li>render<ul><li>ç»„ä»¶å¼€å§‹æ¸²æŸ“æ—¶è§¦å‘</li><li>ç»„ä»¶è¢«æ›´æ–°æ—¶è§¦å‘ - stateå’Œpropså‘ç”Ÿæ”¹å˜æ—¶è§¦å‘</li></ul></li><li>componentDidMount<ul><li>ç»„ä»¶æŒ‚è½½å®Œæ¯•,å¯ä»¥å‘é€å¼‚æ­¥è¯·æ±‚è·å–æ•°æ®</li></ul></li><li>componentWillUnmount<ul><li>ç»„ä»¶è¢«å¸è½½æ—¶è§¦å‘</li><li>ä¸€èˆ¬ç”¨åœ¨æ¸…é™¤å®šæ—¶å™¨æˆ–è€…å–æ¶ˆè®¢é˜…ç­‰</li></ul></li></ul><hr><h2 id="hook"><a href="#hook" class="headerlink" title="hook"></a>hook</h2><h3 id="1-Hookæ˜¯ä»€ä¹ˆ"><a href="#1-Hookæ˜¯ä»€ä¹ˆ" class="headerlink" title="1 Hookæ˜¯ä»€ä¹ˆ"></a>1 Hookæ˜¯ä»€ä¹ˆ</h3><p>Hookå¯ä»¥åœ¨ä¸ä½¿ç”¨classçš„æƒ…å†µä¸‹åœ¨å‡½æ•°ç»„ä»¶ä¸­ä½¿ç”¨Reactçš„ç‰¹æ€§ã€‚</p><h3 id="2-useState"><a href="#2-useState" class="headerlink" title="2 useState"></a>2 useState</h3><p>useState å°±æ˜¯ä¸€ä¸ª Hook ï¼ŒuseState ç”¨äºåœ¨å‡½æ•°ç»„ä»¶ä¸­æ·»åŠ å†…éƒ¨ stateã€‚</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å‡½æ•°ç»„ä»¶</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">demo</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> [text, setText] = <span class="title function_">useState</span>(<span class="string">&#x27;å•Š&#x27;</span>);</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> &#123; setText(&#x27;å“ˆ&#x27;); &#125;&#125;&gt;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;text&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// åŒç­‰äºclass</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>// åŒç­‰äºclass</p><p>ä»£ç ä¸­ç”³æ˜äº†å˜é‡ textï¼Œé»˜è®¤å€¼ä¸º å•Šï¼Œå¯ä»¥é€šè¿‡ setText æ¥æ”¹å˜å®ƒçš„å€¼ã€‚</p><h3 id="3-useEffect"><a href="#3-useEffect" class="headerlink" title="3 useEffect"></a>3 useEffect</h3><p>useEffect å¯ä»¥åœ¨å‡½æ•°ç»„ä»¶ä¸­è¾¾åˆ°ç”Ÿå‘½å‘¨æœŸå‡½æ•°çš„ä½œç”¨ï¼Œå¯ä»¥æŠŠå®ƒçœ‹ä½œcomponentDidMountï¼ŒcomponentDidUpdate å’Œ componentWillUnmount è¿™ä¸‰ä¸ªå‡½æ•°çš„ç»„åˆã€‚</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; useState, useEffect &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">demo</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> [text, setText] = <span class="title function_">useState</span>(<span class="string">&#x27;å•Š&#x27;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">setText</span>(<span class="string">&#x27;å’¦&#x27;</span>);</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> &#123; setText(&#x27;å“ˆ&#x27;); &#125;&#125;&gt;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;text&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>useEffectä¼šåœ¨æ¯æ¬¡æ¸²æŸ“åéƒ½æ‰§è¡Œï¼Œå¦‚æœåªæƒ³åœ¨æŸä¸ªæˆ–æŸäº›å˜é‡å‘ç”Ÿæ›´æ”¹æ—¶æ‰§è¡Œï¼Œåªéœ€åœ¨useEffectä¸­ä¼ é€’ç¬¬äºŒä¸ªå‚æ•° [å˜é‡å]ã€‚</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; useState, useEffect &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">demo</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> [text, setText] = <span class="title function_">useState</span>(<span class="string">&#x27;å•Š&#x27;</span>);</span><br><span class="line">  <span class="keyword">const</span> [text2, setText2] = <span class="title function_">useState</span>(<span class="string">&#x27;å•Š&#x27;</span>);</span><br><span class="line">  <span class="keyword">const</span> [text3, setText3] = <span class="title function_">useState</span>(<span class="string">&#x27;å•Š&#x27;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">setText</span>(<span class="string">&#x27;å’¦&#x27;</span>);</span><br><span class="line">  &#125;,[text, text2])</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> &#123; setText(&#x27;å“ˆ&#x27;); &#125;&#125;&gt;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;text&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å¦‚ä¸Šï¼Œè¿™æ ·useEffectåªä¼šåœ¨textå’Œtext2å‘ç”Ÿæ”¹å˜æ—¶æ‰§è¡Œï¼Œtext3å‘ç”Ÿæ”¹å˜æ—¶ä¸æ‰§è¡Œã€‚</p><p><strong>æ³¨æ„ï¼šå¦‚æœç¬¬äºŒä¸ªå‚æ•°ä¼ é€’çš„ä¸ºç©ºæ•°ç»„ï¼Œé‚£ä¹ˆå®ƒåªä¼šåœ¨ç»„ä»¶æŒ‚åœ¨å’Œå¸è½½çš„æ—¶å€™æ‰§è¡Œã€‚</strong></p><p>å¦‚æœç»„ä»¶å¸è½½æ—¶éœ€è¦æ¸…é™¤ï¼Œé‚£ä¹ˆç›´éœ€è¦è¿”å›ä¸€ä¸ªæ¸…é™¤å‡½æ•°ï¼Œæ•ˆæœåŒclassç»„ä»¶ä¸­çš„componentWillUnmountã€‚</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; useState, useEffect &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">demo</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> [text, setText] = <span class="title function_">useState</span>(<span class="string">&#x27;å•Š&#x27;</span>);</span><br><span class="line">  <span class="keyword">const</span> [text2, setText2] = <span class="title function_">useState</span>(<span class="string">&#x27;å•Š&#x27;</span>);</span><br><span class="line">  <span class="keyword">const</span> [text3, setText3] = <span class="title function_">useState</span>(<span class="string">&#x27;å•Š&#x27;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">setText</span>(<span class="string">&#x27;å’¦&#x27;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    	<span class="comment">// æ¸…é™¤å‡½æ•° ç”¨äºç»„ä»¶å¸è½½æ—¶åšæ¸…é™¤æ“ä½œ</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,[text, text2])</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> &#123; setText(&#x27;å“ˆ&#x27;); &#125;&#125;&gt;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;text&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>åœ¨ä¸€ä¸ªå‡½æ•°ç»„ä»¶ä¸­useEffectå¯ä»¥å†™å¤šä¸ª</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; useState, useEffect &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">demo</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> [text, setText] = <span class="title function_">useState</span>(<span class="string">&#x27;å•Š&#x27;</span>);</span><br><span class="line">  <span class="keyword">const</span> [text2, setText2] = <span class="title function_">useState</span>(<span class="string">&#x27;å•Š&#x27;</span>);</span><br><span class="line">  <span class="keyword">const</span> [text3, setText3] = <span class="title function_">useState</span>(<span class="string">&#x27;å•Š&#x27;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">setText</span>(<span class="string">&#x27;å’¦&#x27;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    	<span class="comment">// æ¸…é™¤å‡½æ•° ç”¨äºç»„ä»¶å¸è½½æ—¶åšæ¸…é™¤æ“ä½œ</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,[text, text2])</span><br><span class="line">  </span><br><span class="line">  <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;&#125;,[text])</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> &#123; setText(&#x27;å“ˆ&#x27;); &#125;&#125;&gt;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;text&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="4-è‡ªå®šä¹‰Hook"><a href="#4-è‡ªå®šä¹‰Hook" class="headerlink" title="4 è‡ªå®šä¹‰Hook"></a>4 è‡ªå®šä¹‰Hook</h3><p>é€šè¿‡è‡ªå®šä¹‰ Hookï¼Œå¯ä»¥å°†ç»„ä»¶é€»è¾‘æå–åˆ°å¯é‡ç”¨çš„å‡½æ•°ä¸­ã€‚<br>é€šè¿‡è‡ªå®šä¹‰ Hookï¼Œåç§°å¿…é¡»ç”¨useå¼€å¤´ã€‚</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; useState, useEffect &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">useCommon</span> = (<span class="params">text</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> [val, setVal] = <span class="title function_">useState</span>(<span class="literal">false</span>);</span><br><span class="line">  <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (val) &#123;</span><br><span class="line">      <span class="title function_">setVal</span>(<span class="literal">true</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="keyword">return</span> val</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">demo</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> text = <span class="title function_">useCommon</span>(<span class="string">&#x27;å•Š&#x27;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;text&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">demo2</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> text = <span class="title function_">useCommon</span>(<span class="string">&#x27;å“ˆ&#x27;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;text&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="ref-useRef"><a href="#ref-useRef" class="headerlink" title="ref useRef"></a>ref useRef</h2><h3 id="çˆ¶ä¸å­é—´ä½¿ç”¨-ref"><a href="#çˆ¶ä¸å­é—´ä½¿ç”¨-ref" class="headerlink" title="çˆ¶ä¸å­é—´ä½¿ç”¨ ref"></a>çˆ¶ä¸å­é—´ä½¿ç”¨ ref</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">//å®šä¹‰ä¸€ä¸ªref </span><br><span class="line">const webView = useRef(null);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//æ¥å—ç»„ä»¶çš„refå¹¶èµ‹å€¼ç»™å®šä¹‰çš„ref èµ‹å€¼å®Œå webViewå¯ä»¥è°ƒç”¨å­ç»„ä»¶é‡Œçš„å±æ€§ä¸æ–¹æ³•</span><br><span class="line">&lt;WebView ref=&#123;(view) =&gt; (webView = view)&#125; /&gt;</span><br></pre></td></tr></table></figure><h3 id="hooksä¸classé—´çš„çš„ref"><a href="#hooksä¸classé—´çš„çš„ref" class="headerlink" title="hooksä¸classé—´çš„çš„ref"></a>hooksä¸classé—´çš„çš„ref</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">//å½“å­ç»„ä»¶æ˜¯classæ—¶ æŒ‚è½½å®Œæˆå æŠŠå½“å‰thisæš´éœ²ç»™çˆ¶ç±»</span><br><span class="line">  componentDidMount()&#123;</span><br><span class="line">    this.props.onRef(this);</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">//å½“çˆ¶ç»„ä»¶æ˜¯hooksæ—¶ æ¥æ”¶å­ç»„ä»¶ä¼ æ¥çš„ref</span><br><span class="line">	//å®šä¹‰useRef</span><br><span class="line">	const form = useRef();</span><br><span class="line">	//æŠŠå­ç»„ä»¶ä¼ æ¥çš„å±æ€§èµ‹å€¼ç»™å½“å‰çš„refå±æ€§</span><br><span class="line">   &lt;ModalDropdown onRef=&#123;f =&gt; form.current = f&#125;&gt; &lt;/ModalDropdown&gt;</span><br></pre></td></tr></table></figure><h2 id="useState"><a href="#useState" class="headerlink" title="useState"></a>useState</h2><p><code>useState</code>æ˜¯ä¸€ä¸ªHookå‡½æ•°ï¼Œè®©ä½ åœ¨å‡½æ•°ç»„ä»¶ä¸­æ‹¥æœ‰stateå˜é‡ã€‚å®ƒæ¥æ”¶ä¸€ä¸ªåˆå§‹åŒ–çš„stateï¼Œè¿”å›æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„é‡Œæœ‰ä¸¤ä¸ªå…ƒç´ ï¼Œç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯å½“å‰çŠ¶æ€å€¼å’Œå¦ä¸€ä¸ªæ›´æ–°è¯¥å€¼çš„æ–¹æ³•ã€‚<br> æœ¬æ•™ç¨‹ä¸»è¦æ˜¯é’ˆå¯¹äºReactä¸­çš„<code>useState</code>åšä¸€ä¸ªè¯¦ç»†çš„æè¿°ï¼Œå®ƒç­‰åŒäºå‡½æ•°ç»„ä»¶ä¸­çš„<code>this.state</code>/<code>this.setState</code>ï¼Œæˆ‘ä»¬å°†ä¼šå›´ç»•ä¸‹é¢çš„é—®é¢˜é€ä¸€è§£æï¼š</p><blockquote><p>Reactä¸­çš„ç±»ç»„ä»¶å’Œå‡½æ•°ç»„ä»¶</p><p>React.useState hookåšäº†ä»€ä¹ˆ</p><p>åœ¨Reactä¸­å£°æ˜çŠ¶æ€</p><p>React Hooks: Update State</p><p>åœ¨useState hookä¸­ä½¿ç”¨å¯¹è±¡ä½œä¸ºçŠ¶æ€å˜é‡</p><p>React Hooksä¸­å¦‚ä½•æ›´æ–°åµŒå¥—å¯¹è±¡çŠ¶æ€</p><p>å¤šä¸ªçŠ¶æ€å˜é‡è¿˜æ˜¯ä¸€ä¸ªçŠ¶æ€å¯¹è±¡</p><p>ä½¿ç”¨useStateçš„è§„åˆ™</p><p>useReducer Hookçš„ä½¿ç”¨</p></blockquote><p>å¦‚æœæ‚¨æ˜¯åˆšå¼€å§‹å­¦ä¹ ä½¿ç”¨useStateï¼Œè¯·æŸ¥çœ‹<a target="_blank" rel="noopener" href="https://links.jianshu.com/go?to=https://reactjs.org/docs/hooks-state.html">å®˜æ–¹æ–‡æ¡£</a>æˆ–è€…è¯¥<a target="_blank" rel="noopener" href="https://links.jianshu.com/go?to=https://reactjs.org/docs/hooks-state.html">è§†é¢‘æ•™ç¨‹</a>ã€‚</p><h3 id="Reactä¸­çš„ç±»ç»„ä»¶å’Œå‡½æ•°ç»„ä»¶"><a href="#Reactä¸­çš„ç±»ç»„ä»¶å’Œå‡½æ•°ç»„ä»¶" class="headerlink" title="Reactä¸­çš„ç±»ç»„ä»¶å’Œå‡½æ•°ç»„ä»¶"></a>Reactä¸­çš„ç±»ç»„ä»¶å’Œå‡½æ•°ç»„ä»¶</h3><p>Reactæœ‰ä¸¤ç§ç±»å‹çš„ç»„ä»¶ï¼šç±»ç»„ä»¶å’Œå‡½æ•°ç»„ä»¶ã€‚<br> ç±»ç»„ä»¶æ˜¯ç»§æ‰¿<code>React.Component</code>çš„ES6ç±»ï¼Œå®ƒæœ‰è‡ªå·±çš„çŠ¶æ€å’Œç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Message</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">props</span>) &#123;</span><br><span class="line">    <span class="variable language_">super</span>(props);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">state</span> = &#123;</span><br><span class="line">      <span class="attr">message</span>: <span class="string">&quot;&quot;</span></span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">componentDidMount</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">/*...*/</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;this.state.message&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å‡½æ•°ç»„ä»¶æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒèƒ½æ¥æ”¶ä»»ä½•ç»„ä»¶çš„å±æ€§ä½œä¸ºå‚æ•°ï¼Œå¹¶ä¸”å¯ä»¥è¿”å›æœ‰æ•ˆçš„JSXã€‚</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Message</span>(<span class="params">props</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;props.message&#125; <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æˆ–è€…ä½¿ç”¨ç®­å¤´å‡½æ•°</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">Message</span> = (<span class="params">props</span>) =&gt; <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;props.message&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p>æ­£å¦‚æ‰€çœ‹åˆ°çš„ï¼Œå‡½æ•°ç»„ä»¶æ²¡æœ‰ä»»ä½•çŠ¶æ€å’Œç”Ÿå‘½å‘¨æœŸæ–¹æ³•ã€‚ä¸è¿‡ï¼Œåœ¨React16.8ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨Hooksã€‚<br> React Hooksæ˜¯æ–¹æ³•ï¼Œå®ƒå¯ä»¥ç»™å‡½æ•°ç»„ä»¶æ·»åŠ çŠ¶æ€å˜é‡ï¼Œå¹¶ä¸”å¯ä»¥æ¨¡æ‹Ÿç±»ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ã€‚ä»–ä»¬å€¾å‘ä»¥<strong>use</strong>ä½œä¸ºHookåçš„å¼€å§‹ã€‚</p><h3 id="React-useState-hookåšäº†ä»€ä¹ˆ"><a href="#React-useState-hookåšäº†ä»€ä¹ˆ" class="headerlink" title="React.useState hookåšäº†ä»€ä¹ˆ"></a>React.useState hookåšäº†ä»€ä¹ˆ</h3><p>æ­£å¦‚ä¹‹å‰äº†è§£çš„ï¼Œ<code>useState</code>å¯ä»¥ç»™å‡½æ•°ç»„ä»¶æ·»åŠ çŠ¶æ€ï¼Œå‡½æ•°ç»„ä»¶ä¸­çš„<code>useState</code>å¯ä»¥ç”Ÿæˆä¸€ç³»åˆ—ä¸å…¶ç»„ä»¶ç›¸å…³è”çš„çŠ¶æ€ã€‚</p><p>ç±»ç»„ä»¶ä¸­çš„çŠ¶æ€æ€»æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œä¸è¿‡Hooksä¸­çš„çŠ¶æ€å¯ä»¥æ˜¯ä»»æ„ç±»å‹ã€‚æ¯ä¸ªstateå¯ä»¥æœ‰å•ä¸€çš„å€¼ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªå¯¹è±¡ã€æ•°ç»„ã€å¸ƒå°”å€¼æˆ–è€…èƒ½æƒ³åˆ°çš„ä»»æ„ç±»å‹ã€‚</p><p>Soï¼Œä½ ä¼šä»€ä¹ˆæ—¶å€™ç”¨<code>useState</code>Hookå‘¢ï¼Ÿå®ƒå¯¹ç»„ä»¶è‡ªèº«çš„çŠ¶æ€å¾ˆæœ‰ç”¨ï¼Œç„¶è€Œå¤§é¡¹ç›®å¯èƒ½ä¼šéœ€è¦å¦å¤–çš„çŠ¶æ€ç®¡ç†æ–¹æ¡ˆã€‚</p><h3 id="Reactå£°æ˜çŠ¶æ€"><a href="#Reactå£°æ˜çŠ¶æ€" class="headerlink" title="Reactå£°æ˜çŠ¶æ€"></a>Reactå£°æ˜çŠ¶æ€</h3><p><code>useState</code>æ˜¯<code>React</code>çš„å‘½åè¾“å‡ºå‡ºï¼Œå› æ­¤ä½ å¯ä»¥è¿™ä¹ˆå†™ï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">React<span class="selector-class">.useState</span></span><br></pre></td></tr></table></figure><p>æˆ–è€…å¯ä»¥ç›´æ¥è¿™ä¹ˆå†™ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; useState &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br></pre></td></tr></table></figure><p>ç„¶è€Œä¸åƒåœ¨ç±»ç»„ä»¶é‡Œå£°æ˜çŠ¶æ€å¯¹è±¡é‚£æ ·ï¼Œ<code>useState</code>å…è®¸å£°æ˜å¤šä¸ªçŠ¶æ€å˜é‡ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Message</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">props</span>) &#123;</span><br><span class="line">    <span class="variable language_">super</span>(props);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">state</span> = &#123;</span><br><span class="line">      <span class="attr">message</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">      <span class="attr">list</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">/*...*/</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>useState</code>Hookä¸€æ¬¡åªèƒ½å£°æ˜ä¸€ä¸ªçŠ¶æ€å˜é‡ï¼Œä¸è¿‡è¿™ä¸ªçŠ¶æ€å˜é‡å¯ä»¥æ˜¯ä»»æ„ç±»å‹çš„ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; useState &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">Message</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> messageState = <span class="title function_">useState</span>(<span class="string">&quot;&quot;</span>);</span><br><span class="line">  <span class="keyword">const</span> listState = <span class="title function_">useState</span>([]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>useState</code>æ¥æ”¶çŠ¶æ€çš„åˆå§‹å€¼ä½œä¸ºä¸€ä¸ªå‚æ•°ã€‚<br> æ­£å¦‚ä¹‹å‰ä¾‹å­å±•ç¤ºçš„ï¼Œå¯ä»¥ç›´æ¥ç»™å‡½æ•°ä¼ é€’ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å‡½æ•°æ¥å»¶è¿Ÿåˆå§‹åŒ–è¯¥å˜é‡ï¼ˆå½“åˆå§‹åŒ–çŠ¶æ€åŸºäºä¸€æ¬¡æ˜‚è´µçš„è®¡ç®—ï¼Œè¿™ç§æ–¹å¼æ˜¯å¾ˆæœ‰ç”¨çš„ï¼‰ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">Message</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> messageState = <span class="title function_">useState</span>(<span class="function">() =&gt;</span> <span class="title function_">expensiveComputation</span>());</span><br><span class="line">  <span class="comment">/*...*/</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åˆå§‹åŒ–çš„å€¼ä»…ä»…ä¼šåœ¨ç¬¬ä¸€æ¬¡æ¸²æŸ“æ—¶è¢«èµ‹å€¼ï¼ˆå¦‚æœä»–æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œä¹Ÿæ˜¯ä¼šåœ¨åˆæ¬¡æ¸²æŸ“æ—¶æ‰§è¡Œï¼‰ã€‚<br> åœ¨åç»­çš„æ›´æ–°ä¸­ï¼ˆç”±äºç»„ä»¶æœ¬èº«çš„çŠ¶æ€æ›´æ”¹æˆ–è€…æ˜¯è¯´çˆ¶ç»„ä»¶å¯¼è‡´çš„å˜åŒ–ï¼‰ï¼Œ<code>useState</code>Hookå‚æ•°ï¼ˆåˆå§‹å€¼ï¼‰å°†ä¼šè¢«å¿½ç•¥ï¼Œå½“å‰çš„å€¼å°†ä¼šè¢«ä½¿ç”¨ã€‚<br> ç†è§£å®ƒæ˜¯éå¸¸é‡è¦çš„ï¼Œä¸¾ä¸ªä¾‹å­ï¼Œå¦‚æœä½ æƒ³æ›´æ–°åŸºäºç»„ä»¶æ¥æ”¶çš„æ–°å±æ€§çš„çŠ¶æ€ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">Message</span> = (<span class="params">props</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> messageState = <span class="title function_">useState</span>(props.<span class="property">message</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åªå•ç‹¬ä½¿ç”¨<code>useState</code>ä¸ä¼šå·¥ä½œçš„ï¼Œå› ä¸ºå®ƒçš„å‚æ•°ä»…ä»…åœ¨ç¬¬ä¸€æ¬¡ç”Ÿæ•ˆï¼Œå¹¶ä¸æ˜¯æ¯æ¬¡å±æ€§æ›´æ”¹æ—¶ç”Ÿæ•ˆï¼ˆå¯ä»¥ç»“åˆ<code>useEffect</code>ä½¿ç”¨ï¼Œå…·ä½“æŸ¥çœ‹è¯¥<a target="_blank" rel="noopener" href="https://links.jianshu.com/go?to=https://stackoverflow.com/questions/54625831/how-to-sync-props-to-state-using-react-hooks-setstate">å›ç­”</a>ï¼‰<br> ä¸è¿‡ï¼Œ<code>useState</code>ä¸æ˜¯åƒä¹‹å‰æ‰€è¯´çš„ä»…ä»…è¿”å›ä¸€ä¸ªå˜é‡ã€‚<br> å®ƒè¿”å›çš„æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯çŠ¶æ€å˜é‡ï¼Œç¬¬äºŒä¸ªå…ƒç´ æ˜¯æ›´æ–°è¯¥å˜é‡å€¼çš„æ–¹æ³•ã€‚</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">Message</span>= (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> messageState = <span class="title function_">useState</span>(<span class="string">&quot;&quot;</span>);</span><br><span class="line">  <span class="keyword">const</span> message = messageState[<span class="number">0</span>]; <span class="comment">// æ˜¯ä¸€ä¸ªç©ºå­—ç¬¦ä¸²</span></span><br><span class="line">  <span class="keyword">const</span> setMessage = messageState[<span class="number">1</span>]; <span class="comment">// æ˜¯ä¸€ä¸ªæ–¹æ³•</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸€èˆ¬æˆ‘ä»¬ä¼šé€‰æ‹©<strong>æ•°ç»„è§£æ„</strong>çš„æ–¹å¼æ¥ç®€åŒ–ä¸Šè¿°ä»£ç ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">Message</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> [message, setMessage] = <span class="title function_">useState</span>(<span class="string">&quot;&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨å‡½æ•°ç»„ä»¶ä¸­å¯ä»¥åƒå…¶ä»–å˜é‡ä¸€æ ·ä½¿ç”¨çŠ¶æ€å˜é‡ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">Message</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> [message, setMessage] = <span class="title function_">useState</span>(<span class="string">&quot;&quot;</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;message&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½†æ˜¯ä¸ºä»€ä¹ˆ<code>useState</code>ä¼šè¿”å›ä¸€ä¸ªæ•°ç»„å‘¢ï¼Ÿ<br> å› ä¸ºä¸å¯¹è±¡ç›¸æ¯”ã€æ•°ç»„æ˜¯éå¸¸çµæ´»ä¸”å®¹æ˜“ä½¿ç”¨ã€‚<br> å¦‚æœè¿™ä¸ªæ–¹æ³•è¿”å›çš„æ˜¯ä¸€ä¸ªåŒ…æ‹¬ä¸€ç³»åˆ—å±æ€§é›†çš„å¯¹è±¡ï¼Œé‚£ä¹ˆå°±ä¸èƒ½å¾ˆå®¹æ˜“è‡ªå®šä¹‰å˜é‡åï¼Œæ¯”å¦‚ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ²¡æœ‰ä½¿ç”¨å¯¹è±¡è§£æ„</span></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">messageState</span> = <span class="title function_ invoke__">useState</span>( <span class="string">&#x27;&#x27;</span> );</span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">message</span> = messageState.state;</span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">setMessage</span> = messageState;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä½¿ç”¨å¯¹è±¡è§£æ„</span></span><br><span class="line"><span class="keyword">const</span> &#123; state: message, setState: setMessage &#125; = <span class="title function_ invoke__">useState</span>( <span class="string">&#x27;&#x27;</span> );</span><br><span class="line"><span class="keyword">const</span> &#123; state: <span class="keyword">list</span>, setState: setList &#125; = <span class="title function_ invoke__">useState</span>( [] );</span><br></pre></td></tr></table></figure><h3 id="React-Hooks-æ›´æ–°çŠ¶æ€"><a href="#React-Hooks-æ›´æ–°çŠ¶æ€" class="headerlink" title="React Hooks: æ›´æ–°çŠ¶æ€"></a>React Hooks: æ›´æ–°çŠ¶æ€</h3><p><code>useState</code>è¿”å›çš„ç¬¬äºŒä¸ªå…ƒç´ æ˜¯ä¸€ä¸ªæ–¹æ³•ï¼Œå®ƒç”¨æ–°å€¼æ¥æ›´æ–°çŠ¶æ€å˜é‡ã€‚<br> ä¸¾ä¸ªğŸŒ°ï¼Œä½¿ç”¨è¾“å…¥æ¡†åœ¨æ¯æ¬¡æ”¹å˜æ—¶æ›´æ–°çŠ¶æ€å˜é‡<a target="_blank" rel="noopener" href="https://links.jianshu.com/go?to=https://codesandbox.io/s/upbeat-spence-4j924?file=/src/App.js">ç¤ºä¾‹</a>ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">Message</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> [message, setMessage] = <span class="title function_">useState</span>( <span class="string">&#x27;&#x27;</span> );</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">input</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">         <span class="attr">type</span>=<span class="string">&quot;text&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">         <span class="attr">value</span>=<span class="string">&#123;message&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">         <span class="attr">placeholder</span>=<span class="string">&quot;Enter a message&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">         <span class="attr">onChange</span>=<span class="string">&#123;e</span> =&gt;</span> setMessage(e.target.value)&#125;</span></span><br><span class="line"><span class="language-xml">       /&gt;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">strong</span>&gt;</span>&#123;message&#125;<span class="tag">&lt;/<span class="name">strong</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>ç„¶è€Œï¼Œè¿™ä¸ªæ›´æ–°å‡½æ•°ä¸ä¼šç«‹å³æ›´æ–°å€¼ã€‚ç›¸åå®ƒä¼šæ’é˜Ÿç­‰å¾…æ›´æ–°æ“ä½œã€‚åœ¨é‡æ–°æ¸²æŸ“ç»„ä»¶åï¼Œ<code>useState</code>çš„å‚æ•°å°†è¢«å¿½ç•¥ï¼Œè¿™ä¸ªæ›´æ–°æ–¹æ³•å°†ä¼šè¿”å›æœ€æ–°çš„å€¼ã€‚<br> å¦‚æœä½ éœ€è¦ç”¨ä¹‹å‰çš„å€¼æ¥æ›´æ–°çŠ¶æ€ï¼Œä½ ä¸€å®šå¾—ä¼ é€’ä¸€ä¸ªæ¥æ”¶ä¹‹å‰å€¼çš„æ–¹æ³•æ¥è¿”å›æ–°å€¼<a href="">ç¤ºä¾‹</a>ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">Message</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> [message, setMessage] = <span class="title function_">useState</span>(<span class="string">&quot;&quot;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">input</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">type</span>=<span class="string">&quot;text&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">value</span>=<span class="string">&#123;message&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">placeholder</span>=<span class="string">&quot;Enter a message&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">onChange</span>=<span class="string">&#123;(e)</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-xml">          const val = e.target.value;</span></span><br><span class="line"><span class="language-xml">          setMessage((prev) =&gt; prev + val);</span></span><br><span class="line"><span class="language-xml">        &#125;&#125;</span></span><br><span class="line"><span class="language-xml">      /&gt;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">strong</span>&gt;</span>&#123;message&#125;<span class="tag">&lt;/<span class="name">strong</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="åœ¨useState-hookä¸­ä½¿ç”¨å¯¹è±¡ä½œä¸ºçŠ¶æ€å˜é‡"><a href="#åœ¨useState-hookä¸­ä½¿ç”¨å¯¹è±¡ä½œä¸ºçŠ¶æ€å˜é‡" class="headerlink" title="åœ¨useState hookä¸­ä½¿ç”¨å¯¹è±¡ä½œä¸ºçŠ¶æ€å˜é‡"></a>åœ¨<code>useState</code> hookä¸­ä½¿ç”¨å¯¹è±¡ä½œä¸ºçŠ¶æ€å˜é‡</h3><p>å½“ä½¿ç”¨å¯¹è±¡æ—¶ï¼Œéœ€è¦è®°ä½çš„æ˜¯ï¼š</p><ol><li><strong>ä¸å¯å˜çš„é‡è¦æ€§</strong></li><li><strong><code>useState</code>è¿”å›çš„æ›´æ–°æ–¹æ³•ä¸æ˜¯åƒç±»ç»„ä»¶ä¸­çš„<code>setState</code>åˆå¹¶å¯¹è±¡</strong></li></ol><p>å…³äºç¬¬ä¸€ç‚¹ï¼Œå¦‚æœä½ æ˜¯ç”¨ç›¸åŒçš„å€¼ä½œä¸ºå½“å‰å€¼æ¥æ›´æ–°stateï¼ˆReactä½¿ç”¨çš„<code>Object.is</code>æ¥åšæ¯”è¾ƒï¼‰ï¼ŒReactä¸ä¼šè§¦å‘æ›´æ–°çš„ã€‚</p><p>å½“ä½¿ç”¨å¯¹è±¡æ—¶ï¼Œå¾ˆå®¹æ˜“å‡ºç°ä¸‹é¢çš„é”™è¯¯<a target="_blank" rel="noopener" href="https://links.jianshu.com/go?to=https://codesandbox.io/s/wizardly-haibt-nk1fr?file=/src/message/MessageOne.js">ç¤ºä¾‹</a>ï¼Œè¾“å…¥æ¡†ä¸èƒ½è¾“å…¥æ–‡æœ¬ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">MessageOne</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> [messageObj, setMessageObj] = <span class="title function_">useState</span>(&#123; <span class="attr">message</span>: <span class="string">&quot;&quot;</span> &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">input</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">type</span>=<span class="string">&quot;text&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">value</span>=<span class="string">&#123;messageObj.message&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">placeholder</span>=<span class="string">&quot;Enter a message&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">onChange</span>=<span class="string">&#123;(e)</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-xml">          messageObj.message = e.target.value;</span></span><br><span class="line"><span class="language-xml">          setMessageObj(messageObj);</span></span><br><span class="line"><span class="language-xml">        &#125;&#125;</span></span><br><span class="line"><span class="language-xml">      /&gt;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">strong</span>&gt;</span>&#123;messageObj.message&#125;<span class="tag">&lt;/<span class="name">strong</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢çš„ä¾‹å­æ²¡æœ‰åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ï¼Œè€Œæ˜¯æ”¹å˜å·²ç»å­˜åœ¨çš„çŠ¶æ€å¯¹è±¡ã€‚å¯¹äºReactæ¥è¯´ï¼Œå®ƒä»¬æ˜¯åŒä¸€ä¸ªå¯¹è±¡ã€‚ä¸ºäº†æ­£å¸¸è¿è¡Œï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡<a target="_blank" rel="noopener" href="https://links.jianshu.com/go?to=https://codesandbox.io/s/wizardly-haibt-nk1fr?file=/src/message/MessageTwo.js">ç¤ºä¾‹</a>ï¼š</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">onChange=&#123;<span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> newMessageObj = &#123; <span class="attr">message</span>: e.<span class="property">target</span>.<span class="property">value</span> &#125;;</span><br><span class="line">  <span class="title function_">setMessageObj</span>(newMessageObj);</span><br><span class="line">&#125;&#125;</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªè®©æˆ‘ä»¬çœ‹åˆ°äº†ä½ éœ€è¦è®°ä½çš„ç¬¬äºŒä»¶äº‹æƒ…ã€‚<br> å½“ä½ åˆ›å»ºä¸€ä¸ªçŠ¶æ€å˜é‡æ—¶ï¼Œç±»ç»„ä»¶ä¸­çš„<code>this.setState</code> è‡ªåŠ¨åˆå¹¶æ›´æ–°å¯¹è±¡ï¼Œè€Œå‡½æ•°ç»„ä»¶ä¸­<code>useState</code>çš„æ›´æ–°æ–¹æ³•åˆ™æ˜¯ç›´æ¥<strong>æ›¿æ¢</strong>å¯¹è±¡ ã€‚<br> ç»§ç»­ä¸Šé¢çš„ä¾‹å­ï¼Œå¦‚æœæˆ‘ä»¬ç»™<code>message</code>å¯¹è±¡æ·»åŠ ä¸€ä¸ª<code>id</code>å±æ€§ï¼Œå°†ä¼šå‘ç”Ÿä»€ä¹ˆå‘¢<a target="_blank" rel="noopener" href="https://links.jianshu.com/go?to=https://codesandbox.io/s/wizardly-haibt-nk1fr?file=/src/message/MessageThree.js">ç¤ºä¾‹</a>ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">MessageThree</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> [messageObj, setMessageObj] = <span class="title function_">useState</span>(&#123; <span class="attr">message</span>: <span class="string">&quot;&quot;</span>, <span class="attr">id</span>: <span class="number">1</span> &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">input</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">type</span>=<span class="string">&quot;text&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">value</span>=<span class="string">&#123;messageObj.message&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">placeholder</span>=<span class="string">&quot;Enter a message&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">onChange</span>=<span class="string">&#123;(e)</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-xml">          const newMessageObj = &#123; message: e.target.value &#125;;</span></span><br><span class="line"><span class="language-xml">          setMessageObj(newMessageObj);</span></span><br><span class="line"><span class="language-xml">        &#125;&#125;</span></span><br><span class="line"><span class="language-xml">      /&gt;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">strong</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          &#123;messageObj.id&#125;ï¼š &#123;messageObj.message&#125;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">strong</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>å½“åªæ›´æ–°<code>message</code>å±æ€§æ—¶ï¼ŒReactå°†æ›¿æ¢åŸå…ˆçš„çŠ¶æ€å€¼<code>&#123; message: &#39;&#39;, id: 1 &#125;</code>ï¼Œå½“è§¦å‘<code>onChange</code>å±æ€§æ—¶ï¼ŒçŠ¶æ€å€¼å°†ä»…ä»…åŒ…å«<code>message</code>å±æ€§ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;message: <span class="string">&quot;Â·Â·Â·Â·&quot;</span>&#125; <span class="comment">// idå±æ€§ä¸¢å¤±äº†</span></span><br></pre></td></tr></table></figure><p>å½“ç„¶ï¼Œé€šè¿‡æ›¿æ¢çš„å¯¹è±¡å’Œæ‰©å±•è¿ç®—ä¹‹å‰çš„å¯¹è±¡ç»“åˆä½œä¸ºå‚æ•°ä¹Ÿå¯ä»¥åœ¨å‡½æ•°ç»„ä»¶ä¸­å¤åˆ¶<code>setState()</code>çš„è¡Œä¸º<a target="_blank" rel="noopener" href="https://links.jianshu.com/go?to=https://codesandbox.io/s/wizardly-haibt-nk1fr?file=/src/message/MessageFour.js">ç¤ºä¾‹</a>ï¼š</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">onChange=&#123;<span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> val = e.<span class="property">target</span>.<span class="property">value</span>;</span><br><span class="line">  <span class="title function_">setMessageObj</span>(<span class="function">(<span class="params">prevState</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123; ...prevState, <span class="attr">message</span>: val &#125;;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;&#125;</span><br></pre></td></tr></table></figure><p><code>...prevState</code>ä¼šå¾—åˆ°å¯¹è±¡æ‰€æœ‰çš„å±æ€§ï¼Œ<code>message: val</code>ä¼šé‡æ–°èµ‹å€¼ç»™<code>message</code>å±æ€§ã€‚</p><p>å½“ç„¶ä½¿ç”¨<code>Object.assign</code>ä¹Ÿä¼šå¾—åˆ°ç›¸åŒçš„ç»“æœï¼ˆéœ€è¦åˆ›å»ºæ–°å¯¹è±¡ï¼‰<a target="_blank" rel="noopener" href="https://links.jianshu.com/go?to=https://codesandbox.io/s/wizardly-haibt-nk1fr?file=/src/message/MessageFour.js">ç¤ºä¾‹</a>ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ä½¿ç”¨Object.assign</span></span><br><span class="line"><span class="title function_">setMessageObj</span>(<span class="function">(<span class="params">prevState</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title class_">Object</span>.<span class="title function_">assign</span>(&#123;&#125;, prevState, &#123; <span class="attr">message</span>: val &#125;);</span><br><span class="line">&#125;);          </span><br></pre></td></tr></table></figure><p>ä¸è¿‡æ‰©å±•è¿ç®—å¯ä»¥ç®€åŒ–è¿™ä¸ªæ“ä½œï¼Œè€Œä¸”ä¹Ÿå¯ä»¥åº”ç”¨åˆ°æ•°ç»„ä¸Šã€‚<br> ä¸€èˆ¬æ¥è®²ï¼Œå½“åœ¨æ•°ç»„ä¸Šä½¿ç”¨æ—¶ï¼Œæ‰©å±•è¿ç®—ç§»é™¤äº†æ‹¬å·ï¼Œä½ å¯ä»¥ç”¨æ—§æ•°ç»„ä¸­çš„å€¼åˆ›å»ºå¦ä¸€ä¸ªæ•°ç»„ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">[</span></span><br><span class="line">  ...<span class="punctuation">[</span>&#x27;a&#x27;<span class="punctuation">,</span> &#x27;b&#x27;<span class="punctuation">,</span> &#x27;c&#x27;<span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  &#x27;d&#x27;</span><br><span class="line"><span class="punctuation">]</span></span><br><span class="line"><span class="comment">// Is equivalent to</span></span><br><span class="line"><span class="punctuation">[</span> &#x27;a&#x27;<span class="punctuation">,</span> &#x27;b&#x27;<span class="punctuation">,</span> &#x27;c&#x27;<span class="punctuation">,</span>&#x27;d&#x27;<span class="punctuation">]</span></span><br></pre></td></tr></table></figure><p>å†æ¥ä¸ªğŸŒ°ï¼Œå¦‚ä½•ç”¨æ•°ç»„æ¥ä½¿ç”¨<code>useState</code><a target="_blank" rel="noopener" href="https://links.jianshu.com/go?to=https://codesandbox.io/s/wizardly-haibt-nk1fr?file=/src/message/MessageList.js">ç¤ºä¾‹</a>ï¼š<br> éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¤„ç†å¤šç»´æ•°ç»„æ—¶éœ€è¦è°¨æ…çš„ä½¿ç”¨æ‰©å±•è¿ç®—ï¼Œå› ä¸ºå¯èƒ½æœ€ç»ˆçš„ç»“æœä¸æ˜¯ä½ æ‰€æœŸå¾…çš„ã€‚<br> æ‰€ä»¥è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬å°±éœ€è¦è€ƒè™‘ä½¿ç”¨å¯¹è±¡ä½œä¸ºçŠ¶æ€ã€‚</p><h3 id="React-Hooksä¸­å¦‚ä½•æ›´æ–°åµŒå¥—å¯¹è±¡çŠ¶æ€"><a href="#React-Hooksä¸­å¦‚ä½•æ›´æ–°åµŒå¥—å¯¹è±¡çŠ¶æ€" class="headerlink" title="React Hooksä¸­å¦‚ä½•æ›´æ–°åµŒå¥—å¯¹è±¡çŠ¶æ€"></a>React Hooksä¸­å¦‚ä½•æ›´æ–°åµŒå¥—å¯¹è±¡çŠ¶æ€</h3><p>JSä¸­ï¼Œå¤šç»´æ•°ç»„æ˜¯æ•°ç»„é‡ŒåµŒå¥—æ•°ç»„ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">[</span></span><br><span class="line">  <span class="punctuation">[</span>&#x27;value1&#x27;<span class="punctuation">,</span>&#x27;value2&#x27;<span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="punctuation">[</span>&#x27;value3&#x27;<span class="punctuation">,</span>&#x27;value4&#x27;<span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">]</span></span><br></pre></td></tr></table></figure><p>ä½ å¯ä»¥åœ¨ç”¨å®ƒä»¬æ¥æŠŠä½ æ‰€æœ‰çš„çŠ¶æ€å˜é‡é›†ä¸­åœ¨ä¸€ä¸ªåœ°æ–¹ï¼Œç„¶è€Œï¼Œä¸ºäº†è¿™ä¸ªç›®çš„ï¼Œæœ€å¥½ä½¿ç”¨å†…åµŒå¯¹è±¡ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&#x27;row1&#x27;</span> : &#123;</span><br><span class="line">    <span class="string">&#x27;key1&#x27;</span> : <span class="string">&#x27;value1&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;key2&#x27;</span> : <span class="string">&#x27;value2&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">&#x27;row2&#x27;</span> : &#123;</span><br><span class="line">    <span class="string">&#x27;key3&#x27;</span> : <span class="string">&#x27;value3&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;key4&#x27;</span> : <span class="string">&#x27;value4&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å½“ä½¿ç”¨å†…åµŒå¯¹è±¡å’Œå¤šç»´æ•°ç»„æ—¶ï¼Œæœ‰ä¸€ä¸ªé—®é¢˜æ˜¯<code>Object.assign</code>å’Œæ‰©å±•è¿ç®—æ˜¯åˆ›å»ºäº†ä¸€ä¸ªæµ…æ‹·è´å¹¶éæ˜¯æ·±æ‹·è´ã€‚</p><blockquote><p>å½“æ‹·è´æ•°ç»„æ—¶ï¼Œæ‰©å±•è¿ç®—ä»…ä»…åšäº†ä¸€å±‚çš„æ‹·è´ï¼Œå› æ­¤ï¼Œå¯¹äºå¤šç»´æ•°ç»„æ¥è¯´ï¼Œä½¿ç”¨å®ƒæ˜¯ä¸åˆé€‚çš„ï¼Œå°±åƒä¸‹é¢ä¾‹å­ä¸­æ‰€ç¤ºï¼ˆä½¿ç”¨<code>Object.assign()</code>å’Œæ‰©å±•å…ƒç®—ç»“æœéƒ½æ˜¯trueï¼‰ï¼š</p></blockquote><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = [[<span class="number">1</span>], [<span class="number">2</span>], [<span class="number">3</span>]];</span><br><span class="line"><span class="keyword">let</span> b = [...a];</span><br><span class="line">b.shift().shift(); <span class="comment">// 1</span></span><br><span class="line"><span class="comment">//æ­¤æ—¶æ•°ç»„açš„ç»“æœæ˜¯[[], [2], [3]]</span></span><br></pre></td></tr></table></figure><p><a target="_blank" rel="noopener" href="https://links.jianshu.com/go?to=https://stackoverflow.com/questions/43421704/why-is-a-spread-element-unsuitable-for-copying-multidimensional-arrays">StackOverflow</a>å…³äºä¸Šé¢çš„ä¾‹å­æä¾›äº†ä¸€ä¸ªæ¯”è¾ƒå¥½çš„è§£é‡Šï¼Œä¸è¿‡ç›®å‰é‡è¦çš„æ˜¯ï¼Œå½“ä½¿ç”¨å†…åµŒå¯¹è±¡æ—¶ï¼Œæˆ‘ä»¬ä¸èƒ½ç”¨æ‰©å±•è¿ç®—æ¥æ›´æ–°çŠ¶æ€å¯¹è±¡ã€‚</p><p>å†ä¸¾ä¸ªğŸŒ°</p><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> [messageObj, setMessageObj] = useState(&#123;</span><br><span class="line">  author: <span class="string">&quot;&quot;</span>,</span><br><span class="line">  message: &#123;</span><br><span class="line">    <span class="type">id</span>: <span class="number">1</span>,</span><br><span class="line">    text: <span class="string">&quot;&quot;</span>,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>æ¥ï¼Œå…ˆçœ‹çœ‹æ›´æ–°<code>text</code>å­—æ®µçš„é”™è¯¯æ–¹å¼<a target="_blank" rel="noopener" href="https://links.jianshu.com/go?to=https://codesandbox.io/s/quirky-golick-k6lqq?file=/src/message/MessageFive.js">ç¤ºä¾‹</a>ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//é”™è¯¯, æ–‡æœ¬æ›´æ”¹åï¼ŒmessageObjçš„å€¼æ˜¯&#123;author: &quot;&quot;, message: &#123;id: 1, text: &quot;&quot;&#125;, text: &quot;*&quot;&#125;</span></span><br><span class="line"><span class="title function_">setMessageObj</span>(<span class="function">(<span class="params">prevState</span>) =&gt;</span> (&#123;</span><br><span class="line">  ...prevState,</span><br><span class="line">  <span class="attr">text</span>: val,</span><br><span class="line">&#125;));</span><br><span class="line"></span><br><span class="line"><span class="comment">//é”™è¯¯ï¼Œæ–‡æœ¬æ›´æ”¹åmessageObjå€¼æ˜¯&#123;id: &quot;*&quot;, text: &quot;*&quot;&#125;</span></span><br><span class="line"><span class="title function_">setMessageObj</span>(<span class="function">(<span class="params">prevState</span>) =&gt;</span> (&#123;</span><br><span class="line">  ...prevState.<span class="property">message</span>,</span><br><span class="line">  <span class="attr">text</span>: val</span><br><span class="line">&#125;));</span><br><span class="line"></span><br><span class="line"><span class="comment">//é”™è¯¯ï¼Œæ–‡æœ¬æ›´æ”¹åï¼ŒmessageObjçš„å€¼æ˜¯&#123;author: &quot;&quot;, message: &#123;text: &quot;*&quot;&#125;&#125;ï¼Œç¼ºå°‘idå±æ€§</span></span><br><span class="line"><span class="title function_">setMessageObj</span>(<span class="function">(<span class="params">prevState</span>) =&gt;</span> (&#123;</span><br><span class="line">  ...prevState,</span><br><span class="line">  <span class="attr">message</span>: &#123;</span><br><span class="line">    <span class="attr">text</span>: val,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;));</span><br></pre></td></tr></table></figure><p>ä¸ºäº†èƒ½æ­£ç¡®çš„æ›´æ–°<code>text</code>å±æ€§ï¼Œæˆ‘ä»¬éœ€è¦æ‹·è´ä¸€ä¸ªåŸå§‹å¯¹è±¡ï¼Œè¿™ä¸ªæ–°å¯¹è±¡åŒ…æ‹¬æ•´ä¸ªåŸå§‹å¯¹è±¡çš„æ‰€æœ‰å±æ€§ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">setMessageObj</span>(<span class="function">(<span class="params">prevState</span>) =&gt;</span> (&#123;</span><br><span class="line">  ...prevState,  <span class="comment">//èµ‹å€¼ç¬¬ä¸€å±‚çš„keyå€¼</span></span><br><span class="line">   <span class="attr">message</span>: &#123;  <span class="comment">//åˆ›å»ºåŒ…å«æ›´æ–°keyå€¼çš„å¯¹è±¡</span></span><br><span class="line">    ...prevState.<span class="property">message</span>, <span class="comment">//å¤åˆ¶åŒ…å«keyå€¼çš„å¯¹è±¡</span></span><br><span class="line">    <span class="attr">text</span>: val,  <span class="comment">//ç»™éœ€è¦æ›´æ–°çš„å­—æ®µé‡æ–°èµ‹å€¼</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;));</span><br></pre></td></tr></table></figure><p>ä»¥åŒæ ·çš„æ–¹å¼ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥æ›´æ–°<code>author</code>å­—æ®µï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">setMessageObj</span>(<span class="function">(<span class="params">prevState</span>) =&gt;</span> (&#123;</span><br><span class="line">  <span class="attr">author</span>: <span class="string">&quot;Joe&quot;</span>,</span><br><span class="line">  <span class="attr">message</span>: &#123; ...prevState.<span class="property">message</span> &#125;,</span><br><span class="line">&#125;));</span><br></pre></td></tr></table></figure><p>å¦‚æœ<code>message</code>å¯¹è±¡å˜åŒ–äº†ï¼Œåˆ™ç”¨ä»¥ä¸‹çš„æ–¹å¼ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">setMessageObj</span>(<span class="function">(<span class="params">prevState</span>) =&gt;</span> (&#123;</span><br><span class="line">  <span class="attr">author</span>: <span class="string">&quot;Joe&quot;</span>,</span><br><span class="line">  <span class="attr">message</span>: &#123; </span><br><span class="line">    ...prevState.<span class="property">message</span>, </span><br><span class="line">    <span class="attr">text</span>: val, </span><br><span class="line">  &#125;,</span><br><span class="line">&#125;));</span><br></pre></td></tr></table></figure><h3 id="å£°æ˜å¤šä¸ªçŠ¶æ€å˜é‡è¿˜æ˜¯ä¸€ä¸ªçŠ¶æ€å¯¹è±¡"><a href="#å£°æ˜å¤šä¸ªçŠ¶æ€å˜é‡è¿˜æ˜¯ä¸€ä¸ªçŠ¶æ€å¯¹è±¡" class="headerlink" title="å£°æ˜å¤šä¸ªçŠ¶æ€å˜é‡è¿˜æ˜¯ä¸€ä¸ªçŠ¶æ€å¯¹è±¡"></a>å£°æ˜å¤šä¸ªçŠ¶æ€å˜é‡è¿˜æ˜¯ä¸€ä¸ªçŠ¶æ€å¯¹è±¡</h3><p>å½“ä½ çš„åº”ç”¨ä¸­ä½¿ç”¨å¤šä¸ªå­—æ®µæˆ–å€¼ä½œä¸ºçŠ¶æ€å˜é‡æ—¶ï¼Œä½ å¯ä»¥é€‰æ‹©ç»„ç»‡å¤šä¸ªå˜é‡ï¼š</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> [id, setId] = useState(<span class="number">-1</span>);</span><br><span class="line"><span class="keyword">const</span> [message, setMessage] = useState(<span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> [author, setAuthor] = useState(<span class="string">&#x27;&#x27;</span>);</span><br></pre></td></tr></table></figure><p>æˆ–è€…ä½¿ç”¨ä¸€ä¸ªå¯¹è±¡çŠ¶æ€å˜é‡ï¼š</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> [messageObj, setMessage] = useState(&#123; </span><br><span class="line">  id: <span class="number">1</span>, </span><br><span class="line">  message: <span class="string">&#x27;&#x27;</span>, </span><br><span class="line">  author: <span class="string">&#x27;&#x27;</span> </span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>ä¸è¿‡ï¼Œéœ€è¦è°¨æ…çš„ä½¿ç”¨å¤æ‚æ•°æ®ç»“æ„ï¼ˆå†…åµŒå¯¹è±¡ï¼‰çš„çŠ¶æ€å¯¹è±¡ï¼Œè€ƒè™‘ä¸‹è¿™ä¸ªğŸŒ° ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> [messageObj, setMessage] = <span class="title function_">useState</span>(&#123;</span><br><span class="line">  <span class="attr">input</span>: &#123;</span><br><span class="line">    <span class="attr">author</span>: &#123;</span><br><span class="line">      <span class="attr">id</span>: -<span class="number">1</span>,</span><br><span class="line">      <span class="attr">author</span>: &#123;</span><br><span class="line">        <span class="attr">fName</span>:<span class="string">&#x27;&#x27;</span>,</span><br><span class="line">        <span class="attr">lName</span>: <span class="string">&#x27;&#x27;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">message</span>: &#123;</span><br><span class="line">      <span class="attr">id</span>: -<span class="number">1</span>,</span><br><span class="line">      <span class="attr">text</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">      <span class="attr">date</span>: <span class="keyword">new</span> <span class="title class_">Date</span>(),</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>å¦‚æœä½ éœ€è¦æ›´æ–°åµŒå¥—åœ¨å¯¹è±¡æ·±å¤„çš„æŒ‡å®šå­—æ®µæ—¶ï¼Œä½ å¿…é¡»å¤åˆ¶æ‰€æœ‰å…¶ä»–å¯¹è±¡å’ŒåŒ…å«è¯¥æŒ‡å®šå­—æ®µçš„çš„å¯¹è±¡çš„é”®å€¼å¯¹ä¸€èµ·å¤åˆ¶ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">setMessage</span>(<span class="function"><span class="params">prevState</span> =&gt;</span> (&#123;</span><br><span class="line">  <span class="attr">input</span>: &#123;</span><br><span class="line">    ...prevState.<span class="property">input</span>,</span><br><span class="line">    <span class="attr">message</span>: &#123;</span><br><span class="line">      ...prevState.<span class="property">input</span>.<span class="property">message</span>, </span><br><span class="line">      <span class="attr">text</span>: <span class="string">&#x27;***&#x27;</span>,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;));</span><br></pre></td></tr></table></figure><p>åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œæ‹·è´æ·±åº¦å†…åµŒå¯¹è±¡æ˜¯æ¯”è¾ƒæ˜‚è´µçš„ï¼Œå› ä¸ºReactå¯èƒ½ä¼šä¾èµ–é‚£äº›æ²¡æœ‰æ”¹å˜è¿‡çš„å­—æ®µå€¼é‡æ–°æ¸²æŸ“ä½ åº”ç”¨çš„éƒ¨åˆ†å†…å®¹ã€‚<br> å¯¹äºè¿™ä¸ªåŸå› ï¼Œé¦–å…ˆè¦åšçš„æ˜¯å°è¯•æ‰å¹³åŒ–ä½ çš„å¯¹è±¡ã€‚éœ€è¦å…³æ³¨çš„æ˜¯ï¼ŒReactå®˜æ–¹æ¨èæ ¹æ®å“ªäº›å€¼å€¾å‘äºä¸€èµ·å˜åŒ–ï¼Œ<a target="_blank" rel="noopener" href="https://links.jianshu.com/go?to=https://reactjs.org/docs/hooks-faq.html%23should-i-use-one-or-many-state-variables">å°†çŠ¶æ€åˆ†å‰²æˆå¤šä¸ªçŠ¶æ€å˜é‡</a>ã€‚<br> å¦‚æœè¿™ä¸ªä¸å¯èƒ½çš„è¯ï¼Œæ¨èä½¿ç”¨ç¬¬ä¸‰æ–¹åº“æ¥å¸®åŠ©ä½ ä½¿ç”¨ä¸å¯å˜å¯¹è±¡ï¼Œä¾‹å¦‚<a target="_blank" rel="noopener" href="https://links.jianshu.com/go?to=https://immutable-js.github.io/immutable-js/">immutable.js</a>æˆ–è€… <a target="_blank" rel="noopener" href="https://links.jianshu.com/go?to=https://blog.logrocket.com/whats-new-in-immer-7-0/">immer</a></p><h3 id="useStateä½¿ç”¨è§„åˆ™"><a href="#useStateä½¿ç”¨è§„åˆ™" class="headerlink" title="useStateä½¿ç”¨è§„åˆ™"></a>useStateä½¿ç”¨è§„åˆ™</h3><p><code>useState</code>å’Œæ‰€æœ‰çš„Hooksä¸€æ ·ï¼Œéƒ½éµå¾ªåŒæ ·çš„è§„åˆ™ï¼š</p><ul><li>åœ¨é¡¶å±‚è°ƒç”¨Hooks</li><li>åœ¨Reactå‡½æ•°ä¸­è°ƒç”¨Hooks</li></ul><p>ç¬¬äºŒä¸ªè§„åˆ™å¾ˆå®¹æ˜“ç†è§£ï¼Œä¸è¦åœ¨ç±»ç»„ä»¶ä¸­ä½¿ç”¨<code>useState</code>ï¼š</p><p><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://upload-images.jianshu.io/upload_images/3126944-a4530b0780431e5e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1090/format/webp" alt="img"></p><p>æˆ–è€…åœ¨å¸¸è§„JSæ–¹æ³•ä¸­ï¼ˆä¸èƒ½åœ¨ä¸€ä¸ªæ–¹æ³•ç»„ä»¶ä¸­è¢«è°ƒç”¨çš„ï¼‰ï¼š</p><p><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://upload-images.jianshu.io/upload_images/3126944-201bb37e65118e0c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1019/format/webp" alt="img"></p><p>å¦‚æœé¡¹ç›®ä¸­æœ‰ESLintçš„è¯ï¼Œ åˆ™å¯ä»¥çœ‹åˆ°å¯¹åº”é”™è¯¯æç¤ºï¼›å¦‚æœæ²¡æœ‰ï¼Œåˆ™å¯ä»¥ä»è¯¥æ–‡æ¡£ä¸­çœ‹åˆ°å‡ºç°çš„<a target="_blank" rel="noopener" href="https://links.jianshu.com/go?to=https://reactjs.org/warnings/invalid-hook-call-warning.html">é”™è¯¯æç¤º</a>ã€‚</p><p>ç¬¬ä¸€ä¸ªè§„åˆ™æŒ‡çš„æ˜¯ï¼šå³ä½¿åœ¨å‡½æ•°ç»„ä»¶å†…éƒ¨ï¼Œä¸èƒ½åœ¨å¾ªç¯ã€æ¡ä»¶æˆ–è€…å†…åµŒæ–¹æ³•ä¸­è°ƒç”¨<code>useState</code>ï¼Œå› ä¸ºReactä¾èµ–äº<code>useState</code>å‡½æ•°è¢«è°ƒç”¨çš„é¡ºåºæ¥è·å–ç‰¹å®šå˜é‡çš„æ­£ç¡®å€¼ã€‚<br> åœ¨è¿™æ–¹é¢ï¼Œå¸¸è§çš„é”™è¯¯æ˜¯ï¼Œåœ¨ifè¯­å¥ä½¿ç”¨<code>useState</code>ï¼ˆå®ƒä»¬ä¸æ˜¯æ¯æ¬¡éƒ½è¢«æ‰§è¡Œçš„ï¼‰ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (condition) &#123; <span class="comment">// æœ‰æ—¶å®ƒä¼šæ‰§è¡Œï¼Œå¯¼è‡´useStateçš„è°ƒç”¨é¡ºåºå‘ç”Ÿå˜åŒ–</span></span><br><span class="line">  <span class="keyword">const</span> [message, setMessage] = <span class="title function_ invoke__">useState</span>( <span class="string">&#x27;&#x27;</span> );</span><br><span class="line">  <span class="title function_ invoke__">setMessage</span>( aMessage );  </span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> [<span class="keyword">list</span>, setList] = <span class="title function_ invoke__">useState</span>( [] );</span><br><span class="line"><span class="title function_ invoke__">setList</span>( [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>] );</span><br></pre></td></tr></table></figure><p>å‡½æ•°ç»„ä»¶ä¸­ä¼šå¤šæ¬¡è°ƒç”¨<code>useState</code>æˆ–è€…å…¶ä»–çš„Hooksã€‚æ¯ä¸ªHookæ˜¯å­˜å‚¨åœ¨é“¾è¡¨ä¸­çš„ï¼Œè€Œä¸”æœ‰ä¸€ä¸ªå˜é‡æ¥è¿½è¸ªå½“å‰æ‰§è¡Œçš„Hookã€‚<br> å½“<code>useState</code>è¢«æ‰§è¡Œæ—¶ï¼Œå½“å‰Hookçš„çŠ¶æ€è¢«è¯»å–ï¼ˆç¬¬ä¸€æ¬¡æ¸²æŸ“æœŸé—´æ˜¯è¢«åˆå§‹åŒ–ï¼‰ï¼Œä¹‹åï¼Œå˜é‡è¢«æ”¹å˜ä¸ºæŒ‡å‘ä¸‹ä¸€ä¸ªHookã€‚<br> è¿™ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆæ€»æ˜¯å§‹ç»ˆä¿æŒHookç›¸åŒçš„è°ƒç”¨é¡ºåºæ˜¯å¾ˆé‡è¦çš„ã€‚å¦åˆ™çš„è¯ï¼ŒçŠ¶æ€å€¼å°±ä¼šå±äºå¦ä¸€ä¸ªçŠ¶æ€å˜é‡ã€‚</p><p>æ€»ä½“æ¥è¯´ï¼Œè¿™å„¿æœ‰ä¸€ä¸ªä¾‹å­æ¥ä¸€æ­¥æ­¥è¯´æ˜å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼š</p><ol><li>Reactåˆå§‹åŒ–Hooké“¾è¡¨ï¼Œå¹¶ä¸”ç”¨ä¸€ä¸ªå˜é‡è¿½è¸ªå½“å‰Hook</li><li>Reacté¦–æ¬¡è°ƒç”¨ä½ çš„ç»„ä»¶</li><li>Reactå‘ç°äº†<code>useState</code>çš„è°ƒç”¨ï¼Œåˆ›å»ºäº†ä¸€ä¸ªæ–°çš„Hookå¯¹è±¡ï¼ˆå¸¦æœ‰åˆå§‹çŠ¶æ€ï¼‰ï¼Œå°†å½“å‰Hookå˜é‡æŒ‡å‘è¯¥Hookå¯¹è±¡ï¼Œå°†è¯¥å¯¹è±¡æ·»åŠ åˆ°Hooksé“¾è¡¨ä¸­ï¼Œç„¶åè¿”å›ä¸€ä¸ªå¸¦æœ‰åˆå§‹å€¼å’Œæ›´æ–°çŠ¶æ€æ–¹æ³•çš„æ•°ç»„</li><li>Reactå‘ç°å¦ä¸€ä¸ª<code>useState</code>çš„è°ƒç”¨ï¼Œé‡å¤ä¸Šé¢çš„æ­¥éª¤ï¼Œå­˜å‚¨æ–°çš„hookå¯¹è±¡ï¼Œæ”¹å˜å½“å‰Hookå˜é‡ã€‚</li><li>ç»„ä»¶çŠ¶æ€å‘ç”Ÿå˜åŒ–</li><li>Reactç»™è¦å¤„ç†çš„é˜Ÿåˆ—å‘é€æ–°çš„çŠ¶æ€æ›´æ–°æ“ä½œï¼ˆæ‰§è¡Œ<code>useState</code>è¿”å›çš„æ–¹æ³•ï¼‰</li><li>Reactå†³å®šç»„ä»¶æ˜¯å¦éœ€è¦é‡æ–°æ¸²æŸ“</li><li>Reacté‡ç½®å½“å‰Hookå˜é‡ï¼Œå¹¶ä¸”è°ƒç”¨ç»„ä»¶</li><li>Reactå‘ç°äº†ä¸€ä¸ª<code>useState</code>çš„è°ƒç”¨ï¼Œä½†æ­¤æ—¶ï¼Œåœ¨Hooksé“¾è¡¨ç¬¬ä¸€ä½ç½®å·²ç»æœ‰ä¸€ä¸ªHookï¼Œå®ƒä»…ä»…æ”¹å˜äº†å½“å‰Hookå˜é‡ï¼Œè¿”å›ä¸€ä¸ªå¸¦çŠ¶æ€å€¼å’Œæ›´æ–°çŠ¶æ€æ–¹æ³•çš„æ•°ç»„</li><li>Reactå‘ç°å¦ä¸€ä¸ª<code>useState</code>çš„è°ƒç”¨ï¼Œå› ä¸ºç¬¬äºŒä¸ªä½ç½®æœ‰ä¸€ä¸ªHookäº†ï¼Œå®ƒå†æ¬¡ä»…ä»…æ”¹å˜äº†å½“å‰Hookå˜é‡ï¼Œè¿”å›ä¸€ä¸ªå¸¦çŠ¶æ€å€¼å’Œæ›´æ–°çŠ¶æ€æ–¹æ³•çš„æ•°ç»„<br> è¿™æ˜¯ä¸€ä¸ªç®€å•çš„useStateå·¥ä½œæµç¨‹ï¼Œå…·ä½“å¯ä»¥çœ‹<a target="_blank" rel="noopener" href="https://links.jianshu.com/go?to=https://github.com/facebook/react/blob/fd557d453d37eab29eca18f0507750ab2093669d/packages/react-reconciler/src/ReactFiberHooks.js">ReactFiberHooksæºç </a></li></ol><h3 id="useReducerHookçš„ä½¿ç”¨"><a href="#useReducerHookçš„ä½¿ç”¨" class="headerlink" title="useReducerHookçš„ä½¿ç”¨"></a><code>useReducer</code>Hookçš„ä½¿ç”¨</h3><p>å¯¹äºå¾ˆå¤šé«˜çº§ä½¿ç”¨æƒ…å†µï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>useReducer</code>Hookæ¥ä»£æ›¿<code>useState</code>ã€‚å½“å¤„ç†å¤æ‚çš„çŠ¶æ€é€»è¾‘æ—¶ï¼Œå®ƒæ˜¯å¾ˆæœ‰ç”¨çš„ã€‚æ¯”å¦‚åŒ…å«å¤šä¸ªå­å€¼æˆ–è€…çŠ¶æ€ä¾èµ–ä¹‹å‰çš„å€¼ã€‚<br> Lookï¼Œçœ‹ä¸‹å¦‚ä½•ä½¿ç”¨<code>useReducer</code>Hookï¼Œ<a target="_blank" rel="noopener" href="https://links.jianshu.com/go?to=https://codesandbox.io/s/quirky-golick-k6lqq?file=/src/UseReducerDemo.js">ç¤ºä¾‹</a>:</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> [state, dispatch] = useReducer(reducer, initialArgument, <span class="keyword">init</span>);</span><br><span class="line"><span class="comment">//useReducerè¿”å›ä¸€ä¸ªå¸¦æœ‰å½“å‰çŠ¶æ€å€¼å’Œdispatchæ–¹æ³•çš„æ•°ç»„ã€‚å¦‚æœä½ ä½¿ç”¨è¿‡Reduxï¼Œè¿™ä¸ªå°±å¾—å¿ƒåº”æ‰‹äº†ã€‚</span></span><br></pre></td></tr></table></figure><p>åœ¨<code>useState</code>ï¼Œä½ è°ƒç”¨æ›´æ–°çŠ¶æ€çš„æ–¹æ³•ï¼Œç„¶è€Œ<code>useReducer</code>ä¸­ï¼Œä½ è°ƒç”¨<code>dispatch</code>æ–¹æ³•ï¼Œç„¶åä¼ é€’ç»™å®ƒä¸€ä¸ªactionï¼Œeg: è‡³å°‘æ˜¯å¸¦æœ‰ä¸€ä¸ª<code>type</code>å±æ€§çš„å¯¹è±¡ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dispatch(&#123;<span class="built_in">type</span>ï¼š<span class="string">&quot;increase&quot;</span>&#125;)</span><br></pre></td></tr></table></figure><p>ä¸€èˆ¬æ¥è®²ï¼Œä¸€ä¸ªactionå¯¹è±¡ä¹Ÿä¼šæœ‰å…¶ä»–çš„å±æ€§ï¼Œeg: <code>&#123;action: &quot;increase&quot;, payload: &quot;10&quot;&#125;</code>ã€‚<br> ç„¶è€Œä¼ é€’ä¸€ä¸ªactionå¯¹è±¡å¹¶ä¸æ˜¯ç»å¯¹çš„ï¼Œå…·ä½“å‚è€ƒ<a target="_blank" rel="noopener" href="https://links.jianshu.com/go?to=https://redux.js.org/">Redux</a></p><h3 id="æ€»ç»“-1"><a href="#æ€»ç»“-1" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p><code>uesState</code>æ˜¯ä¸€ä¸ªHookå‡½æ•°ï¼Œå®ƒè®©ä½ å¯ä»¥åœ¨ç»„ä»¶ä¸­æ‹¥æœ‰çŠ¶æ€å˜é‡ï¼Œä½ å¯ä»¥ç»™è¿™ä¸ªæ–¹æ³•ä¼ é€’åˆå§‹å€¼ï¼Œå¹¶ä¸”è¿”å›ä¸€ä¸ªå½“å‰çŠ¶æ€å€¼çš„å˜é‡ï¼ˆä¸ä¸€å®šæ˜¯åˆå§‹å€¼ï¼‰å’Œå¦ä¸€ä¸ªæ›´æ–°è¯¥å€¼çš„æ–¹æ³•ã€‚</p><p>è¿™å„¿æœ‰ä¸€äº›éœ€è¦è®°ä½çš„å…³é”®çš„ç‚¹ï¼š</p><ul><li>æ›´æ–°æ–¹æ³•ä¸ä¼šç«‹å³æ›´æ–°å€¼</li><li>å¦‚æœä½ éœ€è¦ç”¨åˆ°ä¹‹å‰çš„å€¼æ›´æ–°çŠ¶æ€ï¼Œä½ å¿…é¡»å°†ä¹‹å‰çš„å€¼ä¼ é€’ç»™è¯¥æ–¹æ³•ï¼Œåˆ™å®ƒä¼šè¿”å›ä¸€ä¸ªæ›´æ–°åçš„å€¼ï¼Œeg: <code>setMessage(previousVal =&gt; previousVal + currentVal)</code></li><li>å¦‚æœä½ ä½¿ç”¨åŒæ ·çš„å€¼ä½œä¸ºå½“å‰çŠ¶æ€ï¼Œåˆ™Reactä¸ä¼šè§¦å‘é‡æ–°æ¸²æŸ“ã€‚ï¼ˆReactæ˜¯ç”¨<code>Object.is</code>æ¥åšæ¯”è¾ƒçš„ï¼‰</li><li><code>useState</code>ä¸åƒç±»ç»„ä»¶ä¸­çš„<code>this.setState</code>åˆå¹¶å¯¹è±¡ï¼Œå®ƒæ˜¯ç›´æ¥æ›¿æ¢å¯¹è±¡ã€‚</li><li><code>useState</code>å’Œæ‰€æœ‰çš„hookséµå¾ªç›¸åŒçš„è§„åˆ™ï¼Œç‰¹åˆ«æ˜¯ï¼Œæ³¨æ„è¿™äº›å‡½æ•°çš„è°ƒç”¨é¡ºåºã€‚ï¼ˆå¯ä»¥å€ŸåŠ© <a target="_blank" rel="noopener" href="https://links.jianshu.com/go?to=https://www.npmjs.com/package/eslint-plugin-react-hooks">ESLint plugin</a>ï¼Œå®ƒä¼šå¸®åŠ©æˆ‘ä»¬å¼ºåˆ¶å®æ–½è¿™äº›è§„åˆ™ï¼‰</li></ul><h2 id="React-Native-å±æ€§ã€æ§ä»¶ã€æ ·å¼"><a href="#React-Native-å±æ€§ã€æ§ä»¶ã€æ ·å¼" class="headerlink" title="React-Native-å±æ€§ã€æ§ä»¶ã€æ ·å¼"></a>React-Native-å±æ€§ã€æ§ä»¶ã€æ ·å¼</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * Sample React Native App</span><br><span class="line"> * https://github.com/facebook/react-native</span><br><span class="line"> * @flow</span><br><span class="line"> */</span><br><span class="line"></span><br><span class="line">//PropTypes ä½¿ç”¨å±æ€§æ˜¯å¿…é¡»å¯¼å…¥</span><br><span class="line">import React,&#123; Component , PropTypes &#125; from &#x27;react&#x27;;</span><br><span class="line"></span><br><span class="line">//ä½¿ç”¨æ§ä»¶æ—¶å¿…é¡»å¯¼å…¥,StyleSheetåˆ›å»ºå±æ€§æ˜¯å¿…é¡»å¯¼å…¥</span><br><span class="line">import &#123;AppRegistry, Text , Image , View , StyleSheet&#125; from  &#x27;react-native&#x27;;</span><br><span class="line"></span><br><span class="line">//export default å¿…é¡»å†™ï¼Œå¯¼å‡ºï¼Œå¤–éƒ¨æ‰å¯ä»¥è®¿é—®</span><br><span class="line">export default class test extends Component &#123;</span><br><span class="line"></span><br><span class="line">  render()&#123;//æ‰€å“Ÿçš„ç±»å¿…é¡»æœ‰è‡ªå·±çš„rederæ–¹æ³•ï¼Œç”¨äºè¾“å…¥ç»„ä»¶ï¼Œreturné‡Œé¢å¿…é¡»è¿”å›ä¸€ä¸ªç»„ä»¶,åªèƒ½æ˜¯ä¸€ä¸ªç»„ä»¶ï¼Œå¤šä¸ªç”¨viewåŒ…è£¹</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//åœ¨æ­¤å¯ä»¥å£°æ˜å˜é‡</span><br><span class="line">      let picURL = &#123;//å‚æ•°å¿…é¡»ä¸ºuriï¼Œå…¶ä»–çš„å›¾ç‰‡æ˜¾ç¤ºä¸å‡ºæ¥</span><br><span class="line">        uri:&#x27;https://upload.wikimedia.org/wikipedia/commons/d/de/Bananavarieties.jpg&#x27;</span><br><span class="line">      &#125;;</span><br><span class="line"></span><br><span class="line">      return (</span><br><span class="line">          /*</span><br><span class="line">          * åŠ è½½å›¾ç‰‡</span><br><span class="line">          *</span><br><span class="line">          * åŠ è½½ç½‘ç»œå›¾ç‰‡ï¼Œå¿…é¡»è¦æŒ‡å®šå®½å’Œé«˜ï¼Œä¸ç„¶æ˜¾ç¤ºä¸å‡ºæ¥ï¼Œç½‘ç»œå›¾ç‰‡ä¸ç¡®å®šå›¾ç‰‡çš„size</span><br><span class="line">          *</span><br><span class="line">          * åŠ è½½æœ¬åœ°å›¾ç‰‡ï¼Œä¸éœ€è¦æŒ‡å®šå®½å’Œé«˜ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥è‡ªå®šä¹‰ï¼Œå› ä¸ºæœ¬åœ°å›¾ç‰‡ç¡®å®šäº†å›¾ç‰‡çš„size</span><br><span class="line">          * */</span><br><span class="line"></span><br><span class="line">          //ä½¿ç”¨è‡ªå®šä¹‰æ§ä»¶æ—¶ï¼Œåªç»™å®ƒçš„å±æ€§èµ‹å€¼å³å¯</span><br><span class="line"></span><br><span class="line">          &lt;View style=&#123;ViewStyle.myStyleSelect&#125;&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            &lt;Image source=&#123;picURL&#125; style=&#123;&#123;width: 100, height:100&#125;&#125;&gt;&lt;/Image&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            &lt;Image source=&#123;require(&#x27;./image/cat1.jpg&#x27;)&#125; style=&#123;ViewStyle.myStyleSelect1&#125;&gt;&lt;/Image&gt;</span><br><span class="line"></span><br><span class="line">            &lt;Greetings abc=&quot;jick&quot;/&gt;</span><br><span class="line">            &lt;Greetings abc=&quot;luch&quot;/&gt;</span><br><span class="line">            &lt;Greetings abc=&quot;math&quot;/&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            &lt;Person name=&#123;&#x27;äºå°å®&#x27;&#125; age=&#123;23&#125;/&gt;</span><br><span class="line">            &lt;Person name=&#123;&#x27;æå¤§å¤´&#x27;&#125; age=&#123;34&#125;/&gt;</span><br><span class="line">          &lt;/View&gt;</span><br><span class="line">      );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//è‡ªå®šä¹‰æ§ä»¶ï¼Œæ˜¾ç¤ºæ ¼å¼ç»Ÿä¸€&#x27;hello+å­—ç¬¦ä¸²&#x27;ï¼Œæ‰€ä»¥å¯ä»¥è‡ªå®šä¹‰ä¸€ä¸ªviewè‡ªå¸¦helloï¼Œå¡«å…¥åé¢çš„å­—ç¬¦ä¸²å³å¯</span><br><span class="line">class Greetings extends Component &#123;</span><br><span class="line">  render()&#123;</span><br><span class="line"></span><br><span class="line">    return(</span><br><span class="line"></span><br><span class="line">      &lt;Text&gt;Hello &#123;this.props.abc&#125; !&lt;/Text&gt;//hello+å±æ€§å­—ç¬¦ä¸²</span><br><span class="line"></span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//è‡ªå®šä¹‰æ§ä»¶ï¼Œå£°æ˜ä¸¤ä¸ªå±æ€§nameå’Œageï¼Œè¿”å›æ–‡æœ¬</span><br><span class="line">class Person extends Component &#123;</span><br><span class="line"></span><br><span class="line">//å£°æ˜å±æ€§çš„æ–¹æ³•</span><br><span class="line">    static propTypes=&#123;</span><br><span class="line"></span><br><span class="line">        name :PropTypes.string,//æŒ‡å®šå±æ€§çš„ç±»å‹</span><br><span class="line">        age  :PropTypes.number</span><br><span class="line"></span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    render()&#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">      return(</span><br><span class="line">          &lt;Text style=&#123;&#123;fontWeight:&#x27;bold&#x27;,lineHeight:30&#125;&#125;&gt;å§“åï¼š&#123;this.props.name&#125;;å¹´é¾„ï¼š&#123;this.props.age&#125;&lt;/Text&gt;</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//è‡ªå®šä¹‰æ ·å¼ï¼Œé‡Œé¢å¯ä»¥æŒ‡å®šå¤šä¸ªæ ·å¼ï¼Œä½¿ç”¨æ—¶ ViewStyle.myStyle å³å¯</span><br><span class="line">var ViewStyle =StyleSheet.create(&#123;</span><br><span class="line"></span><br><span class="line">    myStyle:&#123;</span><br><span class="line">        alignItems:&#x27;center&#x27;,</span><br><span class="line">    &#125;,</span><br><span class="line">    myStyleSelect:&#123;</span><br><span class="line">        alignItems:&#x27;center&#x27;,</span><br><span class="line">        backgroundColor:&#x27;red&#x27;,</span><br><span class="line">        borderWidth:2,</span><br><span class="line">        borderColor:&#x27;#00ff00&#x27;,</span><br><span class="line">        borderStyle:&#x27;dotted&#x27;,</span><br><span class="line"></span><br><span class="line">    &#125;,</span><br><span class="line">    myStyleSelect1:&#123;</span><br><span class="line">        bottom:20,</span><br><span class="line">        left:20,</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">/*</span><br><span class="line">*ReactNativeä¸­èƒ½ä½¿ç”¨çš„cssæ ·å¼</span><br><span class="line"> Valid style props: [</span><br><span class="line"></span><br><span class="line"> &quot;alignItems&quot;,å±…ä¸­å¯¹é½å¼¹æ€§ç›’çš„å„é¡¹ &lt;div&gt; å…ƒç´ </span><br><span class="line"> ä¾‹ï¼šalignItems:&#x27;center&#x27;,</span><br><span class="line"> -&gt; stretch(é¡¹ç›®è¢«æ‹‰ä¼¸ä»¥é€‚åº”å®¹å™¨)</span><br><span class="line"> -&gt; center(é¡¹ç›®ä½äºå®¹å™¨çš„ä¸­å¿ƒ)</span><br><span class="line"> -&gt; flex-start(é¡¹ç›®ä½äºå®¹å™¨çš„å¼€å¤´)</span><br><span class="line"> -&gt; flex-end(é¡¹ç›®ä½äºå®¹å™¨çš„ç»“å°¾)</span><br><span class="line"> -&gt; baseline(é¡¹ç›®ä½äºå®¹å™¨çš„åŸºçº¿ä¸Š)</span><br><span class="line"> -&gt; initial(è®¾ç½®è¯¥å±æ€§ä¸ºå®ƒçš„é»˜è®¤å€¼)</span><br><span class="line"> -&gt; inherit(ä»çˆ¶å…ƒç´ ç»§æ‰¿è¯¥å±æ€§)</span><br><span class="line"></span><br><span class="line"> &quot;alignSelf&quot;,å±…ä¸­å¯¹é½å¼¹æ€§å¯¹è±¡å…ƒç´ å†…çš„æŸä¸ªé¡¹</span><br><span class="line"> ä¾‹ï¼šalignSelf:&#x27;center&#x27;,</span><br><span class="line"> -&gt; auto(é»˜è®¤å€¼ã€‚å…ƒç´ ç»§æ‰¿äº†å®ƒçš„çˆ¶å®¹å™¨çš„ align-items å±æ€§ã€‚å¦‚æœæ²¡æœ‰çˆ¶å®¹å™¨åˆ™ä¸º &quot;stretch&quot;)</span><br><span class="line"> -&gt; stretch(é¡¹ç›®è¢«æ‹‰ä¼¸ä»¥é€‚åº”å®¹å™¨)</span><br><span class="line"> -&gt; center(é¡¹ç›®ä½äºå®¹å™¨çš„ä¸­å¿ƒ)</span><br><span class="line"> -&gt; flex-start(é¡¹ç›®ä½äºå®¹å™¨çš„å¼€å¤´)</span><br><span class="line"> -&gt; flex-end(é¡¹ç›®ä½äºå®¹å™¨çš„ç»“å°¾)</span><br><span class="line"> -&gt; baseline(é¡¹ç›®ä½äºå®¹å™¨çš„åŸºçº¿ä¸Š)</span><br><span class="line"> -&gt; initial(è®¾ç½®è¯¥å±æ€§ä¸ºå®ƒçš„é»˜è®¤å€¼)</span><br><span class="line"> -&gt; inherit(ä»çˆ¶å…ƒç´ ç»§æ‰¿è¯¥å±æ€§)</span><br><span class="line"></span><br><span class="line"> &quot;backfaceVisibility&quot;,å½“å…ƒç´ ä¸é¢å‘å±å¹•æ—¶æ˜¯å¦å¯è§</span><br><span class="line"> ä¾‹ï¼šbackfaceVisibility:&#x27;visible&#x27;</span><br><span class="line"> -&gt; visible (èƒŒé¢æ˜¯å¯è§çš„)</span><br><span class="line"> -&gt; hidden  (èƒŒé¢æ˜¯ä¸å¯è§çš„)</span><br><span class="line"></span><br><span class="line"> &quot;backgroundColor&quot;,èƒŒæ™¯è‰²</span><br><span class="line"> ä¾‹ï¼šbackgroundColor:&#x27;red&#x27;</span><br><span class="line"> ä¾‹ï¼šbackgroundColor:&#x27;#cccccc&#x27;</span><br><span class="line"> -&gt; color   (æŒ‡å®šèƒŒæ™¯é¢œè‰²ã€‚åœ¨CSSé¢œè‰²å€¼è¿‘å¯èƒ½çš„å¯»æ‰¾ä¸€ä¸ªé¢œè‰²å€¼çš„å®Œæ•´åˆ—è¡¨)</span><br><span class="line"> -&gt; transparent (æŒ‡å®šèƒŒæ™¯é¢œè‰²åº”è¯¥æ˜¯é€æ˜çš„ã€‚è¿™æ˜¯é»˜è®¤)</span><br><span class="line"> -&gt; inherit (æŒ‡å®šèƒŒæ™¯é¢œè‰²ï¼Œåº”è¯¥ä»çˆ¶å…ƒç´ ç»§æ‰¿)</span><br><span class="line"></span><br><span class="line"> &quot;borderBottomColor&quot;,åº•éƒ¨è¾¹æ¡†é¢œè‰²</span><br><span class="line"> ä¾‹ï¼šborderBottomColor:&#x27;red&#x27;</span><br><span class="line"> ä¾‹ï¼šborderBottomColor:&#x27;#cccccc&#x27;</span><br><span class="line"> -&gt; color   (æŒ‡å®šèƒŒæ™¯é¢œè‰²ã€‚åœ¨CSS é¢œè‰²å€¼ æŸ¥æ‰¾é¢œè‰²å€¼çš„å®Œæ•´åˆ—è¡¨)</span><br><span class="line"> -&gt; transparent (æŒ‡å®šè¾¹æ¡†çš„é¢œè‰²åº”è¯¥æ˜¯é€æ˜çš„ã€‚è¿™æ˜¯é»˜è®¤)</span><br><span class="line"> - &gt;inherit (æŒ‡å®šè¾¹æ¡†çš„é¢œè‰²ï¼Œåº”è¯¥ä»çˆ¶å…ƒç´ ç»§æ‰¿)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> &quot;borderBottomLeftRadius&quot;,å·¦ä¸‹è§’æ·»åŠ åœ†è§’è¾¹æ¡†</span><br><span class="line"> ä¾‹ï¼šborderBottomLeftRadius:10</span><br><span class="line"></span><br><span class="line"> &quot;borderBottomRightRadius&quot;,å³ä¸‹è§’æ·»åŠ åœ†è§’è¾¹æ¡†</span><br><span class="line"> ä¾‹ï¼šborderBottomRightRadius:10</span><br><span class="line"></span><br><span class="line"> &quot;borderBottomWidth&quot;,åº•éƒ¨è¾¹æ¡†å®½åº¦</span><br><span class="line"> ä¾‹ï¼šborderBottomWidth:8</span><br><span class="line"></span><br><span class="line"> &quot;borderColor&quot;,å››ä¸ªè¾¹æ¡†é¢œè‰²</span><br><span class="line"> ä¾‹ï¼šborderColor:&#x27;#00ff00&#x27;</span><br><span class="line"></span><br><span class="line"> &quot;borderLeftColor&quot;,å·¦è¾¹æ¡†é¢œè‰²</span><br><span class="line"> ä¾‹ï¼šborderLeftColor:&#x27;yellow&#x27;</span><br><span class="line"></span><br><span class="line"> &quot;borderLeftWidth&quot;,å·¦è¾¹æ¡†å®½åº¦</span><br><span class="line"> ä¾‹ï¼šborderLeftWidth:10</span><br><span class="line"></span><br><span class="line"> &quot;borderRadius&quot;,å››è§’åœ†è§’å¼§åº¦</span><br><span class="line"> ä¾‹ï¼šborderRadius:15</span><br><span class="line"></span><br><span class="line"> &quot;borderRightColor&quot;,å³è¾¹æ¡†é¢œè‰²</span><br><span class="line"> ä¾‹ï¼šä¾‹ï¼šborderRightColor:&#x27;yellow&#x27;</span><br><span class="line"></span><br><span class="line"> &quot;borderRightWidth&quot;,å³è¾¹æ¡†å®½åº¦</span><br><span class="line"> ä¾‹ï¼šborderRightWidth:10</span><br><span class="line"></span><br><span class="line"> &quot;borderStyle&quot;,å››ä¸ªè¾¹æ¡†çš„æ ·å¼</span><br><span class="line"> ä¾‹ï¼šborderStyle:&#x27;dotted&#x27;</span><br><span class="line"> -&gt; none    å®šä¹‰æ— è¾¹æ¡†ã€‚</span><br><span class="line"> -&gt; hidden  ä¸ &quot;none&quot; ç›¸åŒã€‚ä¸è¿‡åº”ç”¨äºè¡¨æ—¶é™¤å¤–ï¼Œå¯¹äºè¡¨ï¼Œhidden ç”¨äºè§£å†³è¾¹æ¡†å†²çªã€‚</span><br><span class="line"> -&gt; dotted  å®šä¹‰ç‚¹çŠ¶è¾¹æ¡†ã€‚åœ¨å¤§å¤šæ•°æµè§ˆå™¨ä¸­å‘ˆç°ä¸ºå®çº¿ã€‚</span><br><span class="line"> -&gt; dashed  å®šä¹‰è™šçº¿ã€‚åœ¨å¤§å¤šæ•°æµè§ˆå™¨ä¸­å‘ˆç°ä¸ºå®çº¿ã€‚</span><br><span class="line"> -&gt; solid   å®šä¹‰å®çº¿ã€‚</span><br><span class="line"> -&gt; double  å®šä¹‰åŒçº¿ã€‚åŒçº¿çš„å®½åº¦ç­‰äº border-width çš„å€¼ã€‚</span><br><span class="line"> -&gt; groove  å®šä¹‰ 3D å‡¹æ§½è¾¹æ¡†ã€‚å…¶æ•ˆæœå–å†³äº border-color çš„å€¼ã€‚</span><br><span class="line"> -&gt; ridge   å®šä¹‰ 3D å„çŠ¶è¾¹æ¡†ã€‚å…¶æ•ˆæœå–å†³äº border-color çš„å€¼ã€‚</span><br><span class="line"> -&gt; inset   å®šä¹‰ 3D inset è¾¹æ¡†ã€‚å…¶æ•ˆæœå–å†³äº border-color çš„å€¼ã€‚</span><br><span class="line"> -&gt; outset  å®šä¹‰ 3D outset è¾¹æ¡†ã€‚å…¶æ•ˆæœå–å†³äº border-color çš„å€¼ã€‚</span><br><span class="line"> -&gt; inherit è§„å®šåº”è¯¥ä»çˆ¶å…ƒç´ ç»§æ‰¿è¾¹æ¡†æ ·å¼ã€‚</span><br><span class="line"></span><br><span class="line"> &quot;borderTopColor&quot;,ä¸Šè¾¹æ¡†é¢œè‰²</span><br><span class="line"> ä¾‹ï¼šborderTopColorï¼š&#x27;red&#x27;</span><br><span class="line"></span><br><span class="line"> &quot;borderTopLeftRadius&quot;,å·¦ä¸Šè§’åœ†è§’å¼§åº¦</span><br><span class="line"> ä¾‹ï¼šborderTopLeftRadiusï¼š3</span><br><span class="line"></span><br><span class="line"> &quot;borderTopRightRadius&quot;,å³ä¸Šè§’åœ†è§’å¼§åº¦</span><br><span class="line"> ä¾‹ï¼šborderTopRightRadiusï¼š4</span><br><span class="line"></span><br><span class="line"> &quot;borderTopWidth&quot;,é¡¶éƒ¨è¾¹æ¡†å®½åº¦</span><br><span class="line"> ä¾‹ï¼šborderTopWidthï¼š13</span><br><span class="line"></span><br><span class="line"> &quot;borderWidth&quot;,å››ä¸ªè¾¹æ¡†çš„å®½åº¦</span><br><span class="line"> ä¾‹ï¼šborderWidthï¼š2</span><br><span class="line"></span><br><span class="line"> &quot;bottom&quot;,å›¾åƒçš„åº•éƒ¨è¾¹ç¼˜</span><br><span class="line"> ä¾‹ï¼šbottom:20</span><br><span class="line"></span><br><span class="line"> &quot;color&quot;,é¢œè‰²</span><br><span class="line"> ä¾‹ï¼šcolor:&#x27;red&#x27;</span><br><span class="line"></span><br><span class="line"> &quot;elevation&quot;,Zè½´ï¼Œå¯äº§ç”Ÿç«‹ä½“æ•ˆæœ</span><br><span class="line"> ä¾‹ï¼šelevation:1</span><br><span class="line"></span><br><span class="line"> &quot;flex&quot;,è®©æ‰€æœ‰å¼¹æ€§ç›’æ¨¡å‹å¯¹è±¡çš„å­å…ƒç´ éƒ½æœ‰ç›¸åŒçš„é•¿åº¦ï¼Œå¿½ç•¥å®ƒä»¬å†…éƒ¨çš„å†…å®¹</span><br><span class="line"> ä¾‹ï¼šflex:1</span><br><span class="line"></span><br><span class="line"> &quot;flexDirection&quot;,è®¾ç½® &lt;div&gt; å…ƒç´ å†…å¼¹æ€§ç›’å…ƒç´ çš„æ–¹å‘ä¸ºç›¸åçš„é¡ºåº</span><br><span class="line"> ä¾‹ï¼šflexDirection:&#x27;column&#x27;</span><br><span class="line"> -&gt; row ((é»˜è®¤å€¼ã€‚çµæ´»çš„é¡¹ç›®å°†æ°´å¹³æ˜¾ç¤ºï¼Œæ­£å¦‚ä¸€ä¸ªè¡Œä¸€æ ·)</span><br><span class="line"> -&gt; row-reverse (ä¸ row ç›¸åŒï¼Œä½†æ˜¯ä»¥ç›¸åçš„é¡ºåº)</span><br><span class="line"> -&gt; column  (çµæ´»çš„é¡¹ç›®å°†å‚ç›´æ˜¾ç¤ºï¼Œæ­£å¦‚ä¸€ä¸ªåˆ—ä¸€æ ·)</span><br><span class="line"> -&gt; column-reverse  (ä¸ column ç›¸åŒï¼Œä½†æ˜¯ä»¥ç›¸åçš„é¡ºåº)</span><br><span class="line"> -&gt; initial (è®¾ç½®è¯¥å±æ€§ä¸ºå®ƒçš„é»˜è®¤å€¼ã€‚è¯·å‚é˜… initial)</span><br><span class="line"> -&gt; inherit (ä»çˆ¶å…ƒç´ ç»§æ‰¿è¯¥å±æ€§ã€‚è¯·å‚é˜… inherit)</span><br><span class="line"></span><br><span class="line"> &quot;flexWrap&quot;,è®©å¼¹æ€§ç›’å…ƒç´ åœ¨å¿…è¦çš„æ—¶å€™æ‹†è¡Œ</span><br><span class="line"> ä¾‹ï¼šflexWrap:&#x27;wrap&#x27;</span><br><span class="line"> -&gt; nowrap  (é»˜è®¤å€¼ã€‚è§„å®šçµæ´»çš„é¡¹ç›®ä¸æ‹†è¡Œæˆ–ä¸æ‹†åˆ—)</span><br><span class="line"> -&gt; wrap    (è§„å®šçµæ´»çš„é¡¹ç›®åœ¨å¿…è¦çš„æ—¶å€™æ‹†è¡Œæˆ–æ‹†åˆ—)</span><br><span class="line"> -&gt; wrap-reverse    (è§„å®šçµæ´»çš„é¡¹ç›®åœ¨å¿…è¦çš„æ—¶å€™æ‹†è¡Œæˆ–æ‹†åˆ—ï¼Œä½†æ˜¯ä»¥ç›¸åçš„é¡ºåº)</span><br><span class="line"> -&gt; initial (è®¾ç½®è¯¥å±æ€§ä¸ºå®ƒçš„é»˜è®¤å€¼ã€‚è¯·å‚é˜… initial)</span><br><span class="line"> -&gt; inherit (ä»çˆ¶å…ƒç´ ç»§æ‰¿è¯¥å±æ€§ã€‚è¯·å‚é˜… inherit)</span><br><span class="line"></span><br><span class="line"> &quot;fontFamily&quot;,å­—ä½“</span><br><span class="line"> ä¾‹ï¼šfontFamily:&#x27;courier&#x27;</span><br><span class="line"></span><br><span class="line"> &quot;fontSize&quot;,å­—ä½“å¤§å°</span><br><span class="line"> ä¾‹ï¼šfontSize:20</span><br><span class="line"></span><br><span class="line"> &quot;fontStyle&quot;,</span><br><span class="line"> ä¾‹ï¼šfontStyle:&#x27;italic&#x27;</span><br><span class="line"> -&gt; normal  é»˜è®¤å€¼ã€‚æµè§ˆå™¨æ˜¾ç¤ºä¸€ä¸ªæ ‡å‡†çš„å­—ä½“æ ·å¼ã€‚</span><br><span class="line"> -&gt; italic  æµè§ˆå™¨ä¼šæ˜¾ç¤ºä¸€ä¸ªæ–œä½“çš„å­—ä½“æ ·å¼ã€‚</span><br><span class="line"> -&gt; oblique æµè§ˆå™¨ä¼šæ˜¾ç¤ºä¸€ä¸ªå€¾æ–œçš„å­—ä½“æ ·å¼</span><br><span class="line"></span><br><span class="line"> &quot;fontWeight&quot;,æ–‡æœ¬çš„ç²—ç»†</span><br><span class="line"> ä¾‹ï¼šfontWeight:&#x27;bold&#x27;</span><br><span class="line"> -&gt; normal  (é»˜è®¤å€¼ã€‚å®šä¹‰æ ‡å‡†çš„å­—ç¬¦)</span><br><span class="line"> -&gt; bold    (å®šä¹‰ç²—ä½“å­—ç¬¦)</span><br><span class="line"> -&gt; bolder  (å®šä¹‰æ›´ç²—çš„å­—ç¬¦)</span><br><span class="line"> -&gt; lighter (å®šä¹‰æ›´ç»†çš„å­—ç¬¦)</span><br><span class="line"> -&gt; 100    (å®šä¹‰ç”±ç²—åˆ°ç»†çš„å­—ç¬¦ã€‚400 ç­‰åŒäº normalï¼Œè€Œ 700 ç­‰åŒäº bold)</span><br><span class="line"> -&gt; 200</span><br><span class="line"> -&gt; 300</span><br><span class="line"> -&gt; 400</span><br><span class="line"> -&gt; 500</span><br><span class="line"> -&gt; 600</span><br><span class="line"> -&gt; 700</span><br><span class="line"> -&gt; 800</span><br><span class="line"> -&gt; 900</span><br><span class="line"></span><br><span class="line"> &quot;height&quot;,è®¾ç½®å…ƒç´ çš„é«˜åº¦</span><br><span class="line"> ä¾‹ï¼šheight:200</span><br><span class="line"></span><br><span class="line"> &quot;justifyContent&quot;,åœ¨å¼¹æ€§ç›’å¯¹è±¡çš„å…ƒç´ ä¸­çš„å„é¡¹å‘¨å›´ç•™æœ‰ç©ºç™½</span><br><span class="line"> ä¾‹ï¼šjustifyContent:&#x27;space-between&#x27;</span><br><span class="line"> -&gt; flex-start  (é»˜è®¤å€¼ã€‚é¡¹ç›®ä½äºå®¹å™¨çš„å¼€å¤´)</span><br><span class="line"> -&gt; flex-end    (é¡¹ç›®ä½äºå®¹å™¨çš„ç»“å°¾)</span><br><span class="line"> -&gt; center  (é¡¹ç›®ä½äºå®¹å™¨çš„ä¸­å¿ƒ)</span><br><span class="line"> -&gt; space-between   (é¡¹ç›®ä½äºå„è¡Œä¹‹é—´ç•™æœ‰ç©ºç™½çš„å®¹å™¨å†…)</span><br><span class="line"> -&gt; space-around    (é¡¹ç›®ä½äºå„è¡Œä¹‹å‰ã€ä¹‹é—´ã€ä¹‹åéƒ½ç•™æœ‰ç©ºç™½çš„å®¹å™¨å†…)</span><br><span class="line"></span><br><span class="line"> &quot;left&quot;,æŠŠå›¾åƒçš„å·¦è¾¹ç¼˜è®¾ç½®åœ¨å…¶åŒ…å«å…ƒç´ å·¦è¾¹ç¼˜å‘å³5åƒç´ çš„ä½ç½®</span><br><span class="line"> ä¾‹ï¼šleft:20</span><br><span class="line"></span><br><span class="line"> &quot;letterSpacing&quot;,å­—æ¯é—´è·</span><br><span class="line"> ä¾‹ï¼šletterSpacing:20</span><br><span class="line"></span><br><span class="line"> &quot;lineHeight&quot;,è¡Œé«˜</span><br><span class="line"> ä¾‹ï¼šlineHeight:30</span><br><span class="line"></span><br><span class="line"> &quot;margin&quot;,å…ƒç´ çš„æ‰€æœ‰å››ä¸ªè¾¹è·</span><br><span class="line"> ä¾‹ï¼š</span><br><span class="line"></span><br><span class="line"> &quot;marginBottom&quot;,ä¸‹è¾¹è·</span><br><span class="line"> ä¾‹ï¼šmarginBottom:50</span><br><span class="line"></span><br><span class="line"> &quot;marginHorizontal&quot;,æ°´å¹³é—´è·ï¼Œå³å·¦è¾¹è·å’Œå³è¾¹è·</span><br><span class="line"> ä¾‹ï¼šmarginHorizontal:10</span><br><span class="line"></span><br><span class="line"> &quot;marginLeft&quot;,å·¦è¾¹è·</span><br><span class="line"> ä¾‹ï¼šmarginLeft:50</span><br><span class="line"></span><br><span class="line"> &quot;marginRight&quot;,å³è¾¹è·</span><br><span class="line"> ä¾‹ï¼šmarginRight:50</span><br><span class="line"></span><br><span class="line"> &quot;marginTop&quot;,ä¸Šè¾¹è·</span><br><span class="line"> ä¾‹ï¼šmarginTop:50</span><br><span class="line"></span><br><span class="line"> &quot;marginVertical&quot;,å‚ç›´é—´è·ï¼Œå³ä¸Šè¾¹è·å’Œä¸‹è¾¹è·</span><br><span class="line"> ä¾‹ï¼šmarginVertical:10</span><br><span class="line"></span><br><span class="line"> &quot;opacity&quot;,é€æ˜åº¦çº§åˆ«</span><br><span class="line"> ä¾‹ï¼šopacityï¼š0.</span><br></pre></td></tr></table></figure><h1 id="WebViewçš„ä½¿ç”¨-æ··åˆhtmlå¼€å‘"><a href="#WebViewçš„ä½¿ç”¨-æ··åˆhtmlå¼€å‘" class="headerlink" title="WebViewçš„ä½¿ç”¨[æ··åˆhtmlå¼€å‘]"></a>WebViewçš„ä½¿ç”¨[æ··åˆhtmlå¼€å‘]</h1><h3 id="å®‰è£…WebView"><a href="#å®‰è£…WebView" class="headerlink" title="å®‰è£…WebView"></a>å®‰è£…WebView</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">yarn add react-native-webview</span><br><span class="line"> </span><br><span class="line">æˆ–è€…</span><br><span class="line"> </span><br><span class="line">npm install --save react-native-webview</span><br></pre></td></tr></table></figure><p>WebView ç»„ä»¶ä»‹ç»</p><p>ä½¿ç”¨ WebView ç»„ä»¶å¯é€šè¿‡ url æ¥åŠ è½½æ˜¾ç¤ºä¸€ä¸ªç½‘é¡µï¼Œä¹Ÿå¯ä»¥ä¼ å…¥ä¸€æ®µ html ä»£ç æ¥æ˜¾ç¤ºã€‚ä¸‹é¢å¯¹å…¶ä¸»è¦å±æ€§å’Œæ–¹æ³•è¿›è¡Œä»‹ç»ã€‚</p><ol><li>ä¸»è¦å±æ€§</li></ol><p><code>source</code>ï¼šåœ¨ WebView ä¸­è½½å…¥ä¸€æ®µé™æ€çš„ html ä»£ç æˆ–æ˜¯ä¸€ä¸ª urlï¼ˆè¿˜å¯ä»¥é™„å¸¦ä¸€äº› header é€‰é¡¹ï¼‰ï¼›<br><code>automaticallyAdjustContentInsets</code>ï¼šè®¾ç½®æ˜¯å¦è‡ªåŠ¨è°ƒæ•´å†…å®¹ã€‚æ ¼å¼ï¼šboolï¼›<br><code>contentInset</code>ï¼šè®¾ç½®å†…å®¹æ‰€å çš„å°ºå¯¸å¤§å°ã€‚æ ¼å¼ï¼š{top:number,left:number,bottom:number,right:number}ï¼›<br><code>injectJavaScript</code>ï¼šå½“ç½‘é¡µåŠ è½½ä¹‹å‰æ³¨å…¥ä¸€æ®µ js ä»£ç ã€‚å…¶å€¼æ˜¯å­—ç¬¦ä¸²å½¢å¼ã€‚<br><code>startInLoadingState</code>ï¼šæ˜¯å¦å¼€å¯é¡µé¢åŠ è½½çš„çŠ¶æ€ï¼Œå…¶å€¼ä¸º true æˆ–è€… falseã€‚<br><code>bouncesï¼ˆä»…iOSï¼‰</code>ï¼šå›å¼¹ç‰¹æ€§ã€‚é»˜è®¤ä¸º trueã€‚å¦‚æœè®¾ç½®ä¸º falseï¼Œåˆ™å†…å®¹æ‹‰åˆ°åº•éƒ¨æˆ–è€…å¤´éƒ¨éƒ½ä¸å›å¼¹ã€‚<br><code>scalesPageToFitï¼ˆä»…iOSï¼‰</code>ï¼šç”¨äºè®¾ç½®ç½‘é¡µæ˜¯å¦ç¼©æ”¾è‡ªé€‚åº”åˆ°æ•´ä¸ªå±å¹•è§†å›¾ï¼Œä»¥åŠç”¨æˆ·æ˜¯å¦å¯ä»¥æ”¹å˜ç¼©æ”¾é¡µé¢ã€‚<br><code>scrollEnabledï¼ˆä»…iOSï¼‰</code>ï¼šç”¨äºè®¾ç½®æ˜¯å¦å¼€å¯é¡µé¢æ»šåŠ¨ã€‚<br><code>domStorageEnabledï¼ˆä»…Androidï¼‰</code>ï¼šç”¨äºæ§åˆ¶æ˜¯å¦å¼€å¯ DOM Storageï¼ˆå­˜å‚¨ï¼‰ã€‚<br><code>javaScriptEnabledï¼ˆä»…Androidï¼‰</code>ï¼šæ˜¯å¦å¼€å¯ JavaScriptï¼Œåœ¨ iOS ä¸­çš„ WebView æ˜¯é»˜è®¤å¼€å¯çš„ã€‚</p><ol start="2"><li>ä¸»è¦æ–¹æ³•</li></ol><p><code>onNavigationStateChange</code>ï¼šå½“å¯¼èˆªçŠ¶æ€å‘ç”Ÿå˜åŒ–çš„æ—¶å€™è°ƒç”¨ã€‚<br><code>onLoadStart</code>ï¼šå½“ç½‘é¡µå¼€å§‹åŠ è½½çš„æ—¶å€™è°ƒç”¨ã€‚<br><code>onError</code>ï¼šå½“ç½‘é¡µåŠ è½½å¤±è´¥çš„æ—¶å€™è°ƒç”¨ã€‚<br><code>onLoad</code>ï¼šå½“ç½‘é¡µåŠ è½½ç»“æŸçš„æ—¶å€™è°ƒç”¨ã€‚<br><code>onLoadEnd</code>ï¼šå½“ç½‘é¡µåŠ è½½ç»“æŸè°ƒç”¨ï¼Œä¸ç®¡æ˜¯æˆåŠŸè¿˜æ˜¯å¤±è´¥ã€‚<br><code>renderLoading</code>ï¼šWebViewç»„ä»¶æ­£åœ¨æ¸²æŸ“é¡µé¢æ—¶è§¦å‘çš„å‡½æ•°ï¼Œåªæœ‰ startInLoadingState ä¸º true æ—¶è¯¥å‡½æ•°æ‰èµ·ä½œç”¨ã€‚<br><code>renderError</code>ï¼šç›‘å¬æ¸²æŸ“é¡µé¢å‡ºé”™å›è°ƒå‡½æ•°ã€‚<br><code>onShouldStartLoadWithRequestï¼ˆä»…iOSï¼‰</code>ï¼šè¯¥æ–¹æ³•å…è®¸æ‹¦æˆª WebView åŠ è½½çš„ URL åœ°å€ï¼Œè¿›è¡Œè‡ªå®šä¹‰å¤„ç†ã€‚è¯¥æ–¹æ³•é€šè¿‡è¿”å› true æˆ–è€… false æ¥å†³å®šæ˜¯å¦ç»§ç»­åŠ è½½è¯¥æ‹¦æˆªåˆ°è¯·æ±‚ã€‚<br><code>onMessage</code>ï¼šåœ¨webViewå†…éƒ¨ç½‘é¡µä¸­ï¼Œè°ƒç”¨window.postMessageå¯ä»¥è§¦å‘æ­¤å±æ€§å¯¹åº”çš„å‡½æ•°ï¼Œé€šè¿‡<code>event.nativeEvent.data</code>è·å–æ¥æ”¶åˆ°çš„æ•°æ®ï¼Œå®ç°ç½‘é¡µå’ŒRNä¹‹é—´çš„æ•°æ®ä¼ é€’ã€‚<br><code>injectJavaScript</code>ï¼šå‡½æ•°æ¥å—ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¯¥å­—ç¬¦ä¸²å°†ä¼ é€’ç»™WebViewï¼Œå¹¶ç«‹å³æ‰§è¡Œä¸ºJavaScriptã€‚</p><h3 id="é€šè¿‡-url-åœ°å€åŠ è½½ç½‘é¡µ"><a href="#é€šè¿‡-url-åœ°å€åŠ è½½ç½‘é¡µ" class="headerlink" title="é€šè¿‡ url åœ°å€åŠ è½½ç½‘é¡µ"></a>é€šè¿‡ url åœ°å€åŠ è½½ç½‘é¡µ</h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123;<span class="title class_">Component</span>&#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">    <span class="title class_">AppRegistry</span>,</span><br><span class="line">    <span class="title class_">StyleSheet</span>,</span><br><span class="line">    <span class="title class_">Dimensions</span>,</span><br><span class="line">    <span class="title class_">Text</span>,</span><br><span class="line">    <span class="title class_">View</span>,</span><br><span class="line">    <span class="title class_">WebView</span></span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&#x27;react-native&#x27;</span>;</span><br><span class="line"> </span><br><span class="line"><span class="comment">//è·å–è®¾å¤‡çš„å®½åº¦å’Œé«˜åº¦</span></span><br><span class="line"><span class="keyword">var</span> &#123;</span><br><span class="line">    <span class="attr">height</span>: deviceHeight,</span><br><span class="line">    <span class="attr">width</span>: deviceWidth</span><br><span class="line">&#125; = <span class="title class_">Dimensions</span>.<span class="title function_">get</span>(<span class="string">&#x27;window&#x27;</span>);</span><br><span class="line"> </span><br><span class="line"><span class="comment">//é»˜è®¤åº”ç”¨çš„å®¹å™¨ç»„ä»¶</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">App</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Component</span> &#123;</span><br><span class="line">    <span class="comment">//æ¸²æŸ“</span></span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            <span class="language-xml"><span class="tag">&lt;<span class="name">View</span> <span class="attr">style</span>=<span class="string">&#123;styles.container&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">              <span class="tag">&lt;<span class="name">WebView</span> <span class="attr">bounces</span>=<span class="string">&#123;false&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                <span class="attr">scalesPageToFit</span>=<span class="string">&#123;true&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                <span class="attr">source</span>=<span class="string">&#123;&#123;uri:</span>&quot;<span class="attr">https:</span>//<span class="attr">shq5785.blog.csdn.net</span>/&quot;,<span class="attr">method:</span> &#x27;<span class="attr">GET</span>&#x27;&#125;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                <span class="attr">style</span>=<span class="string">&#123;&#123;width:deviceWidth,</span> <span class="attr">height:deviceHeight</span>&#125;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">              <span class="tag">&lt;/<span class="name">WebView</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">View</span>&gt;</span></span></span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">//æ ·å¼å®šä¹‰</span></span><br><span class="line"><span class="keyword">const</span> styles = <span class="title class_">StyleSheet</span>.<span class="title function_">create</span>(&#123;</span><br><span class="line">    <span class="attr">container</span>: &#123;</span><br><span class="line">        <span class="attr">flex</span>: <span class="number">1</span>,</span><br><span class="line">        <span class="attr">paddingTop</span>:<span class="number">20</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"> </span><br><span class="line"><span class="title class_">AppRegistry</span>.<span class="title function_">registerComponent</span>(<span class="string">&#x27;HelloWorld&#x27;</span>, <span class="function">() =&gt;</span> <span class="title class_">App</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="é€šè¿‡-htmlåŠ è½½-ä»£ç "><a href="#é€šè¿‡-htmlåŠ è½½-ä»£ç " class="headerlink" title="é€šè¿‡ htmlåŠ è½½ ä»£ç "></a>é€šè¿‡ htmlåŠ è½½ ä»£ç </h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123;<span class="title class_">Component</span>&#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">    <span class="title class_">AppRegistry</span>,</span><br><span class="line">    <span class="title class_">StyleSheet</span>,</span><br><span class="line">    <span class="title class_">Dimensions</span>,</span><br><span class="line">    <span class="title class_">Text</span>,</span><br><span class="line">    <span class="title class_">View</span>,</span><br><span class="line">    <span class="title class_">WebView</span></span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&#x27;react-native&#x27;</span>;</span><br><span class="line"> </span><br><span class="line"><span class="comment">//è·å–è®¾å¤‡çš„å®½åº¦å’Œé«˜åº¦</span></span><br><span class="line"><span class="keyword">var</span> &#123;</span><br><span class="line">    <span class="attr">height</span>: deviceHeight,</span><br><span class="line">    <span class="attr">width</span>: deviceWidth</span><br><span class="line">&#125; = <span class="title class_">Dimensions</span>.<span class="title function_">get</span>(<span class="string">&#x27;window&#x27;</span>);</span><br><span class="line"> </span><br><span class="line"><span class="comment">//é»˜è®¤åº”ç”¨çš„å®¹å™¨ç»„ä»¶</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">App</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Component</span> &#123;</span><br><span class="line">  <span class="comment">//æ¸²æŸ“</span></span><br><span class="line">  <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">   <span class="keyword">return</span> (</span><br><span class="line">       <span class="language-xml"><span class="tag">&lt;<span class="name">View</span> <span class="attr">style</span>=<span class="string">&#123;styles.container&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">         <span class="tag">&lt;<span class="name">WebView</span> <span class="attr">bounces</span>=<span class="string">&#123;false&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">           <span class="attr">scalesPageToFit</span>=<span class="string">&#123;true&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">           <span class="attr">source</span>=<span class="string">&#123;&#123;html:</span>&quot;&lt;<span class="attr">h1</span> <span class="attr">style</span>=<span class="string">&#x27;color:#ff0000&#x27;</span>&gt;</span>æ¬¢è¿è®¿é—® https://shq5785.blog.csdn.net/<span class="tag">&lt;/<span class="name">h1</span>&gt;</span>&quot;&#125;&#125;</span></span><br><span class="line"><span class="language-xml">           style=&#123;&#123;width:deviceWidth, height:deviceHeight&#125;&#125;&gt;</span></span><br><span class="line"><span class="language-xml">         <span class="tag">&lt;/<span class="name">WebView</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">       <span class="tag">&lt;/<span class="name">View</span>&gt;</span></span></span><br><span class="line">   );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">//æ ·å¼å®šä¹‰</span></span><br><span class="line"><span class="keyword">const</span> styles = <span class="title class_">StyleSheet</span>.<span class="title function_">create</span>(&#123;</span><br><span class="line">  <span class="attr">container</span>: &#123;</span><br><span class="line">      <span class="attr">flex</span>: <span class="number">1</span>,</span><br><span class="line">      <span class="attr">paddingTop</span>:<span class="number">20</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"> </span><br><span class="line"><span class="title class_">AppRegistry</span>.<span class="title function_">registerComponent</span>(<span class="string">&#x27;HelloWorld&#x27;</span>, <span class="function">() =&gt;</span> <span class="title class_">App</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="RN-gt-HTML5-é€šä¿¡"><a href="#RN-gt-HTML5-é€šä¿¡" class="headerlink" title="RN -&gt; HTML5 é€šä¿¡"></a>RN -&gt; HTML5 é€šä¿¡</h3><p>å½“<code>WebView</code>åŠ è½½<code>html</code>æ—¶ï¼Œå¯å®ç°<code>html</code>å’Œ<code>rn</code>ä¹‹é—´çš„é€šä¿¡ã€‚<code>rn</code>å‘<code>html</code>å‘é€æ•°æ®å¯ä»¥é€šè¿‡<code>postMessage</code>å‡½æ•°å®ç°ã€‚å¦‚ä¸‹ï¼š</p><p><strong>RN</strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="title class_">WebView</span></span><br><span class="line">   ref=&#123;<span class="function">(<span class="params">view</span>) =&gt;</span> (<span class="variable language_">this</span>.<span class="property">webView</span> = view)&#125;</span><br><span class="line">   useWebKit=&#123;<span class="literal">false</span>&#125;</span><br><span class="line">   useWebKit=&#123;<span class="literal">false</span>&#125;</span><br><span class="line">   onLoad=&#123;<span class="function">() =&gt;</span> &#123;</span><br><span class="line">     <span class="keyword">let</span> data = &#123;</span><br><span class="line">       <span class="attr">name</span>: userInfo.<span class="property">usrName</span></span><br><span class="line">     &#125;;</span><br><span class="line">     <span class="variable language_">this</span>.<span class="property">webView</span>.<span class="title function_">postMessage</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(data));</span><br><span class="line">   &#125;&#125;</span><br><span class="line">   onError=&#123;<span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span><br><span class="line">     <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`==webViewError:<span class="subst">$&#123;<span class="built_in">JSON</span>.stringify(event.nativeEvent)&#125;</span>`</span>);</span><br><span class="line">   &#125;&#125;</span><br><span class="line">   onMessage=&#123;<span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span><br><span class="line">     <span class="variable language_">this</span>.<span class="title function_">_onH5Message</span>(event);</span><br><span class="line">   &#125;&#125;</span><br><span class="line">   automaticallyAdjustContentInsets=&#123;<span class="literal">false</span>&#125;</span><br><span class="line">   contentInset=&#123;&#123; <span class="attr">top</span>: <span class="number">0</span>, <span class="attr">left</span>: <span class="number">0</span>, <span class="attr">bottom</span>: -<span class="number">1</span>, <span class="attr">right</span>: <span class="number">0</span> &#125;&#125;</span><br><span class="line">   onScroll=&#123;<span class="function">(<span class="params">event</span>) =&gt;</span> <span class="variable language_">this</span>.<span class="title function_">_onScroll</span>(event)&#125;</span><br><span class="line">   style=&#123;styles.<span class="property">webview</span>&#125;</span><br><span class="line">   source=&#123;<span class="variable language_">this</span>.<span class="property">html</span> ? &#123; <span class="attr">html</span>: <span class="variable language_">this</span>.<span class="property">html</span> &#125; : &#123; <span class="attr">uri</span>: <span class="variable language_">this</span>.<span class="property">url</span> &#125;&#125;</span><br><span class="line">   bounces=&#123;<span class="literal">false</span>&#125;</span><br><span class="line">   showsHorizontalScrollIndicator=&#123;<span class="literal">false</span>&#125;</span><br><span class="line">   showsVerticalScrollIndicator=&#123;<span class="literal">false</span>&#125;</span><br><span class="line"> /&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>html</strong></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åœ¨htmlä¸­æ³¨å†Œäº‹ä»¶æ¥æ”¶rnå‘è¿‡æ¥çš„æ•°æ®å¹¶æ˜¾ç¤ºåœ¨htmlä¸­</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;message&#x27;</span>, <span class="keyword">function</span> <span class="title function_">listener</span>(<span class="params">RnData</span>) &#123;</span><br><span class="line">  messagesReceivedFromReactNative += <span class="number">1</span>;</span><br><span class="line">  <span class="variable language_">document</span>.<span class="title function_">getElementsByTagName</span>(<span class="string">&#x27;p&#x27;</span>)[<span class="number">0</span>].<span class="property">innerHTML</span> =</span><br><span class="line">    <span class="string">&#x27;ä»React Nativeæ¥æ”¶çš„æ¶ˆæ¯: &#x27;</span> + messagesReceivedFromReactNative;</span><br><span class="line">  <span class="variable language_">document</span>.<span class="title function_">getElementsByTagName</span>(<span class="string">&#x27;p&#x27;</span>)[<span class="number">1</span>].<span class="property">innerHTML</span> = <span class="title class_">RnData</span>.<span class="property">data</span>;</span><br><span class="line">  <span class="comment">// è·å–æ¥æ”¶åçš„æ•°æ®åï¼ŒåŠæ—¶æ¸…é™¤ç›‘å¬å™¨</span></span><br><span class="line">  <span class="variable language_">document</span>.<span class="title function_">removeEventListener</span>(<span class="string">&#x27;message&#x27;</span>, listener)</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>åœ¨<code>html</code>ä¸­å®šä¹‰ä¸€ä¸ªæŒ‰é’®ï¼Œå¹¶æ·»åŠ äº‹ä»¶å‘<code>rn</code>å‘é€æ•°æ®ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//window.postMessageå‘rnå‘é€æ•°æ®</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">getElementsByTagName</span>(<span class="string">&#x27;button&#x27;</span>)[<span class="number">0</span>].<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">         <span class="variable language_">window</span>.<span class="property">ReactNativeWebView</span>.<span class="title function_">postMessage</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(&#123;</span><br><span class="line">            <span class="attr">message</span>: <span class="string">&quot;htmlå‘æ¥çš„æ¶ˆæ¯&quot;</span></span><br><span class="line">        &#125;));</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å½“<code>html</code>ä¸­è°ƒç”¨äº†<code>window.postMessage</code>å‡½æ•°åï¼Œ<code>WebView</code>çš„<code>onMessage</code>å‡½æ•°å°†ä¼šè¢«å›è°ƒï¼Œç”¨æ¥å¤„ç†<code>html</code>å‘<code>rn</code>å‘é€çš„æ•°æ®,å¯ä»¥é€šè¿‡<code>e.nativeEvent.data</code>è·å–å‘é€è¿‡æ¥çš„æ•°æ®ã€‚</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ¥æ”¶HTMLå‘å‡ºçš„æ•°æ®</span></span><br><span class="line">_onH5Message = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123;</span><br><span class="line">      <span class="attr">messagesReceivedFromWebView</span>: <span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">messagesReceivedFromWebView</span> + <span class="number">1</span>,</span><br><span class="line">      <span class="attr">message</span>: e.<span class="property">nativeEvent</span>.<span class="property">data</span>,</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="title class_">Alert</span>.<span class="title function_">alert</span>(e.<span class="property">nativeEvent</span>.<span class="property">data</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="JavaScript-è„šæœ¬æ³¨å…¥æ–¹å¼"><a href="#JavaScript-è„šæœ¬æ³¨å…¥æ–¹å¼" class="headerlink" title="JavaScript è„šæœ¬æ³¨å…¥æ–¹å¼"></a>JavaScript è„šæœ¬æ³¨å…¥æ–¹å¼</h3><blockquote><p>æ³¨ï¼šè¿™ç§æ–¹å¼é€‚ç”¨äº <code>react-native-webview</code> ï¼ˆ<code>RN</code>æœ¬èº«æ²¡æœ‰è¯•è¿‡ï¼‰ã€‚</p></blockquote><p>åœ¨<code>android</code>å¼€å‘ä¸­ï¼Œéœ€è¦ä½¿ç”¨ <code>javaScriptEnabled</code>å±æ€§æ¥æ”¯æŒ<code>JavaScript</code>ï¼Œ<code>ios</code>é»˜è®¤æ˜¯æ”¯æŒçš„ï¼Œæ²¡æœ‰æ­¤å±æ€§ã€‚åœ¨<code>WebView</code>ä¸­æä¾›äº†å‡½æ•°<code>injectJavaScriptï¼ˆStringï¼‰</code>,å®ƒæœ‰ä¸€ä¸ªå­—ç¬¦ä¸²å‚æ•°ï¼Œå¯ä»¥å‘<code>webview</code>ä¸­æ³¨å…¥è„šæœ¬ï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è„šæœ¬æ³¨å…¥</span></span><br><span class="line">injectJS = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> script = <span class="string">&#x27;document.write(&quot;Injected JS &quot;)&#x27;</span>;  <span class="comment">// eslint-disable-line quotes</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">webview</span>) &#123;</span><br><span class="line">     <span class="variable language_">this</span>.<span class="property">webview</span>.<span class="title function_">injectJavaScript</span>(script);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å®ç°æ€è·¯ï¼šé€šè¿‡<code>injectJavaScript</code> æ³¨å…¥<code>JS</code> ï¼Œåœ¨<code>H5</code>é¡µé¢åŠ è½½ä¹‹åç«‹å³æ‰§è¡Œã€‚ç›¸å½“äº<code>webview</code>ç«¯ä¸»åŠ¨è°ƒç”¨<code>H5</code>çš„æ–¹æ³•ã€‚</p><p>æ³¨æ„äº‹é¡¹ï¼š<code>injectJavaScript</code>æ³¨å…¥çš„å¿…é¡»æ˜¯<code>js</code>ã€‚æ³¨å…¥å†…å®¹å¯ä»¥æ˜¯æ–¹æ³•å®ç°ï¼Œä¹Ÿå¯ä»¥æ˜¯æ–¹æ³•åå­—ã€‚</p><blockquote><p>æ³¨æ„ï¼š</p><ul><li>æ³¨å…¥å‡½æ•°åçš„æ—¶å€™ï¼Œå®é™…ä¸Šæ³¨å…¥çš„ä»ç„¶æ˜¯å‡½æ•°å®ç°ã€‚</li><li>å½“æ³¨å…¥<code>js</code>æ–¹æ³•åéœ€è¦ä¼ é€’å‚æ•°çš„æ—¶å€™ï¼Œå¯æå‰å°†å‡½æ•°åä½œä¸ºå­—ç¬¦ä¸²ï¼Œå‡½æ•°å‚æ•°ä½œä¸ºå˜é‡ï¼Œç”Ÿæˆä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œç„¶åå°†æ­¤å­—ç¬¦ä¸²æ³¨å…¥ã€‚</li></ul></blockquote><p><strong>RNç«¯</strong></p><p>é¦–å…ˆ<code>Webview</code>ç»‘å®š <code>ref=&#39;webView&#39;</code></p><p>åœ¨<code>H5</code>è°ƒç”¨ä¸€ä¸ªåä¸º <code>receiveMessage</code> çš„å‡½æ•°ï¼Œå¹¶ä¼ å…¥ä¸€ä¸ªå­—ç¬¦ä¸², å‚æ•°trueä¸å¯å°‘</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="title class_">WebView</span></span><br><span class="line">    ref=&#123;<span class="function">(<span class="params">view</span>) =&gt;</span> (<span class="variable language_">this</span>.<span class="property">webView</span> = view)&#125;</span><br><span class="line">    useWebKit=&#123;<span class="literal">false</span>&#125;</span><br><span class="line">    useWebKit=&#123;<span class="literal">false</span>&#125;</span><br><span class="line">    onLoadEnd=&#123;<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">endLoad</span>();</span><br><span class="line">    &#125;&#125;</span><br><span class="line">    ..</span><br><span class="line">    /&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åŠ è½½ç»“æŸè°ƒç”¨ï¼Œä¸ç®¡æ˜¯æˆåŠŸè¿˜æ˜¯å¤±è´¥ã€‚  </span></span><br><span class="line"><span class="title function_">endLoad</span>(<span class="params"></span>)&#123;   </span><br><span class="line">   <span class="comment">// åœ¨H5è°ƒç”¨ä¸€ä¸ªåä¸º `receiveMessage` çš„å‡½æ•°ï¼Œå¹¶ä¼ å…¥ä¸€ä¸ªå­—ç¬¦ä¸²,  å‚æ•°trueä¸å¯å°‘        </span></span><br><span class="line">   <span class="variable language_">this</span>.<span class="property">refs</span>.<span class="property">webView</span>.<span class="title function_">injectJavaScript</span>(<span class="string">`receiveMessage(&quot;RNå‘H5å‘é€æ¶ˆæ¯&quot;);true;`</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>H5ç«¯ï¼ˆVueå®ç°ï¼‰</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">mounted</span>(<span class="params"></span>)&#123; </span><br><span class="line">  <span class="comment">//åœ¨windowä¸ŠæŒ‚è½½ä¸€ä¸ªreceiveMessageæ–¹æ³•ï¼ŒRNä¼šè°ƒç”¨</span></span><br><span class="line">  <span class="variable language_">window</span>.<span class="property">receiveMessage</span> = <span class="function">(<span class="params">msg</span>) =&gt;</span> &#123;            </span><br><span class="line">    <span class="title function_">alert</span>( msg)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><h3 id="WebViewå¼•å…¥åˆ°react-nativeæ¡ˆä¾‹-htmlä¸react-nativeé€šä¿¡"><a href="#WebViewå¼•å…¥åˆ°react-nativeæ¡ˆä¾‹-htmlä¸react-nativeé€šä¿¡" class="headerlink" title="WebViewå¼•å…¥åˆ°react-nativeæ¡ˆä¾‹[htmlä¸react-nativeé€šä¿¡]"></a>WebViewå¼•å…¥åˆ°react-nativeæ¡ˆä¾‹[htmlä¸react-nativeé€šä¿¡]</h3><h4 id="react-nativeç«¯"><a href="#react-nativeç«¯" class="headerlink" title="react nativeç«¯"></a>react nativeç«¯</h4><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123;useEffect, useRef, useState&#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">    <span class="title class_">View</span>,</span><br><span class="line">    <span class="title class_">StyleSheet</span>, <span class="title class_">Alert</span>, <span class="title class_">Text</span>,</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&#x27;react-native&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123;inject, observer&#125; <span class="keyword">from</span> <span class="string">&quot;mobx-react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;pTd&#125; <span class="keyword">from</span> <span class="string">&quot;../../utils/ratio&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">WebView</span> <span class="keyword">from</span> <span class="string">&quot;react-native-webview&quot;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">Index</span> = (<span class="params">&#123;baseStore, navigation&#125;</span>) =&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> webView = <span class="title function_">useRef</span>(<span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> [userInfo, setUserInfo] = <span class="title function_">useState</span>(&#123;</span><br><span class="line">        <span class="attr">userInfo</span>: &#123;</span><br><span class="line">            <span class="attr">usrName</span>: <span class="string">&#x27;å¼ ä¸‰&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//è§¦å‘çš„äº‹ä»¶</span></span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">goBack</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">        navigation.<span class="title function_">navigate</span>(<span class="string">&quot;Home&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//  æ¥æ”¶HTMLå‘å‡ºçš„æ•°æ®</span></span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">_onH5Message</span> = (<span class="params">e</span>) =&gt; &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;-=-=-=&quot;</span>,e)</span><br><span class="line">        <span class="keyword">let</span> data = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(e.<span class="property">nativeEvent</span>.<span class="property">data</span>)</span><br><span class="line">        <span class="keyword">if</span> (data.<span class="property">backtrack</span>)&#123;</span><br><span class="line">            <span class="title function_">goBack</span>()</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">View</span> <span class="attr">style</span>=<span class="string">&#123;&#123;flex:</span> <span class="attr">1</span>&#125;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">WebView</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                <span class="attr">ref</span>=<span class="string">&#123;(view)</span> =&gt;</span> (webView = view)&#125;</span></span><br><span class="line"><span class="language-xml">                useWebKit=&#123;false&#125;</span></span><br><span class="line"><span class="language-xml">                mixedContentMode=&#123;&#x27;always&#x27;&#125;</span></span><br><span class="line"><span class="language-xml">                originWhitelist=&#123;[&quot;*&quot;]&#125;</span></span><br><span class="line"><span class="language-xml">                startInLoadingState=&#123;true&#125;</span></span><br><span class="line"><span class="language-xml">                onLoad=&#123;() =&gt; &#123;</span></span><br><span class="line"><span class="language-xml">                    let data = &#123;</span></span><br><span class="line"><span class="language-xml">                        name: userInfo.usrName</span></span><br><span class="line"><span class="language-xml">                    &#125;;</span></span><br><span class="line"><span class="language-xml">                    webView.postMessage(JSON.stringify(data));</span></span><br><span class="line"><span class="language-xml">                &#125;&#125;</span></span><br><span class="line"><span class="language-xml">                onError=&#123;(event) =&gt; &#123;</span></span><br><span class="line"><span class="language-xml">                    console.log(`==webViewError:$&#123;JSON.stringify(event.nativeEvent)&#125;`);</span></span><br><span class="line"><span class="language-xml">                &#125;&#125;</span></span><br><span class="line"><span class="language-xml">                onMessage=&#123;(event) =&gt; &#123;</span></span><br><span class="line"><span class="language-xml">                    _onH5Message(event);</span></span><br><span class="line"><span class="language-xml">                &#125;&#125;</span></span><br><span class="line"><span class="language-xml">                automaticallyAdjustContentInsets=&#123;false&#125;</span></span><br><span class="line"><span class="language-xml">                //æ­¤å¤„ç”¨çš„æ˜¯åœ°å€çš„æ–¹å¼å¼•å…¥</span></span><br><span class="line"><span class="language-xml">                source=&#123;&#123;uri: &#x27;http://localhost:8001/index.html&#x27;&#125;&#125;</span></span><br><span class="line"><span class="language-xml">                bounces=&#123;false&#125;</span></span><br><span class="line"><span class="language-xml">                showsHorizontalScrollIndicator=&#123;false&#125;</span></span><br><span class="line"><span class="language-xml">                showsVerticalScrollIndicator=&#123;false&#125;</span></span><br><span class="line"><span class="language-xml">            /&gt;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">View</span>&gt;</span></span></span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> styles = <span class="title class_">StyleSheet</span>.<span class="title function_">create</span>(&#123;</span><br><span class="line"></span><br><span class="line">    <span class="attr">titleContent</span>: &#123;</span><br><span class="line">        <span class="attr">display</span>: <span class="string">&quot;flex&quot;</span>,</span><br><span class="line">        <span class="attr">flexDirection</span>: <span class="string">&quot;row&quot;</span>,</span><br><span class="line">        <span class="attr">justifyContent</span>: <span class="string">&quot;center&quot;</span>,</span><br><span class="line">        <span class="attr">alignItems</span>: <span class="string">&quot;center&quot;</span>,</span><br><span class="line">        <span class="attr">marginTop</span>: <span class="string">&quot;1.5%&quot;</span></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">inject</span>(<span class="string">&#x27;baseStore&#x27;</span>)(<span class="title function_">observer</span>(<span class="title class_">Index</span>));</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="htmlç«¯"><a href="#htmlç«¯" class="headerlink" title="htmlç«¯"></a>htmlç«¯</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">backtrackClick</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">window</span>.<span class="property">ReactNativeWebView</span>.<span class="title function_">postMessage</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(&#123;</span><br><span class="line">        <span class="attr">backtrack</span>: <span class="literal">true</span></span><br><span class="line">    &#125;));</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">æ–‡ç« ä½œè€…:</span> <span class="post-copyright-info"><a href="mailto:undefined">By_Xb</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">æ–‡ç« é“¾æ¥:</span> <span class="post-copyright-info"><a href="https://wtnl.xyz/2024/11/04/react-native-%E5%9F%BA%E7%A1%80/">https://wtnl.xyz/2024/11/04/react-native-åŸºç¡€/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">ç‰ˆæƒå£°æ˜:</span> <span class="post-copyright-info">æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜æ¥è‡ª <a href="https://wtnl.xyz" target="_blank">By_Xb</a>ï¼</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/react-native/">react-native</a></div><div class="post_share"><div class="social-share" data-image="https://soobsj.oss-cn-hangzhou.aliyuncs.com/images/2024-11-04/images10202205111418999.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload='this.media="all"'><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer="defer"></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2024/11/04/react-native-%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/"><img class="prev-cover" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://soobsj.oss-cn-hangzhou.aliyuncs.com/images/2024-11-04/images10202205111418999.png" onerror='onerror=null,src="/img/404.jpg"' alt="cover of previous post"><div class="pagination-info"><div class="label">ä¸Šä¸€ç¯‡</div><div class="prev_info">react-native-ç¯å¢ƒæ­å»º</div></div></a></div><div class="next-post pull-right"><a href="/2024/11/04/picgo%E6%90%AD%E9%85%8Dsm%E5%9B%BE%E5%BA%8A/"><img class="next-cover" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://i.loli.net/2020/12/20/CcywUpQbLEZOuVd.png" onerror='onerror=null,src="/img/404.jpg"' alt="cover of next post"><div class="pagination-info"><div class="label">ä¸‹ä¸€ç¯‡</div><div class="next_info">Picgoæ­é…SM.MSå®ç°ç®€å•çš„å›¾åºŠ</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>ç›¸å…³æ¨è</span></div><div class="relatedPosts-list"><div><a href="/2024/11/04/react-native-%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/" title="react-native-ç¯å¢ƒæ­å»º"><img class="cover" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://soobsj.oss-cn-hangzhou.aliyuncs.com/images/2024-11-04/images10202205111418999.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-11-04</div><div class="title">react-native-ç¯å¢ƒæ­å»º</div></div></a></div></div></div><hr><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i> <span>è¯„è®º</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://soobsj.oss-cn-hangzhou.aliyuncs.com/images/202411050018773.webp" onerror='this.onerror=null,this.src="/img/friend_404.gif"' alt="avatar"></div><div class="author-info__name">By_Xb</div><div class="author-info__description"></div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">87</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">35</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">6</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://byxiaobian.github.io/"><i class="fa fa-paper-plane-o"></i><span>å‰å¾€ä¸»é¡µ</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>å…¬å‘Š</span></div><div class="announcement_content"><p class="div-border blue" style="color:#000;text-align:center"><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://soobsj.oss-cn-hangzhou.aliyuncs.com/images/202411050016305.gif" style="float:left" width="25" height="25"><b>è®°å½•ä¸€äº›åç«¯çŸ¥è¯†</b><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://soobsj.oss-cn-hangzhou.aliyuncs.com/images/202411050016305.gif" style="float:right" width="25" height="25"></p><p class="div-border yellow" style="color:#000;text-align:center"><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://soobsj.oss-cn-hangzhou.aliyuncs.com/images/202411050017011.gif" style="float:left" width="25" height="25"><b>åˆ†äº«ä¸€äº›ç¬”è®°å¿ƒå¾—</b><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://soobsj.oss-cn-hangzhou.aliyuncs.com/images/202411050017011.gif" style="float:right" width="25" height="25"></p><p class="div-border green" style="color:#000;text-align:center"><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://soobsj.oss-cn-hangzhou.aliyuncs.com/images/202411050017574.gif" style="float:left" width="25" height="25"><b>åƒå–åƒå–åƒå–åƒå–</b><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://soobsj.oss-cn-hangzhou.aliyuncs.com/images/202411050017574.gif" style="float:right" width="25" height="25"></p></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>ç›®å½•</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#React-native-%E5%9F%BA%E7%A1%80"><span class="toc-number">1.</span> <span class="toc-text">React-native - åŸºç¡€</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#React-Native-%E4%BB%8B%E7%BB%8D"><span class="toc-number">1.1.</span> <span class="toc-text">React Native ä»‹ç»</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84"><span class="toc-number">1.2.</span> <span class="toc-text">æ–‡ä»¶ç›®å½•ç»“æ„</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%80%81%E5%B8%88%E7%9A%84vs-code%E7%9A%84%E6%8F%92%E4%BB%B6"><span class="toc-number">1.2.1.</span> <span class="toc-text">è€å¸ˆçš„vs codeçš„æ’ä»¶</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#JSX"><span class="toc-number">1.3.</span> <span class="toc-text">JSX</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#RN%E6%A0%B7%E5%BC%8F"><span class="toc-number">1.4.</span> <span class="toc-text">RNæ ·å¼</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#flex%E5%B8%83%E5%B1%80"><span class="toc-number">1.4.1.</span> <span class="toc-text">flexå¸ƒå±€</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%B7%E5%BC%8F%E7%BB%A7%E6%89%BF%E4%B8%8E%E4%BD%BF%E7%94%A8"><span class="toc-number">1.4.2.</span> <span class="toc-text">æ ·å¼ç»§æ‰¿ä¸ä½¿ç”¨</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A0%B7%E5%BC%8F%E7%BB%A7%E6%89%BF"><span class="toc-number">1.4.2.1.</span> <span class="toc-text">æ ·å¼ç»§æ‰¿</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8D%95%E4%BD%8D"><span class="toc-number">1.4.3.</span> <span class="toc-text">å•ä½</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B1%8F%E5%B9%95%E5%AE%BD%E5%BA%A6%E5%92%8C%E9%AB%98%E5%BA%A6"><span class="toc-number">1.4.4.</span> <span class="toc-text">å±å¹•å®½åº¦å’Œé«˜åº¦</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%98%E6%8D%A2"><span class="toc-number">1.4.5.</span> <span class="toc-text">å˜æ¢</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E6%A0%B7%E5%BC%8F"><span class="toc-number">1.4.5.1.</span> <span class="toc-text">ä½¿ç”¨æ ·å¼</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E7%A7%8D%EF%BC%9A%E7%9B%B4%E6%8E%A5%E4%BD%BF%E7%94%A8"><span class="toc-number">1.4.5.1.1.</span> <span class="toc-text">ç¬¬ä¸€ç§ï¼šç›´æ¥ä½¿ç”¨</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E7%A7%8D%EF%BC%9A%E5%85%AC%E5%85%B1%E4%BD%BF%E7%94%A8"><span class="toc-number">1.4.5.1.2.</span> <span class="toc-text">ç¬¬äºŒç§ï¼šå…¬å…±ä½¿ç”¨</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%B1%8F%E5%B9%95%E6%AF%94%E4%BE%8B%E8%BD%AC%E6%8D%A2%E5%B7%A5%E5%85%B7%E7%B1%BB"><span class="toc-number">1.4.5.1.3.</span> <span class="toc-text">å±å¹•æ¯”ä¾‹è½¬æ¢å·¥å…·ç±»</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8"><span class="toc-number">1.4.5.1.3.1.</span> <span class="toc-text">ä½¿ç”¨</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A0%87%E7%AD%BE"><span class="toc-number">1.5.</span> <span class="toc-text">æ ‡ç­¾</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#View"><span class="toc-number">1.5.1.</span> <span class="toc-text">View</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Text"><span class="toc-number">1.5.2.</span> <span class="toc-text">Text</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#TouchableOpacity"><span class="toc-number">1.5.3.</span> <span class="toc-text">TouchableOpacity</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Image"><span class="toc-number">1.5.4.</span> <span class="toc-text">Image</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ImageBackground"><span class="toc-number">1.5.5.</span> <span class="toc-text">ImageBackground</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#TextInput"><span class="toc-number">1.5.6.</span> <span class="toc-text">TextInput</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AF%AD%E6%B3%95"><span class="toc-number">1.6.</span> <span class="toc-text">è¯­æ³•</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8F%92%E5%80%BC%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-number">1.6.1.</span> <span class="toc-text">æ’å€¼è¡¨è¾¾å¼</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%84%E4%BB%B6"><span class="toc-number">1.6.2.</span> <span class="toc-text">ç»„ä»¶</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%E7%BB%84%E4%BB%B6"><span class="toc-number">1.6.2.1.</span> <span class="toc-text">å‡½æ•°ç»„ä»¶</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%B1%BB%E7%BB%84%E4%BB%B6"><span class="toc-number">1.6.2.2.</span> <span class="toc-text">ç±»ç»„ä»¶</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%8A%B6%E6%80%81-state"><span class="toc-number">1.6.3.</span> <span class="toc-text">çŠ¶æ€ state</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B1%9E%E6%80%A7-props"><span class="toc-number">1.6.4.</span> <span class="toc-text">å±æ€§ props</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8B%E4%BB%B6"><span class="toc-number">1.6.5.</span> <span class="toc-text">äº‹ä»¶</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BB%91%E5%AE%9A%E6%97%B6%E9%97%B4%E9%9C%80%E8%A6%81%E7%89%B9%E5%88%AB%E6%B3%A8%E6%84%8F-this%E7%9A%84%E6%8C%87%E5%90%91%E9%97%AE%E9%A2%98-%E5%8F%AF%E4%BB%A5%E6%80%BB%E7%BB%93%E4%B8%BA%E5%A6%82%E4%B8%8B%E7%9A%84%E6%96%B9%E5%BC%8F"><span class="toc-number">1.6.5.1.</span> <span class="toc-text">ç»‘å®šæ—¶é—´éœ€è¦ç‰¹åˆ«æ³¨æ„ thisçš„æŒ‡å‘é—®é¢˜,å¯ä»¥æ€»ç»“ä¸ºå¦‚ä¸‹çš„æ–¹å¼</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%80%BB%E7%BB%93"><span class="toc-number">1.6.5.2.</span> <span class="toc-text">æ€»ç»“</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#class%E4%BA%8B%E4%BB%B6%E4%BC%A0%E5%8F%82"><span class="toc-number">1.6.5.2.1.</span> <span class="toc-text">classäº‹ä»¶ä¼ å‚</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#hooks%E4%BA%8B%E4%BB%B6%E4%BC%A0%E5%8F%82"><span class="toc-number">1.6.5.2.2.</span> <span class="toc-text">hooksäº‹ä»¶ä¼ å‚</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-number">1.6.6.</span> <span class="toc-text">ç”Ÿå‘½å‘¨æœŸ</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%BB%E8%A6%81%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-number">1.6.6.1.</span> <span class="toc-text">ä¸»è¦çš„ç”Ÿå‘½å‘¨æœŸ</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#hook"><span class="toc-number">1.7.</span> <span class="toc-text">hook</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-Hook%E6%98%AF%E4%BB%80%E4%B9%88"><span class="toc-number">1.7.1.</span> <span class="toc-text">1 Hookæ˜¯ä»€ä¹ˆ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-useState"><span class="toc-number">1.7.2.</span> <span class="toc-text">2 useState</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-useEffect"><span class="toc-number">1.7.3.</span> <span class="toc-text">3 useEffect</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E8%87%AA%E5%AE%9A%E4%B9%89Hook"><span class="toc-number">1.7.4.</span> <span class="toc-text">4 è‡ªå®šä¹‰Hook</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ref-useRef"><span class="toc-number">1.8.</span> <span class="toc-text">ref useRef</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%88%B6%E4%B8%8E%E5%AD%90%E9%97%B4%E4%BD%BF%E7%94%A8-ref"><span class="toc-number">1.8.1.</span> <span class="toc-text">çˆ¶ä¸å­é—´ä½¿ç”¨ ref</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#hooks%E4%B8%8Eclass%E9%97%B4%E7%9A%84%E7%9A%84ref"><span class="toc-number">1.8.2.</span> <span class="toc-text">hooksä¸classé—´çš„çš„ref</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#useState"><span class="toc-number">1.9.</span> <span class="toc-text">useState</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#React%E4%B8%AD%E7%9A%84%E7%B1%BB%E7%BB%84%E4%BB%B6%E5%92%8C%E5%87%BD%E6%95%B0%E7%BB%84%E4%BB%B6"><span class="toc-number">1.9.1.</span> <span class="toc-text">Reactä¸­çš„ç±»ç»„ä»¶å’Œå‡½æ•°ç»„ä»¶</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#React-useState-hook%E5%81%9A%E4%BA%86%E4%BB%80%E4%B9%88"><span class="toc-number">1.9.2.</span> <span class="toc-text">React.useState hookåšäº†ä»€ä¹ˆ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#React%E5%A3%B0%E6%98%8E%E7%8A%B6%E6%80%81"><span class="toc-number">1.9.3.</span> <span class="toc-text">Reactå£°æ˜çŠ¶æ€</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#React-Hooks-%E6%9B%B4%E6%96%B0%E7%8A%B6%E6%80%81"><span class="toc-number">1.9.4.</span> <span class="toc-text">React Hooks: æ›´æ–°çŠ¶æ€</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9C%A8useState-hook%E4%B8%AD%E4%BD%BF%E7%94%A8%E5%AF%B9%E8%B1%A1%E4%BD%9C%E4%B8%BA%E7%8A%B6%E6%80%81%E5%8F%98%E9%87%8F"><span class="toc-number">1.9.5.</span> <span class="toc-text">åœ¨useState hookä¸­ä½¿ç”¨å¯¹è±¡ä½œä¸ºçŠ¶æ€å˜é‡</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#React-Hooks%E4%B8%AD%E5%A6%82%E4%BD%95%E6%9B%B4%E6%96%B0%E5%B5%8C%E5%A5%97%E5%AF%B9%E8%B1%A1%E7%8A%B6%E6%80%81"><span class="toc-number">1.9.6.</span> <span class="toc-text">React Hooksä¸­å¦‚ä½•æ›´æ–°åµŒå¥—å¯¹è±¡çŠ¶æ€</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A3%B0%E6%98%8E%E5%A4%9A%E4%B8%AA%E7%8A%B6%E6%80%81%E5%8F%98%E9%87%8F%E8%BF%98%E6%98%AF%E4%B8%80%E4%B8%AA%E7%8A%B6%E6%80%81%E5%AF%B9%E8%B1%A1"><span class="toc-number">1.9.7.</span> <span class="toc-text">å£°æ˜å¤šä¸ªçŠ¶æ€å˜é‡è¿˜æ˜¯ä¸€ä¸ªçŠ¶æ€å¯¹è±¡</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#useState%E4%BD%BF%E7%94%A8%E8%A7%84%E5%88%99"><span class="toc-number">1.9.8.</span> <span class="toc-text">useStateä½¿ç”¨è§„åˆ™</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#useReducerHook%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-number">1.9.9.</span> <span class="toc-text">useReducerHookçš„ä½¿ç”¨</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%80%BB%E7%BB%93-1"><span class="toc-number">1.9.10.</span> <span class="toc-text">æ€»ç»“</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#React-Native-%E5%B1%9E%E6%80%A7%E3%80%81%E6%8E%A7%E4%BB%B6%E3%80%81%E6%A0%B7%E5%BC%8F"><span class="toc-number">1.10.</span> <span class="toc-text">React-Native-å±æ€§ã€æ§ä»¶ã€æ ·å¼</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#WebView%E7%9A%84%E4%BD%BF%E7%94%A8-%E6%B7%B7%E5%90%88html%E5%BC%80%E5%8F%91"><span class="toc-number">2.</span> <span class="toc-text">WebViewçš„ä½¿ç”¨[æ··åˆhtmlå¼€å‘]</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85WebView"><span class="toc-number">2.0.1.</span> <span class="toc-text">å®‰è£…WebView</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%80%9A%E8%BF%87-url-%E5%9C%B0%E5%9D%80%E5%8A%A0%E8%BD%BD%E7%BD%91%E9%A1%B5"><span class="toc-number">2.0.2.</span> <span class="toc-text">é€šè¿‡ url åœ°å€åŠ è½½ç½‘é¡µ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%80%9A%E8%BF%87-html%E5%8A%A0%E8%BD%BD-%E4%BB%A3%E7%A0%81"><span class="toc-number">2.0.3.</span> <span class="toc-text">é€šè¿‡ htmlåŠ è½½ ä»£ç </span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#RN-gt-HTML5-%E9%80%9A%E4%BF%A1"><span class="toc-number">2.0.4.</span> <span class="toc-text">RN -&gt; HTML5 é€šä¿¡</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#JavaScript-%E8%84%9A%E6%9C%AC%E6%B3%A8%E5%85%A5%E6%96%B9%E5%BC%8F"><span class="toc-number">2.0.5.</span> <span class="toc-text">JavaScript è„šæœ¬æ³¨å…¥æ–¹å¼</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#WebView%E5%BC%95%E5%85%A5%E5%88%B0react-native%E6%A1%88%E4%BE%8B-html%E4%B8%8Ereact-native%E9%80%9A%E4%BF%A1"><span class="toc-number">2.0.6.</span> <span class="toc-text">WebViewå¼•å…¥åˆ°react-nativeæ¡ˆä¾‹[htmlä¸react-nativeé€šä¿¡]</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#react-native%E7%AB%AF"><span class="toc-number">2.0.6.1.</span> <span class="toc-text">react nativeç«¯</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#html%E7%AB%AF"><span class="toc-number">2.0.6.2.</span> <span class="toc-text">htmlç«¯</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>æœ€æ–°æ–‡ç« </span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2024/11/08/021-%E4%BF%A1%E6%81%AF%E6%89%93%E7%82%B9-%E5%85%AC%E4%BC%97%E5%8F%B7%E6%9C%8D%E5%8A%A1&amp;Github%E7%9B%91%E6%8E%A7&amp;%E4%BE%9B%E5%BA%94%E9%93%BE&amp;%E7%BD%91%E7%9B%98%E6%B3%84%E6%BC%8F&amp;%E8%AF%81%E4%B9%A6%E5%9B%BE%E6%A0%87%E9%82%AE%E7%AE%B1%E8%B5%84%E4%BA%A7/" title="021-ä¿¡æ¯æ‰“ç‚¹-å…¬ä¼—å·æœåŠ¡&amp;Githubç›‘æ§&amp;ä¾›åº”é“¾&amp;ç½‘ç›˜æ³„æ¼&amp;è¯ä¹¦å›¾æ ‡é‚®ç®±èµ„äº§"><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://soobsj.oss-cn-hangzhou.aliyuncs.com/images/2024-11-08/3c9919214e5c87560961e1317fe6eb23.png" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="021-ä¿¡æ¯æ‰“ç‚¹-å…¬ä¼—å·æœåŠ¡&amp;Githubç›‘æ§&amp;ä¾›åº”é“¾&amp;ç½‘ç›˜æ³„æ¼&amp;è¯ä¹¦å›¾æ ‡é‚®ç®±èµ„äº§"></a><div class="content"><a class="title" href="/2024/11/08/021-%E4%BF%A1%E6%81%AF%E6%89%93%E7%82%B9-%E5%85%AC%E4%BC%97%E5%8F%B7%E6%9C%8D%E5%8A%A1&amp;Github%E7%9B%91%E6%8E%A7&amp;%E4%BE%9B%E5%BA%94%E9%93%BE&amp;%E7%BD%91%E7%9B%98%E6%B3%84%E6%BC%8F&amp;%E8%AF%81%E4%B9%A6%E5%9B%BE%E6%A0%87%E9%82%AE%E7%AE%B1%E8%B5%84%E4%BA%A7/" title="021-ä¿¡æ¯æ‰“ç‚¹-å…¬ä¼—å·æœåŠ¡&amp;Githubç›‘æ§&amp;ä¾›åº”é“¾&amp;ç½‘ç›˜æ³„æ¼&amp;è¯ä¹¦å›¾æ ‡é‚®ç®±èµ„äº§">021-ä¿¡æ¯æ‰“ç‚¹-å…¬ä¼—å·æœåŠ¡&amp;Githubç›‘æ§&amp;ä¾›åº”é“¾&amp;ç½‘ç›˜æ³„æ¼&amp;è¯ä¹¦å›¾æ ‡é‚®ç®±èµ„äº§</a><time datetime="2024-11-07T19:31:31.884Z" title="å‘è¡¨äº 2024-11-08 03:31:31">2024-11-08</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/11/08/020-%E4%BF%A1%E6%81%AF%E6%89%93%E7%82%B9-%E7%BA%A2%E8%93%9D%E9%98%9F%E8%87%AA%E5%8A%A8%E5%8C%96%E9%A1%B9%E7%9B%AE&amp;%E8%B5%84%E4%BA%A7%E4%BE%A6%E5%AF%9F&amp;%E4%BC%81%E6%9F%A5%E4%BA%A7%E6%9D%83&amp;%E6%AD%A6%E5%99%A8%E5%BA%93%E9%83%A8%E7%BD%B2&amp;%E7%BD%91%E7%BB%9C%E7%A9%BA%E9%97%B4/" title="020-ä¿¡æ¯æ‰“ç‚¹-çº¢è“é˜Ÿè‡ªåŠ¨åŒ–é¡¹ç›®&amp;èµ„äº§ä¾¦å¯Ÿ&amp;ä¼æŸ¥äº§æƒ&amp;æ­¦å™¨åº“éƒ¨ç½²&amp;ç½‘ç»œç©ºé—´"><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://soobsj.oss-cn-hangzhou.aliyuncs.com/images/2024-11-08/ecd24c114c581fe6098263870ee23e2e.png" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="020-ä¿¡æ¯æ‰“ç‚¹-çº¢è“é˜Ÿè‡ªåŠ¨åŒ–é¡¹ç›®&amp;èµ„äº§ä¾¦å¯Ÿ&amp;ä¼æŸ¥äº§æƒ&amp;æ­¦å™¨åº“éƒ¨ç½²&amp;ç½‘ç»œç©ºé—´"></a><div class="content"><a class="title" href="/2024/11/08/020-%E4%BF%A1%E6%81%AF%E6%89%93%E7%82%B9-%E7%BA%A2%E8%93%9D%E9%98%9F%E8%87%AA%E5%8A%A8%E5%8C%96%E9%A1%B9%E7%9B%AE&amp;%E8%B5%84%E4%BA%A7%E4%BE%A6%E5%AF%9F&amp;%E4%BC%81%E6%9F%A5%E4%BA%A7%E6%9D%83&amp;%E6%AD%A6%E5%99%A8%E5%BA%93%E9%83%A8%E7%BD%B2&amp;%E7%BD%91%E7%BB%9C%E7%A9%BA%E9%97%B4/" title="020-ä¿¡æ¯æ‰“ç‚¹-çº¢è“é˜Ÿè‡ªåŠ¨åŒ–é¡¹ç›®&amp;èµ„äº§ä¾¦å¯Ÿ&amp;ä¼æŸ¥äº§æƒ&amp;æ­¦å™¨åº“éƒ¨ç½²&amp;ç½‘ç»œç©ºé—´">020-ä¿¡æ¯æ‰“ç‚¹-çº¢è“é˜Ÿè‡ªåŠ¨åŒ–é¡¹ç›®&amp;èµ„äº§ä¾¦å¯Ÿ&amp;ä¼æŸ¥äº§æƒ&amp;æ­¦å™¨åº“éƒ¨ç½²&amp;ç½‘ç»œç©ºé—´</a><time datetime="2024-11-07T19:30:53.991Z" title="å‘è¡¨äº 2024-11-08 03:30:53">2024-11-08</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/11/08/019-%E4%BF%A1%E6%81%AF%E6%89%93%E7%82%B9-%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BA%94%E7%94%A8&amp;%E8%A7%A3%E5%8C%85%E5%8F%8D%E7%BC%96%E8%AF%91&amp;%E5%8A%A8%E6%80%81%E8%B0%83%E8%AF%95&amp;%E6%8A%93%E5%8C%85&amp;%E9%9D%99%E6%80%81%E5%88%86%E6%9E%90&amp;%E6%BA%90%E7%A0%81%E6%9E%B6%E6%9E%84/" title="019-ä¿¡æ¯æ‰“ç‚¹-å°ç¨‹åºåº”ç”¨&amp;è§£åŒ…åç¼–è¯‘&amp;åŠ¨æ€è°ƒè¯•&amp;æŠ“åŒ…&amp;é™æ€åˆ†æ&amp;æºç æ¶æ„"><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://soobsj.oss-cn-hangzhou.aliyuncs.com/images/2024-11-08/284f34398dd93faea9b963944ba6bdf0.png" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="019-ä¿¡æ¯æ‰“ç‚¹-å°ç¨‹åºåº”ç”¨&amp;è§£åŒ…åç¼–è¯‘&amp;åŠ¨æ€è°ƒè¯•&amp;æŠ“åŒ…&amp;é™æ€åˆ†æ&amp;æºç æ¶æ„"></a><div class="content"><a class="title" href="/2024/11/08/019-%E4%BF%A1%E6%81%AF%E6%89%93%E7%82%B9-%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BA%94%E7%94%A8&amp;%E8%A7%A3%E5%8C%85%E5%8F%8D%E7%BC%96%E8%AF%91&amp;%E5%8A%A8%E6%80%81%E8%B0%83%E8%AF%95&amp;%E6%8A%93%E5%8C%85&amp;%E9%9D%99%E6%80%81%E5%88%86%E6%9E%90&amp;%E6%BA%90%E7%A0%81%E6%9E%B6%E6%9E%84/" title="019-ä¿¡æ¯æ‰“ç‚¹-å°ç¨‹åºåº”ç”¨&amp;è§£åŒ…åç¼–è¯‘&amp;åŠ¨æ€è°ƒè¯•&amp;æŠ“åŒ…&amp;é™æ€åˆ†æ&amp;æºç æ¶æ„">019-ä¿¡æ¯æ‰“ç‚¹-å°ç¨‹åºåº”ç”¨&amp;è§£åŒ…åç¼–è¯‘&amp;åŠ¨æ€è°ƒè¯•&amp;æŠ“åŒ…&amp;é™æ€åˆ†æ&amp;æºç æ¶æ„</a><time datetime="2024-11-07T19:30:15.451Z" title="å‘è¡¨äº 2024-11-08 03:30:15">2024-11-08</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/11/08/018-%E4%BF%A1%E6%81%AF%E6%89%93%E7%82%B9-APP%E8%B5%84%E4%BA%A7&amp;%E7%9F%A5%E8%AF%86%E4%BA%A7%E6%9D%83&amp;%E5%BA%94%E7%94%A8%E7%9B%91%E6%8E%A7&amp;%E9%9D%99%E6%80%81%E6%8F%90%E5%8F%96&amp;%E5%8A%A8%E6%80%81%E6%8A%93%E5%8C%85&amp;%E5%8A%A8%E6%80%81%E8%B0%83%E8%AF%95/" title="018-ä¿¡æ¯æ‰“ç‚¹-APPèµ„äº§&amp;çŸ¥è¯†äº§æƒ&amp;åº”ç”¨ç›‘æ§&amp;é™æ€æå–&amp;åŠ¨æ€æŠ“åŒ…&amp;åŠ¨æ€è°ƒè¯•"><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://soobsj.oss-cn-hangzhou.aliyuncs.com/images/2024-11-08/e5a0d95c4da6760cc13e26f07c1a5dfe.png" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="018-ä¿¡æ¯æ‰“ç‚¹-APPèµ„äº§&amp;çŸ¥è¯†äº§æƒ&amp;åº”ç”¨ç›‘æ§&amp;é™æ€æå–&amp;åŠ¨æ€æŠ“åŒ…&amp;åŠ¨æ€è°ƒè¯•"></a><div class="content"><a class="title" href="/2024/11/08/018-%E4%BF%A1%E6%81%AF%E6%89%93%E7%82%B9-APP%E8%B5%84%E4%BA%A7&amp;%E7%9F%A5%E8%AF%86%E4%BA%A7%E6%9D%83&amp;%E5%BA%94%E7%94%A8%E7%9B%91%E6%8E%A7&amp;%E9%9D%99%E6%80%81%E6%8F%90%E5%8F%96&amp;%E5%8A%A8%E6%80%81%E6%8A%93%E5%8C%85&amp;%E5%8A%A8%E6%80%81%E8%B0%83%E8%AF%95/" title="018-ä¿¡æ¯æ‰“ç‚¹-APPèµ„äº§&amp;çŸ¥è¯†äº§æƒ&amp;åº”ç”¨ç›‘æ§&amp;é™æ€æå–&amp;åŠ¨æ€æŠ“åŒ…&amp;åŠ¨æ€è°ƒè¯•">018-ä¿¡æ¯æ‰“ç‚¹-APPèµ„äº§&amp;çŸ¥è¯†äº§æƒ&amp;åº”ç”¨ç›‘æ§&amp;é™æ€æå–&amp;åŠ¨æ€æŠ“åŒ…&amp;åŠ¨æ€è°ƒè¯•</a><time datetime="2024-11-07T19:29:09.108Z" title="å‘è¡¨äº 2024-11-08 03:29:09">2024-11-08</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/11/08/017-%E4%BF%A1%E6%81%AF%E6%89%93%E7%82%B9-%E8%AF%AD%E8%A8%80%E6%A1%86%E6%9E%B6&amp;%E5%BC%80%E5%8F%91%E7%BB%84%E4%BB%B6&amp;FastJson&amp;Shiro&amp;Log4j&amp;SpringBoot%E7%AD%89/" title="017-ä¿¡æ¯æ‰“ç‚¹-è¯­è¨€æ¡†æ¶&amp;å¼€å‘ç»„ä»¶&amp;FastJson&amp;Shiro&amp;Log4j&amp;SpringBootç­‰"><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://soobsj.oss-cn-hangzhou.aliyuncs.com/images/2024-11-08/a2982a9f3c0f366aa6232bd4ee695f17.png" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="017-ä¿¡æ¯æ‰“ç‚¹-è¯­è¨€æ¡†æ¶&amp;å¼€å‘ç»„ä»¶&amp;FastJson&amp;Shiro&amp;Log4j&amp;SpringBootç­‰"></a><div class="content"><a class="title" href="/2024/11/08/017-%E4%BF%A1%E6%81%AF%E6%89%93%E7%82%B9-%E8%AF%AD%E8%A8%80%E6%A1%86%E6%9E%B6&amp;%E5%BC%80%E5%8F%91%E7%BB%84%E4%BB%B6&amp;FastJson&amp;Shiro&amp;Log4j&amp;SpringBoot%E7%AD%89/" title="017-ä¿¡æ¯æ‰“ç‚¹-è¯­è¨€æ¡†æ¶&amp;å¼€å‘ç»„ä»¶&amp;FastJson&amp;Shiro&amp;Log4j&amp;SpringBootç­‰">017-ä¿¡æ¯æ‰“ç‚¹-è¯­è¨€æ¡†æ¶&amp;å¼€å‘ç»„ä»¶&amp;FastJson&amp;Shiro&amp;Log4j&amp;SpringBootç­‰</a><time datetime="2024-11-07T19:28:25.127Z" title="å‘è¡¨äº 2024-11-08 03:28:25">2024-11-08</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2016 - 2024 By_Xb</div><div class="footer_custom_text"><p><a target="_blank" href="https://hexo.io/"><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://img.shields.io/badge/Frame-Hexo-blue?style=flat&logo=hexo" title="åšå®¢æ¡†æ¶ä¸ºHexo"></a>&nbsp;<a target="_blank" href="https://demo.jerryc.me/"><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://img.shields.io/badge/Theme-Butterfly-6513df?style=flat&logo=bitdefender" title="ä¸»é¢˜é‡‡ç”¨butterfly"></a>&nbsp;<a target="_blank" href="https://metroui.org.ua/index.html"><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://img.shields.io/badge/CDN-jsDelivr-orange?style=flat&logo=jsDelivr" title="æœ¬ç«™ä½¿ç”¨JsDelivrä¸ºé™æ€èµ„æºæä¾›CDNåŠ é€Ÿ"></a> &nbsp;<a target="_blank" href="https://vercel.com/"><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://img.shields.io/badge/Hosted-Vervel-brightgreen?style=flat&logo=Vercel" title="æœ¬ç«™é‡‡ç”¨åŒçº¿éƒ¨ç½²ï¼Œé»˜è®¤çº¿è·¯æ‰˜ç®¡äºVercel"></a>&nbsp;<a target="_blank" href="https://vercel.com/"><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://img.shields.io/badge/Hosted-Coding-0cedbe?style=flat&logo=Codio" title="æœ¬ç«™é‡‡ç”¨åŒçº¿éƒ¨ç½²ï¼Œè”é€šçº¿è·¯æ‰˜ç®¡äºCoding"></a>&nbsp;<a target="_blank" href="https://github.com/"><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://img.shields.io/badge/Source-Github-d021d6?style=flat&logo=GitHub" title="æœ¬ç«™é¡¹ç›®ç”±Gtihubæ‰˜ç®¡"></a>&nbsp;<a target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://img.shields.io/badge/Copyright-BY--NC--SA%204.0-d42328?style=flat&logo=Claris" title="æœ¬ç«™é‡‡ç”¨çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº«4.0å›½é™…è®¸å¯åè®®è¿›è¡Œè®¸å¯"></a></p></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="é˜…è¯»æ¨¡å¼"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="æµ…è‰²å’Œæ·±è‰²æ¨¡å¼è½¬æ¢"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="å•æ å’ŒåŒæ åˆ‡æ¢"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="è®¾ç½®"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="ç›®å½•"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="ç›´è¾¾è¯„è®º"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="å›åˆ°é¡¶éƒ¨"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><div class="search-dialog__title" id="local-search-title">æœ¬åœ°æœç´¢</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="æœç´¢æ–‡ç« " type="text"></div></div></div><hr><div id="local-search-results"></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script src="/js/search/local-search.js"></script><script>var preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    //document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    //document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',preloader.endLoading())</script><div class="js-pjax"><script>(()=>{
  const $countDom = document.getElementById('twikoo-count')
  const init = () => {
    twikoo.init(Object.assign({
      el: '#twikoo-wrap',
      envId: 'https://bian123x-twikoo.hf.space',
      region: ''
    }, null))
  }

  const getCount = () => {
    twikoo.getCommentsCount({
      envId: 'https://bian123x-twikoo.hf.space',
      region: '',
      urls: [window.location.pathname],
      includeReply: false
    }).then(function (res) {
      $countDom.innerText = res[0].count
    }).catch(function (err) {
      console.error(err);
    });
  }

  const loadTwikoo = (bool = false) => {
    if (typeof twikoo === 'object') {
      init()
      bool && $countDom && setTimeout(getCount,0)
    } else {
      getScript('https://cdn.jsdelivr.net/npm/twikoo/dist/twikoo.all.min.js').then(()=> {
        init()
        bool && $countDom && setTimeout(getCount,0)
      })
    }
  }

  if ('Twikoo' === 'Twikoo' || !true) {
    if (true) btf.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else loadTwikoo(true)
  } else {
    window.loadOtherComment = () => {
      loadTwikoo()
    }
  }
})()</script></div><script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.5.1/jquery.min.js"></script><script defer="defer" src="https://at.alicdn.com/t/font_2100218_rqdhd0ud6wd.js?spm=a313x.7781069.1998910419.88&file=font_2100218_rqdhd0ud6wd.js"></script><script defer="defer" src="/js/icon.js"></script><script defer="defer" src="https://cdn.jsdelivr.net/npm/hexo-theme-volantis@latest/source/js/issues.min.js"></script><script type="text/javascript" data-pjax src="https://unpkg.com/artitalk"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful=!0,POWERMODE.shake=!1,POWERMODE.mobile=!1,document.body.addEventListener("input",POWERMODE)</script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>let pjaxSelectors = [
  'title',
  '#config-diff',
  '#body-wrap',
  '#rightside-config-hide',
  '#rightside-config-show',
  '.js-pjax'
]

if (false) {
  pjaxSelectors.unshift('meta[property="og:image"]', 'meta[property="og:title"]', 'meta[property="og:url"]')
}

var pjax = new Pjax({
  elements: 'a:not([target="_blank"]):not([href="/shuoshuo/"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {

  // removeEventListener scroll
  window.removeEventListener('scroll', window.tocScrollFn)
  window.removeEventListener('scroll', scrollCollect)

  typeof preloader === 'object' && preloader.initLoading()

  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax], .pjax-reload script').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof chatBtnFn === 'function' && chatBtnFn()
  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // Analytics
  if (false) {
    MtaH5.pgv()
  }

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()

  typeof preloader === 'object' && preloader.endLoading()
})

document.addEventListener('pjax:error', (e) => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><div class="pjax-reload"><script async="async">for(var arr=document.getElementsByClassName("recent-post-item"),i=0;i<arr.length;i++)arr[i].classList.add("wow"),arr[i].classList.add("animate__zoomIn"),arr[i].setAttribute("data-wow-duration",""),arr[i].setAttribute("data-wow-delay",""),arr[i].setAttribute("data-wow-offset",""),arr[i].setAttribute("data-wow-iteration","")</script><script async="async">for(var arr=document.getElementsByClassName("card-widget"),i=0;i<arr.length;i++)arr[i].classList.add("wow"),arr[i].classList.add("animate__zoomIn"),arr[i].setAttribute("data-wow-duration",""),arr[i].setAttribute("data-wow-delay",""),arr[i].setAttribute("data-wow-offset",""),arr[i].setAttribute("data-wow-iteration","")</script><script async="async">for(var arr=document.getElementsByClassName("footer_custom_text"),i=0;i<arr.length;i++)arr[i].classList.add("wow"),arr[i].classList.add("animate__flipInX"),arr[i].setAttribute("data-wow-duration","3s"),arr[i].setAttribute("data-wow-delay",""),arr[i].setAttribute("data-wow-offset",""),arr[i].setAttribute("data-wow-iteration","")</script><script async="async">for(var arr=document.getElementsByClassName("article-sort-item"),i=0;i<arr.length;i++)arr[i].classList.add("wow"),arr[i].classList.add("animate__zoomIn"),arr[i].setAttribute("data-wow-duration",""),arr[i].setAttribute("data-wow-delay",""),arr[i].setAttribute("data-wow-offset",""),arr[i].setAttribute("data-wow-iteration","")</script><script async="async">for(var arr=document.getElementsByClassName("site-card"),i=0;i<arr.length;i++)arr[i].classList.add("wow"),arr[i].classList.add("animate__flipInY"),arr[i].setAttribute("data-wow-duration","3s"),arr[i].setAttribute("data-wow-delay",""),arr[i].setAttribute("data-wow-offset",""),arr[i].setAttribute("data-wow-iteration","")</script><script async="async">for(var arr=document.getElementsByClassName("category-lists"),i=0;i<arr.length;i++)arr[i].classList.add("wow"),arr[i].classList.add("animate__flipInX"),arr[i].setAttribute("data-wow-duration","3s"),arr[i].setAttribute("data-wow-delay",""),arr[i].setAttribute("data-wow-offset",""),arr[i].setAttribute("data-wow-iteration","")</script><script async="async">for(var arr=document.getElementsByClassName("tag-cloud-list is-center"),i=0;i<arr.length;i++)arr[i].classList.add("wow"),arr[i].classList.add("animate__flipInX"),arr[i].setAttribute("data-wow-duration","3s"),arr[i].setAttribute("data-wow-delay",""),arr[i].setAttribute("data-wow-offset",""),arr[i].setAttribute("data-wow-iteration","")</script><script async="async">for(var arr=document.getElementsByClassName("comment-wrap"),i=0;i<arr.length;i++)arr[i].classList.add("wow"),arr[i].classList.add("animate__slideInUp"),arr[i].setAttribute("data-wow-duration","3s"),arr[i].setAttribute("data-wow-delay",""),arr[i].setAttribute("data-wow-offset",""),arr[i].setAttribute("data-wow-iteration","")</script></div><script defer="defer" src="https://cdn.jsdelivr.net/gh/graingert/wow@1.3.0/dist/wow.min.js"></script><script defer="defer" src="/js/wow_init.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><script data-pjax>function butterfly_swiper_injector_config(){var a=document.getElementById("recent-posts");console.log("å·²æŒ‚è½½butterfly_swiper"),a.insertAdjacentHTML("afterbegin",'<div class="recent-post-item" style="height: auto;width: 100%"><div class="blog-slider swiper-container-fade swiper-container-horizontal" id="swiper_container"><div class="blog-slider__wrp swiper-wrapper" style="transition-duration: 0ms;"><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;2024/11/04/springbootæ•´åˆshiro/&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://soobsj.oss-cn-hangzhou.aliyuncs.com/images/2024-11-04/20210918204817.png" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2024-11-04</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;2024/11/04/springbootæ•´åˆshiro/&quot;);" href="javascript:void(0);" alt="">springbootæ•´åˆshiro jwt</a><div class="blog-slider__text">shiroæ¡†æ¶æ˜¯å¦‚ä»Šwebå¼€å‘åšæƒé™æ§åˆ¶çš„é‡è¦é€‰æ‹©ä¹‹ä¸€ï¼Œé™¤äº†è¿™ä¸ªä¹‹å¤–é€‰æ‹©spring securityçš„ä¹Ÿå¾ˆå¤šã€‚ä¸¤è€…éƒ½æœ‰å„è‡ªçš„ä¼˜ç‚¹ã€‚shiroæ›´åŠ ç®€å•ï¼Œè€Œspring securityæœ¬æ¥å°±æ˜¯springå®¶æ—çš„ï¼Œapiæ•´åˆèµ·æ¥æ›´åŠ å‹å¥½ã€‚åšä¸»åœ¨å®é™…é¡¹ç›®ä¸­åªç”¨è¿‡shiroï¼Œç›¸æ¯”spring securityï¼Œshiroç®€å•ä¸€äº›ã€‚ä½†æ˜¯è¿™äº›å®‰å…¨æ¡†æ¶éƒ½ä¸æ˜¯ç‰¹åˆ«å®¹æ˜“ç†è§£ã€‚</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;2024/11/04/springbootæ•´åˆshiro/&quot;);" href="javascript:void(0);" alt="">è¯¦æƒ…       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;2024/11/04/Telegram æœºå™¨äººå¼€å‘/&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://soobsj.oss-cn-hangzhou.aliyuncs.com/images/2024-11-04/images1202211220911801.png" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2024-11-04</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;2024/11/04/Telegram æœºå™¨äººå¼€å‘/&quot;);" href="javascript:void(0);" alt="">Telegramæœºå™¨äººå¼€å‘</a><div class="blog-slider__text">Telegram æ˜¯ä¸€ä¸ªç¤¾äº¤èŠå¤©è½¯ä»¶ã€‚ é‡Œé¢æœ‰ä¸€ä¸ªå¾ˆæœ‰ç‰¹è‰²çš„åŠŸèƒ½å°±æ˜¯æœºå™¨äººã€‚ æœºå™¨äººæ˜¯ç”±ç¨‹åºæ§åˆ¶ çš„ç”¨æˆ·ã€‚ æˆ‘ä»¬å¯ä»¥å†™ç¨‹åºæ¥æ§åˆ¶è¿™ä¸ªæœºå™¨äººã€‚ è€Œä¸”å†™èµ·æ¥ä¹Ÿä¸éš¾å“¦ã€‚</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;2024/11/04/Telegram æœºå™¨äººå¼€å‘/&quot;);" href="javascript:void(0);" alt="">è¯¦æƒ…       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;2024/11/04/Golangå­¦ä¹ /&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://soobsj.oss-cn-hangzhou.aliyuncs.com/images/2024-11-04/images1202211220946656.webp" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2024-11-04</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;2024/11/04/Golangå­¦ä¹ /&quot;);" href="javascript:void(0);" alt="">Golangå­¦ä¹ </a><div class="blog-slider__text">Golangå­¦ä¹ </div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;2024/11/04/Golangå­¦ä¹ /&quot;);" href="javascript:void(0);" alt="">è¯¦æƒ…       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;2024/11/04/springbootè§£å†³è·¨åŸŸ/&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://soobsj.oss-cn-hangzhou.aliyuncs.com/images/2024-11-04/20210918212344.png" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2024-11-04</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;2024/11/04/springbootè§£å†³è·¨åŸŸ/&quot;);" href="javascript:void(0);" alt="">springBootè§£å†³è·¨åŸŸçš„ä¸‰ç§æ–¹æ³•</a><div class="blog-slider__text">springBootå‰åç«¯å¯¹æ¥ è§£å†³è·¨åŸŸ</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;2024/11/04/springbootè§£å†³è·¨åŸŸ/&quot;);" href="javascript:void(0);" alt="">è¯¦æƒ…       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;2024/11/04/vue2å­¦ä¹ /&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="https://soobsj.oss-cn-hangzhou.aliyuncs.com/images/2024-11-04/u=2181711937,4147085500&amp;fm=26&amp;fmt=auto&amp;gp=0.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2024-11-04</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;2024/11/04/vue2å­¦ä¹ /&quot;);" href="javascript:void(0);" alt="">Vue2å¿«é€Ÿä¸Šæ‰‹</a><div class="blog-slider__text">Vue (è¯»éŸ³ /vjuË/ï¼Œç±»ä¼¼äº view) æ˜¯ä¸€å¥—ç”¨äºæ„å»ºç”¨æˆ·ç•Œé¢çš„æ¸è¿›å¼æ¡†æ¶ã€‚ä¸å…¶å®ƒå¤§å‹æ¡†æ¶ä¸åŒçš„æ˜¯ï¼ŒVue è¢«è®¾è®¡ä¸ºå¯ä»¥è‡ªåº•å‘ä¸Šé€å±‚åº”ç”¨ã€‚Vue çš„æ ¸å¿ƒåº“åªå…³æ³¨è§†å›¾å±‚ï¼Œä¸ä»…æ˜“äºä¸Šæ‰‹ï¼Œè¿˜ä¾¿äºä¸ç¬¬ä¸‰æ–¹åº“æˆ–æ—¢æœ‰é¡¹ç›®æ•´åˆã€‚å¦ä¸€æ–¹é¢ï¼Œå½“ä¸ç°ä»£åŒ–çš„å·¥å…·é“¾ä»¥åŠå„ç§æ”¯æŒç±»åº“ç»“åˆä½¿ç”¨æ—¶ï¼ŒVue ä¹Ÿå®Œå…¨èƒ½å¤Ÿä¸ºå¤æ‚çš„å•é¡µåº”ç”¨æä¾›é©±åŠ¨ã€‚</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;2024/11/04/vue2å­¦ä¹ /&quot;);" href="javascript:void(0);" alt="">è¯¦æƒ…       </a></div></div></div><div class="blog-slider__pagination swiper-pagination-clickable swiper-pagination-bullets"></div></div></div>')}for(var elist="undefined".split(","),cpage=location.pathname,epage="/",flag=0,i=0;i<elist.length;i++)cpage.includes(elist[i])&&flag++;"all"===epage&&0==flag?butterfly_swiper_injector_config():epage===cpage&&butterfly_swiper_injector_config()</script><script defer="defer" src="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.js"></script><script defer="defer" data-pjax src="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper_init.js"></script></body></html>